webpackJsonp([13],{1086:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"animated fadeIn"},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"合同列表",name:"first"},on:{click:function(t){this.$router.go(0)}}},[e("CContractTable",{on:{pass:t.passId}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"录入新合同",name:"second"}},[e("CContractForm")],1)],1)],1)],1)],1)},o=[],r={render:s,staticRenderFns:o};a.a=r},426:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(752),o=e(1086),r=e(21),n=r(s.a,o.a,!1,null,null,null);a.default=n.exports},460:function(t,a,e){"use strict";var s=e(138),o=e.n(s);a.a={name:"c-userSelect",props:["mode","passUser"],data:function(){return{user:"",userOptions:[]}},watch:{user:function(t){this.$emit("pass",t)},passUser:function(t){this.user=t}},mounted:function(){var t=this;o.a.get("/user/search?status=1&search=").then(function(a){for(var e=0;e<a.data.data.length;e++){var s=a.data.data[e].lastName+", "+a.data.data[e].firstName,o=basePath+"/static/img/logo.png";if(isNotEmpty(a.data.data[e].profile)){var r=JSON.parse(a.data.data[e].profile);o=basePath+"/static"+r.path}var n={label:s,profile:o,value:a.data.data[e].userId};t.userOptions.push(n)}})},methods:{userList:function(t,a){var e=this;a(!0),this.userOptions=[],o.a.get("/user/search?status=1&search="+t).then(function(t){for(var a=0;a<t.data.data.length;a++){var s=t.data.data[a].lastName+", "+t.data.data[a].firstName,o=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[a].profile)){var r=JSON.parse(t.data.data[a].profile);o=basePath+"/static"+r.path}var n={label:s,profile:o,value:t.data.data[a].userId};e.userOptions.push(n)}}),a(!1)}}}},464:function(t,a,e){"use strict";var s=e(460),o=e(504),r=e(21),n=r(s.a,o.a,!1,null,null,null);a.a=n.exports},472:function(t,a,e){"use strict";var s=e(138),o=e.n(s),r=e(473),n=[],i=[{key:"index",label:"序号",class:"text-center"},{key:"contractId",label:"合同编号",sortable:!0},{key:"oname",label:"所属人名",sortable:!0},{key:"ownerId",label:"所属人ID",sortable:!0},{key:"type",label:"合同类型",sortable:!0},{key:"status",label:"合同状态",sortable:!0},{key:"opname",label:"录入人",sortable:!0},{key:"createTime",label:"录入时间",sortable:!0},{key:"actions",label:"操作"}];a.a={name:"c-contractTable",components:{CContractForm:r.a},data:function(){return{msg:"",showModal:!1,showDeleteModal:!1,headerBgVariant:"",field:i,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],typeOptions:["劳动合同","入学协议","志愿者服务协议"],sortBy:"owner_id",sortDesc:!1,filter:null,items:n,status:"",basePath:basePath,deleteContractId:"",showDetail:!0,type:"劳动合同"}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},watch:{type:function(){this.initTable()}},methods:{documentDownload:function(t){window.open(basePath+"/contract/info/"+t+"?token="+window.localStorage.getItem("access_token"))},showDeleteContract:function(t){this.showDeleteModal=!0,this.deleteContractId=t},deleteContract:function(){var t=this;o.a.delete("/contract/"+this.deleteContractId).then(function(a){2001===a.data.code?(t.msg="删除成功!",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=a.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},contractDetail:function(){this.showDetail=!1},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.contractTable.refresh()},contractTable:function(t){var a=this;this.isBusy=!0;var e="/contract?start="+t.currentPage+"&length="+t.perPage+"&type="+this.type+"&orderCol=";switch(t.sortBy){case"contractId":e+="contract_id";break;case"ownerId":e+="owner_id";break;case"firstName":e+="first_name";break;case"createTime":e+="create_time";break;case"initDate":e+="init_date";break;case"expireDate":e+="expire_date";break;default:e+=t.sortBy}return this.isNotEmpty(t.filter)&&(e+="&search="+t.filter),t.sortDesc?e+="&order=desc":e+="&order=asc",o.a.get(e).then(function(t){var e=t.data.data;return a.totalRows=t.data.recordsTotal,e||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},473:function(t,a,e){"use strict";var s=e(474),o=e(520),r=e(21),n=r(s.a,o.a,!1,null,null,null);a.a=n.exports},474:function(t,a,e){"use strict";var s=e(481),o=e.n(s),r=e(138),n=e.n(r),i=e(464);a.a={name:"c-contractForm",components:{CUserSelect:i.a},props:["id"],data:function(){return{url:this.$route.fullPath,info:{year:"2018",semester:"01"},contract:{id:"",contractId:"",ownerId:"",oname:"",info:"",type:"",expireDate:"",initDate:"",operatorId:"",contractInfo:"",comment:""},contractRange:[],showDocument:!1,msg:"",showModal:!1,headerBgVariant:"",goToUrl:"",user:"",confirm:!1,showUpload:!1}},watch:{id:function(t){isNotEmpty(t)&&this.init()}},mounted:function(){isNotEmpty(this.id)&&this.init()},methods:{documentDownload:function(){window.open(basePath+"/contract/info/"+this.contract.id+"?token="+window.localStorage.getItem("access_token"))},init:function(){var t=this;this.showUpload=!0,n.a.get("/contract/"+this.id).then(function(a){t.contract=a.data.data;var e=t.contract.info.split("-");t.info.year=e[0],t.info.semester=e[1],t.contractRange=[new Date(t.contract.initDate),new Date(t.contract.expireDate)],isNotEmpty(t.contract.contractInfo)?(t.contract.contractInfo=JSON.parse(t.contract.contractInfo),t.showDocument=!0):t.showDocument=!1,isNotEmpty(t.contract.ownerId)?n.a.get("/user/"+t.contract.ownerId).then(function(a){var e=a.data.data.lastName+", "+a.data.data.firstName,s="/static/img/logo.png";if(isNotEmpty(a.data.data.profile)){var o=JSON.parse(a.data.data.profile);s=basePath+"/static"+o.path}t.user={label:e,value:a.data.data.userId,profile:s}}):t.user=""})},passUser:function(t){this.user=t},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},prepare:function(){this.contract.initDate=date2Str(this.contractRange[0],"yyyy-MM-dd"),this.contract.expireDate=date2Str(this.contractRange[1],"yyyy-MM-dd"),this.contract.info=this.info.year+"-"+this.info.semester,this.contract.ownerId=this.user.value},create:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.prepare(),n.a.post("/contract",t.contract).then(function(a){2001===a.data.code?(t.msg=a.data.msg,t.showModal=!0,t.headerBgVariant="success",t.contract=a.data.data,t.documentUpload()):(t.msg=a.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},update:function(){var t=this;this.$validator.validateAll().then(function(a){a&&(t.prepare(),t.contract.contractInfo=o()(t.contract.contractInfo),n.a.put("/contract/"+t.id,t.contract).then(function(a){2001===a.data.code?(t.msg=a.data.msg,t.headerBgVariant="success",t.showModal=!0):(t.msg=a.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},documentUpload:function(){var t=this;if(isNotEmpty(document.getElementById("document").files[0])){var a=new FormData;a.append("file",document.getElementById("document").files[0]),n.a.put("/contract/info/"+this.contract.id,a).then(function(a){2001===a.data.code?(t.showDocument=!0,t.showUpload&&(t.contract.contractInfo=a.data.data,t.msg=a.data.msg,t.headerBgVariant="success",t.showModal=!0)):(t.msg=a.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}}},481:function(t,a,e){t.exports={default:e(482),__esModule:!0}},482:function(t,a,e){var s=e(11),o=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},504:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-form-group",[e("b-input-group",[e("b-input-group-button",[e("b-button",{attrs:{disabled:""}},[t._v("用户")])],1),t._v(" "),e("v-select",{attrs:{filterable:!1,options:t.userOptions},on:{search:t.userList},scopedSlots:t._u([{key:"option",fn:function(a){return[e("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:a.profile}}),t._v("\n        "+t._s(a.label)+"\n      ")]}}]),model:{value:t.user,callback:function(a){t.user=a},expression:"user"}})],1)],1)},o=[],r={render:s,staticRenderFns:o};a.a=r},519:function(t,a,e){"use strict";var s=e(472),o=e(521),r=e(21),n=r(s.a,o.a,!1,null,null,null);a.a=n.exports},520:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("i",{attrs:{className:"fa fa-align-justify"}}),e("strong",[t._v("学期信息")])]),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("*年份-学期(YYYY-XX):")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%",float:"left"},attrs:{id:"year",name:"info",plain:!0,options:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},model:{value:t.info.year,callback:function(a){t.$set(t.info,"year",a)},expression:"info.year"}}),t._v(" "),e("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%"},attrs:{id:"info",name:"info",plain:!0,options:[{text:"春季",value:"01"},{text:"秋季",value:"02"},{text:"夏季",value:"03"}]},model:{value:t.info.semester,callback:function(a){t.$set(t.info,"semester",a)},expression:"info.semester"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("info"),expression:"errors.has('info')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])],1)],1)],1),t._v(" "),e("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("i",{attrs:{className:"fa fa-align-justify"}}),e("strong",[t._v("合同基本信息")])]),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("*合同所有人名:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1|max:20",expression:"'required|min:1|max:20'"},{name:"model",rawName:"v-model",value:t.contract.oname,expression:"contract.oname"}],class:{"form-control":!0,"is-invalid":t.errors.has("name")},attrs:{name:"name"},domProps:{value:t.contract.oname},on:{input:function(a){a.target.composing||t.$set(t.contract,"oname",a.target.value)}}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("name")))])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("*类型:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"劳动合同",id:"intro",name:"type"},domProps:{checked:t._q(t.contract.type,"劳动合同")},on:{change:function(a){t.$set(t.contract,"type","劳动合同")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"intro"}},[t._v("劳动合同")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"入学协议",id:"median",name:"type"},domProps:{checked:t._q(t.contract.type,"入学协议")},on:{change:function(a){t.$set(t.contract,"type","入学协议")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"median"}},[t._v("入学协议")])]),t._v(" "),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"志愿者服务协议",id:"advance",name:"type"},domProps:{checked:t._q(t.contract.type,"志愿者服务协议")},on:{change:function(a){t.$set(t.contract,"type","志愿者服务协议")}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"advance"}},[t._v("志愿者服务协议")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("type"),expression:"errors.has('type')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("type")))])])],1),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("*周期:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("el-date-picker",{staticClass:"form-control",staticStyle:{height:"34px",width:"100%",padding:"5px 12px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.contractRange,callback:function(a){t.contractRange=a},expression:"contractRange"}})],1)],1)],1),t._v(" "),e("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("i",{attrs:{className:"fa fa-align-justify"}}),e("strong",[t._v("合同所有人")])]),t._v(" "),e("b-row",[e("b-col",{attrs:{md:"2"}},[e("label",{staticClass:"control-label"},[t._v("*所有人:")])]),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("CUserSelect",{attrs:{passUser:t.user},on:{pass:t.passUser}})],1)],1)],1),t._v(" "),e("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("i",{attrs:{className:"fa fa-align-justify"}}),e("strong",[t._v("更多信息")])]),t._v(" "),t.showDocument?t._e():e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("上传合同电子版:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"6"}},[e("input",{attrs:{type:"file",id:"document"}})]),t._v(" "),t.isNotEmpty(t.id)||t.showUpload?e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("b-button",{staticClass:"btn btn-info my-1",staticStyle:{width:"100%"},on:{click:t.documentUpload}},[t._v("\n          上传\n        ")])],1):t._e(),t._v(" "),!t.showDocument&&t.isNotEmpty(t.contract.contractInfo)?e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("b-button",{staticClass:"btn btn-success",staticStyle:{width:"100%"},on:{click:function(a){t.showDocument=!0}}},[t._v("\n          取消替换\n        ")])],1):t._e()],1),t._v(" "),t.showDocument?e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("合同电子版:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"6"}},[e("b-row",[e("b-col",{attrs:{md:"6"}},[t._v("\n            点击下载-> "),e("a",{staticStyle:{cursor:"pointer"},attrs:{href:"#"},on:{click:t.documentDownload}},[t._v(t._s(t.contract.contractInfo.name))])]),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(a){t.showDocument=!1}}},[t._v("\n              替换\n            ")])],1)],1)],1)],1):t._e(),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("备注信息:")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"10"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contract.comment,expression:"contract.comment"}],class:{"form-control":!0},staticStyle:{resize:"none"},attrs:{rows:"3"},domProps:{value:t.contract.comment},on:{input:function(a){a.target.composing||t.$set(t.contract,"comment",a.target.value)}}})]),t._v(" "),e("b-col",{attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("*请确认上述信息正确无误:")])]),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("confirm")},attrs:{type:"radio",id:"yes",name:"confirm"},domProps:{checked:t._q(t.confirm,null)},on:{change:function(a){t.confirm=null}}}),t._v(" "),e("label",{staticClass:"custom-control-label",attrs:{for:"yes"}},[t._v("确认")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("confirm"),expression:"errors.has('confirm')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("confirm")))])])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"2"}},[e("label",{staticClass:"col-sm-12 control-label"},[t._v("操作:")])]),t._v(" "),e("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.id)?e("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:t.update}},[t._v("修改合同\n        ")]):e("b-button",{staticClass:"btn btn-success",staticStyle:{width:"200px"},on:{click:t.create}},[t._v(" 创建合同（同时上传文件）\n        ")])],1)],1)],1),t._v(" "),e("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:function(a){t.$router.go({path:"/logistic/contract"})}},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[e("div",{staticClass:"d-block text-center"},[e("h4",[t._v(t._s(t.msg))])])])],1)},o=[],r={render:s,staticRenderFns:o};a.a=r},521:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-container",{attrs:{fluid:""}},[e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"1"}},[e("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("b-form-group",[e("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(a){t.perPage=a},expression:"perPage"}})],1)],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"1"}},[e("legend",{staticClass:"col-form-legend"},[t._v("合同类型：")])]),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"3"}},[e("b-form-group",[e("b-form-select",{attrs:{options:t.typeOptions},model:{value:t.type,callback:function(a){t.type=a},expression:"type"}})],1)],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"4"}},[e("b-form-group",[e("b-input-group",[e("b-input-group-button",[e("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),e("b-form-input",{model:{value:t.filter,callback:function(a){t.filter=a},expression:"filter"}}),t._v(" "),e("b-input-group-button",[e("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(a){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),e("b-table",{ref:"contractTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.contractTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(a){t.sortBy=a},"update:sortDesc":function(a){t.sortDesc=a},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(a){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+a.index)+"\n    ")]}},{key:"status",fn:function(a){return[1===a.value?e("p",{staticStyle:{color:"blue"}},[t._v("未开始")]):t._e(),t._v(" "),0===a.value?e("p",{staticStyle:{color:"green"}},[t._v("正常")]):t._e(),t._v(" "),-1===a.value?e("p",{staticStyle:{color:"red"}},[t._v("已结束")]):t._e()]}},{key:"actions",fn:function(a){return[e("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),a.toggleDetails(t)}}},[t._v("\n        "+t._s(a.detailsShowing?"隐藏":"展示")+"详情\n      ")])]}},{key:"row-details",fn:function(a){return[e("b-card",[e("b-list-group",[e("b-list-group-item",{staticClass:"flex-column align-items-start"},[e("div",{staticClass:"d-flex w-100 justify-content-between"},[e("h5",{staticClass:"mb-1"},[e("strong",[t._v(t._s(a.item.oname)+"的"+t._s(a.item.type))]),t._v(" 信息")]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("合同编号："+t._s(a.item.contractId))])]),t._v(" "),e("hr"),t._v(" "),t.showDetail?e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"12"}},[e("div",{staticClass:"mr-1"},[e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-1"},[t._v("所属人:")]),t._v(" "),e("dd",{staticClass:"col-sm-2"},[t._v(t._s(a.item.oname))]),t._v(" "),e("dt",{staticClass:"col-sm-1"},[t._v("合同期限:")]),t._v(" "),e("dd",{staticClass:"col-sm-2"},[t._v(t._s(a.item.initDate)+" 至 "+t._s(a.item.expireDate))])]),t._v(" "),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-1"},[t._v("录入人:")]),t._v(" "),e("dd",{staticClass:"col-sm-2"},[t._v(t._s(a.item.opname))]),t._v(" "),e("dt",{staticClass:"col-sm-1"},[t._v("录入时间:")]),t._v(" "),e("dd",{staticClass:"col-sm-2"},[t._v(t._s(a.item.createTime))])]),t._v(" "),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-2"},[t._v("合同电子档案:")]),t._v(" "),t.isNotEmpty(a.item.contractInfo)?e("dd",{staticClass:"col-sm-5"},[e("a",{attrs:{href:"#"},on:{click:function(e){t.documentDownload(a.item.id)}}},[t._v(t._s(JSON.parse(a.item.contractInfo).name))])]):t._e()]),t._v(" "),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),e("dd",{staticClass:"col-sm-5"},[t._v(t._s(a.item.comment))])]),t._v(" "),e("hr"),t._v(" "),e("dl",{staticClass:"row"},[e("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),e("dd",{staticClass:"col-sm-5"},[e("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){e.stopPropagation(),t.showDeleteContract(a.item.id)}}},[t._v("\n                        删除该合同\n                      ")]),t._v(" "),e("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.contractDetail(a.item.id)}}},[t._v("\n                        修改该合同\n                      ")])],1)])])])],1):e("CContractForm",{attrs:{id:a.item.id}}),t._v(" "),t.showDetail?t._e():e("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:function(a){t.showDetail=!0}}},[t._v("\n              取消修改\n            ")])],1)],1)],1)]}}])}),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"6"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(a){t.currentPage=a},expression:"currentPage"}})],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{md:"6"}},[e("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至\n        "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),e("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteContract},model:{value:t.showDeleteModal,callback:function(a){t.showDeleteModal=a},expression:"showDeleteModal"}},[e("div",{staticClass:"d-block text-center"},[e("h3",[t._v("确认删除该合同？")])])]),t._v(" "),e("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.initTable},model:{value:t.showModal,callback:function(a){t.showModal=a},expression:"showModal"}},[e("div",{staticClass:"d-block text-center"},[e("h4",[t._v(t._s(t.msg))])])])],1)},o=[],r={render:s,staticRenderFns:o};a.a=r},752:function(t,a,e){"use strict";var s=e(519),o=e(473);a.a={name:"Contract",components:{CContractTable:s.a,CContractForm:o.a},data:function(){return{id:"",activeName:"first"}},methods:{passId:function(t){this.id=t,isNotEmpty(t)?this.activeName="third":this.activeName="first"}}}}});
//# sourceMappingURL=13.a8aba4732486a582175d.js.map