webpackJsonp([6],{407:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(651),i=a(760),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.default=n.exports},435:function(t,e,a){"use strict";var s=a(445),i=a(473),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},436:function(t,e,a){"use strict";var s=a(440),i=a(459),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},438:function(t,e,a){"use strict";var s=a(441),i=a(460),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},440:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-infoSelect",data:function(){return{info:"",infoOptions:[]}},mounted:function(){var t=this;i.a.get("/course/info?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].split("-"),i="";switch(s[1]){case"01":i="-春季";break;case"02":case"03":i="-秋季"}var r={label:s[0]+i,value:e.data.data[a]};t.infoOptions.push(r)}})},watch:{info:function(t){this.$emit("pass",t)}},methods:{infoList:function(t,e){var a=this;e(!0),this.infoOptions=[],i.a.get("/course/info?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.infoOptions.push(s)}}),e(!1)}}}},441:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:"",studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;i.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var r=JSON.parse(e.data.data[a].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:e.data.data[a].userId};t.studentOptions.push(n)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],i.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:t.data.data[e].userId};a.studentOptions.push(n)}}),e(!1)}}}},442:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(448),n=[],o=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名",sortable:!0},{key:"studentId",label:"学生ID",sortable:!0},{key:"sname",label:"学生名",sortable:!0},{key:"grade",label:"学生成绩",sortable:!0},{key:"complete",label:"完成情况",sortable:!0},{key:"credit",label:"获得学分",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-studentInCourseTable",components:{CTranscriptEdit:r.a},props:["mode","crn","cname","credit","studentId"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:o,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:n,showDeleteModal:!1,deleteStudentId:"",deleteCRN:""}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.studentInCourseTable.refresh()},studentInCourseTable:function(t){var e=this;this.isBusy=!0;var a="/transcript/course/student?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.crn)&&(a+="&crn="+this.crn),this.isNotEmpty(this.studentId)&&(a+="&studentId="+this.studentId),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteStudent:function(t,e){this.deleteStudentId=t,this.deleteCRN=e,this.showDeleteModal=!0},removeStuFromCourse:function(){var t=this;i.a.delete("/course/"+this.deleteCRN+"/student/"+this.deleteStudentId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},443:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-transcriptEdit",props:["row","mode"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",basePath:basePath}},methods:{updateTranscript:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&i.a.put("/transcript/"+t.id,t).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},444:function(t,e,a){"use strict";e.__esModule=!0;var s=a(542),i=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,i.default)(t)}},445:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-advisorSelect",data:function(){return{advisor:"",advisorOptions:[]}},watch:{advisor:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;i.a.get("/user/search?status=1&type=f&role=7&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var r=JSON.parse(e.data.data[a].profile);i=basePath+"/static"+r.path}var n={label:s,value:e.data.data[a].userId,profile:i};t.advisorOptions.push(n)}})},methods:{advisorList:function(t,e){var a=this;e(!0),this.advisorOptions=[],i.a.get("/user/search?type=f&role=7&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,i="";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);i=basePath+"/static"+r.path}var n={label:s,value:t.data.data[e].userId,profile:i};a.advisorOptions.push(n)}}),e(!1)}}}},446:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(438),n=a(435),o=a(436),l=a(447),c=[],d=[{key:"index",label:"序号",class:"text-center"},{key:"sname",label:"学生姓名"},{key:"fname",label:"教师姓名"},{key:"status",label:"状态"},{key:"updateTime",label:"更新时间"},{key:"oname",label:"操作人"},{key:"actions",label:"操作"}];e.a={name:"c-adviseTable",components:{CStudentInCourseTable:l.a,CInfoSelect:o.a,CNewAdvisorSelect:n.a,CAdvisorSelect:n.a,CStudentSelect:r.a},props:["showAdvisor","fromAdvisor","mode"],data:function(){return{field:d,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"id",sortDesc:!1,filter:null,items:c,info:"",showDeleteModal:!1,showModal:!1,advise:"",advisor:"",msg:"",headerBgVariant:"",student:"",newAdvisor:""}},mounted:function(){isNotEmpty(this.fromAdvisor)&&(this.advisor={value:this.fromAdvisor.userId,label:this.fromAdvisor.name})},watch:{info:function(){this.initTable()},student:function(){this.initTable()},advisor:function(){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passAdvisor:function(t){this.advisor=t},passNewAdvisor:function(t){this.newAdvisor=t},passStudent:function(t){this.student=t},passInfo:function(t){this.info=t},initTable:function(){this.$refs.adviseTable.refresh()},adviseTable:function(t){var e=this;this.isBusy=!0;var a="/advise?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.advisor)&&(a+="&facultyId="+this.advisor.value),this.isNotEmpty(this.mode)&&(a+="&mode="+this.mode),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advise=t,this.showDeleteModal=!0},updateOne:function(t){var e=this;t.facultyId=this.newAdvisor.value,i.a.put("/advise/"+t.id,t).then(function(t){2001===t.data.code?(e.msg="更新成功！",e.showModal=!0,e.headerBgVariant="success",e.initTable()):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},deleteOne:function(){var t=this;i.a.delete("/advise/"+this.advise.id).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},downloadTranscript:function(t){window.open(basePath+"/transcript/report/"+t+"?token="+window.localStorage.getItem("access_token"))}}}},447:function(t,e,a){"use strict";var s=a(442),i=a(462),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},448:function(t,e,a){"use strict";var s=a(443),i=a(461),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},450:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-facultySelect",props:["parentFaculty"],data:function(){return{faculty:"",facultyOptions:[]}},watch:{faculty:function(t){this.$emit("pass",t)},parentFaculty:function(t){this.faculty=this.parentFaculty}},mounted:function(){var t=this;i.a.get("/user/search?status=1&type=f&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,i="/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var r=JSON.parse(e.data.data[a].profile);i=basePath+"/static"+r.path}var n={label:s,value:e.data.data[a].userId,profile:i};t.facultyOptions.push(n)}})},methods:{facultyList:function(t,e){var a=this;e(!0),this.facultyOptions=[],i.a.get("/user/search?type=f&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,i="";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);i=basePath+"/static"+r.path}var n={label:s,value:t.data.data[e].userId,profile:i};a.facultyOptions.push(n)}}),e(!1)}}}},451:function(t,e,a){"use strict";var s=a(446),i=a(474),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},454:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-userSelect",props:["mode","passUser"],data:function(){return{user:"",userOptions:[]}},watch:{user:function(t){this.$emit("pass",t)},passUser:function(t){this.user=t}},mounted:function(){var t=this;i.a.get("/user/search?status=1&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var r=JSON.parse(e.data.data[a].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:e.data.data[a].userId};t.userOptions.push(n)}})},methods:{userList:function(t,e){var a=this;e(!0),this.userOptions=[],i.a.get("/user/search?status=1&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:t.data.data[e].userId};a.userOptions.push(n)}}),e(!1)}}}},455:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID"},{key:"sname",label:"姓名"},{key:"maxCredits",label:"学分上限"},{key:"complete",label:"已完成学分"},{key:"progress",label:"进行中学分"},{key:"incomplete",label:"未完成学分"},{key:"actions",label:"操作"}];e.a={name:"c-addStudentTable",props:["mode","crn","cname","credit"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:r,option:{prereq:!1,time:!1,capacity:!1,override:!1}}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{handleOk:function(t){t.preventDefault(),this.$router.go(0)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.addStudentTable.refresh()},addStudentTable:function(t){var e=this;this.isBusy=!0;var a="/student?start="+t.currentPage+"&status=1&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"studentId":a+="student_id";break;case"maxCredits":a+="max_credits";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},addStudent2Course:function(t){var e=this;i.a.put("/course/"+this.crn+"/student/"+t,this.option).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},doUpdate:function(t,e){var a=this;this.$validator.validateAll().then(function(s){var r={studentId:t,maxCredits:e};console.log(r),i.a.put("/student/"+t,r).then(function(t){2001===t.data.code?(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="success"):(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="danger")})})}}}},456:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(451),n=[],o=[{key:"index",label:"序号",class:"text-center"},{key:"userId",label:"导师信息",sortable:!0},{key:"name",label:"姓名",sortable:!0},{key:"numStudent",label:"当前辅导学生数",sortable:!0,class:"text-center"},{key:"actions",label:"操作"}];e.a={name:"c-advisorTable",components:{CAdviseTable:r.a},props:["mode"],data:function(){return{field:o,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"userId",sortDesc:!1,filter:null,items:n,info:"",showDeleteModal:!1,showModal:!1,advisor:"",msg:"",headerBgVariant:"",basePath:basePath}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{choose:function(t){this.$emit("pass",t)},initTable:function(){this.$refs.advisorTable.refresh()},advisorTable:function(t){var e=this;this.isBusy=!0;var a="/advise/advisor?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"userId":a+="user_id";break;case"name":a+="last_name";break;case"numStudent":a+="num_Student";break;case"updateTime":a+="update_time";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advisor=t,this.showDeleteModal=!0},deleteOne:function(){var t=this;i.a.delete("/advise/advisor/"+this.advisor.userId).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},resendPin:function(t){this.advisor=t,console.log(t),this.showSendModal=!0},resendOne:function(){var t=this;i.a.post("/advisor/send",this.advisor).then(function(e){2001===e.data.code?(t.msg="发送成功！",t.showModal=!0,t.headerBgVariant="success"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},updateOne:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&i.a.put("/advisor/"+t.advisor,t).then(function(t){2001===t.data.code?(e.msg="修改成功！",e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})}}}},457:function(t,e,a){"use strict";var s=a(454),i=a(499),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},459:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"icon-info"}),t._v(" 学期:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,placeholder:"输入搜索",options:t.infoOptions},on:{search:t.infoList},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},460:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-user"}),t._v(" 学生:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索"},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},461:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改成绩",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(t.row.item.sname))]),t._v(" 在 "),a("strong",[t._v(t._s(t.row.item.cname))]),t._v("\n          课程的成绩信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("课程CRN："+t._s(t.row.item.crn))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{attrs:{md:"9"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("学生名:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.sname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.credits))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("成绩:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.grade,expression:"row.item.grade"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("grade")},attrs:{placeholder:"可使用Letter Grade或百分制",name:"grade",disabled:"faculty"===t.mode},domProps:{value:t.row.item.grade},on:{input:function(e){e.target.composing||t.$set(t.row.item,"grade",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("grade"),expression:"errors.has('grade')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("grade")))])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("完成情况:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-row",[a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"complete",name:"complete",value:"1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"1")},on:{change:function(e){t.$set(t.row.item,"complete","1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"complete"}},[t._v("完成")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"process",name:"complete",value:"0",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"0")},on:{change:function(e){t.$set(t.row.item,"complete","0")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"process"}},[t._v("正在进行")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"nComplete",name:"nComplete",value:"-1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"-1")},on:{change:function(e){t.$set(t.row.item,"complete","-1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"nComplete"}},[t._v("未完成")])])])],1)],1),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("获得学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|verify_credit:"+t.row.item.credits,expression:"'required|verify_credit:' + row.item.credits + ''"},{name:"model",rawName:"v-model",value:t.row.item.credit,expression:"row.item.credit"}],class:{"form-control":!0,"is-invalid":t.errors.has("credit")},attrs:{type:"text",name:"credit",disabled:"faculty"===t.mode},domProps:{value:t.row.item.credit},on:{input:function(e){e.target.composing||t.$set(t.row.item,"credit",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("credit"),expression:"errors.has('credit')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("credit"))+"\n                ")])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("评语:")]),t._v(" "),a("dd",{staticClass:"col-sm-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.item.remark,expression:"row.item.remark"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"7"},domProps:{value:t.row.item.remark},on:{input:function(e){e.target.composing||t.$set(t.row.item,"remark",e.target.value)}}})])]),t._v(" "),"faculty"!==t.mode?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.updateTranscript(t.row.item,t.row)}}},[t._v("\n                  修改成绩\n                ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  取消修改\n                ")])],1)]):t._e()]),t._v(" "),a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.row.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:"/static/eas/img/logo.png"}})])],1)],1)])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},462:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"studentInCourseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.studentInCourseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"complete",fn:function(e){return["1"===e.value?a("p",{staticStyle:{color:"green"}},[t._v("完成")]):t._e(),t._v(" "),"0"===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("进行中")]):t._e(),t._v(" "),"-1"===e.value?a("p",{staticStyle:{color:"red"}},[t._v("挂科")]):t._e()]}},{key:"actions",fn:function(e){return["student"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteStudent(e.item.studentId,e.item.crn)}}},[t._v("\n        移除该学生\n      ")]):t._e(),t._v(" "),"transcript"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        修改成绩\n      ")]):t._e(),t._v(" "),"faculty"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        学生学分和成绩查看\n      ")]):t._e()]}},{key:"row-details",fn:function(e){return[a("CTranscriptEdit",{attrs:{row:e,mode:t.mode}})]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger","ok-title":"确认",centered:"",title:"不可逆操作警告！"},on:{ok:t.removeStuFromCourse},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v("确认删除该学生？")])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},463:function(t,e,a){"use strict";e.a={name:"c-footer"}},464:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:[],studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;i.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var r=JSON.parse(e.data.data[a].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:e.data.data[a].userId};t.studentOptions.push(n)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],i.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,i=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);i=basePath+"/static"+r.path}var n={label:s,profile:i,value:t.data.data[e].userId};a.studentOptions.push(n)}}),e(!1)}}}},465:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-pinSelect",data:function(){return{pin:{label:"---选择识别码---",value:""},pinOptions:[{label:"---选择识别码---",value:""}]}},mounted:function(){var t=this;i.a.get("/pin?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s={label:e.data.data[a],value:e.data.data[a]};t.pinOptions.push(s)}})},watch:{pin:function(t){this.$emit("pass",t)}},methods:{pinList:function(t,e){var a=this;e(!0),this.pinOptions=[],i.a.get("/pin?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.pinOptions.push(s)}}),e(!1)}}}},466:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(451),n=a(438),o=a(435),l=a(436),c=[],d=[{key:"index",label:"序号",class:"text-center"},{key:"stuname",label:"学生名",sortable:!0},{key:"fname",label:"第一选择",sortable:!0},{key:"sname",label:"第二选择",sortable:!0},{key:"tname",label:"第三选择",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-requestAdviseTable",components:{CAdviseTable:r.a,CInfoSelect:l.a,CAdvisorSelect:o.a,CStudentSelect:n.a},props:["mode"],watch:{activeName:function(t){switch(t){case"first":this.status="";break;case"second":this.status="0";break;case"third":this.status="1";break;case"fourth":this.status="-1"}this.initTable()},info:function(){this.initTable()},student:function(){this.initTable()},advisor:function(){this.initTable()}},data:function(){return{activeName:"second",field:d,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:c,info:"",showDeleteModal:!1,showModal:!1,delAdvisor:"",msg:"",headerBgVariant:"",basePath:basePath,student:"",advisor:"",status:"0"}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passAdvisor:function(t){this.advisor=t},passStudent:function(t){this.student=t},passInfo:function(t){this.info=t},choose:function(t,e){var a=this;t.status="1",i.a.put("/request/advise/"+t.id+"/"+e,t).then(function(t){2001===t.data.code?(a.msg="选择成功！",a.showModal=!0,a.headerBgVariant="success",a.initTable()):(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="danger")})},initTable:function(){this.$refs.tempAdviseTable.refresh()},tempAdviseTable:function(t){var e=this;this.isBusy=!0;var a="/request/advise?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";return this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.advisor)&&(a+="&facultyId="+this.advisor.value),this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.status)&&(a+="&viewStatus="+this.status),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.delAdvisor=advisor,this.showDeleteModal=!0},deleteOne:function(){var t=this;i.a.delete("/advise/advisor/"+this.delAdvisor.userId).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},467:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(475),n=[],o=[{key:"actions",label:""},{key:"sender",label:"发件人"},{key:"subject",label:"主题"},{key:"date",label:"发件时间"}];e.a={name:"c-messageTable",props:["mode","info","id"],components:{CMessageDetail:r.a},data:function(){return{field:o,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"date",sortDesc:!0,filter:null,items:n,info:"",showDeleteModal:!1,showModal:!1,advisor:"",msg:"",headerBgVariant:"",basePath:basePath,box:"inbox"}},watch:{mode:function(t){switch(t){case"first":this.box="inbox";break;case"second":this.box="important";break;case"third":this.box="urgent";break;case"fourth":this.box="trash"}this.initTable()},id:function(t){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{showDetail:function(t){this.$router.push({path:"/message?id="+t.id})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.messageTable.refresh()},messageTable:function(t){var e=this;this.isBusy=!0;var a="/message/list?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),this.isNotEmpty(this.box)&&(a+="&box="+this.box),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;if(e.totalRows=t.data.recordsTotal,isNotEmpty(e.id))for(var s=0;s<a.length;s++)if(e.id==a[s].id){a[s]._showDetails=!0,a[s]._rowVariant="danger";var i=a[0];a[0]=a[s],a[s]=i;break}return a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},468:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-transcriptEdit",props:["row","info"],data:function(){return{msg:"",showModal:!1,showDeleteModal:!1,headerBgVariant:"",basePath:basePath,deleteId:""}},methods:{showDeleteMessage:function(t){this.deleteId=t,this.showDeleteModal=!0},deleteMessage:function(){var t=this;i.a.delete("/message/"+this.deleteId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.$router.go(0)):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},markAsRead:function(){var t=this;this.info.unread--,"重要"==this.row.item.labels&&this.info.important--,"紧急"==this.row.item.labels&&this.info.urgent--,this.row.item.status="read",i.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},markAsUnread:function(){var t=this;this.info.unread++,"重要"==this.row.item.labels&&this.info.important++,"紧急"==this.row.item.labels&&this.info.urgent++,this.row.item.status="unread",i.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},moveToInbox:function(){var t=this;this.row.item.status="read",i.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){t.$router.go(0),2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},moveToTrash:function(){var t=this;this.row.item.status="trashed",i.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){t.$router.go(0),2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},469:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(470),n=[],o=[{key:"index",label:"序号",class:"text-center"},{key:"contractId",label:"合同编号",sortable:!0},{key:"oname",label:"所属人名",sortable:!0},{key:"ownerId",label:"所属人ID",sortable:!0},{key:"type",label:"合同类型",sortable:!0},{key:"status",label:"合同状态",sortable:!0},{key:"opname",label:"录入人",sortable:!0},{key:"createTime",label:"录入时间",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-contractTable",components:{CContractForm:r.a},data:function(){return{msg:"",showModal:!1,showDeleteModal:!1,headerBgVariant:"",field:o,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],typeOptions:["劳动合同","入学协议","志愿者服务协议"],sortBy:"owner_id",sortDesc:!1,filter:null,items:n,status:"",basePath:basePath,deleteContractId:"",showDetail:!0,type:"劳动合同"}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},watch:{type:function(){this.initTable()}},methods:{documentDownload:function(t){window.open(basePath+"/contract/info/"+t+"?token="+window.localStorage.getItem("access_token"))},showDeleteContract:function(t){this.showDeleteModal=!0,this.deleteContractId=t},deleteContract:function(){var t=this;i.a.delete("/contract/"+this.deleteContractId).then(function(e){2001===e.data.code?(t.msg="删除成功!",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},contractDetail:function(){this.showDetail=!1},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.contractTable.refresh()},contractTable:function(t){var e=this;this.isBusy=!0;var a="/contract?start="+t.currentPage+"&length="+t.perPage+"&type="+this.type+"&orderCol=";switch(t.sortBy){case"contractId":a+="contract_id";break;case"ownerId":a+="owner_id";break;case"firstName":a+="first_name";break;case"createTime":a+="create_time";break;case"initDate":a+="init_date";break;case"expireDate":a+="expire_date";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},470:function(t,e,a){"use strict";var s=a(471),i=a(517),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},471:function(t,e,a){"use strict";var s=a(476),i=a.n(s),r=a(138),n=a.n(r),o=a(457);e.a={name:"c-contractForm",components:{CUserSelect:o.a},props:["id"],data:function(){return{url:this.$route.fullPath,info:{year:"2018",semester:"01"},contract:{id:"",contractId:"",ownerId:"",oname:"",info:"",type:"",expireDate:"",initDate:"",operatorId:"",contractInfo:"",comment:""},contractRange:[],showDocument:!1,msg:"",showModal:!1,headerBgVariant:"",goToUrl:"",user:"",confirm:!1,showUpload:!1}},watch:{id:function(t){isNotEmpty(t)&&this.init()}},mounted:function(){isNotEmpty(this.id)&&this.init()},methods:{documentDownload:function(){window.open(basePath+"/contract/info/"+this.contract.id+"?token="+window.localStorage.getItem("access_token"))},init:function(){var t=this;this.showUpload=!0,n.a.get("/contract/"+this.id).then(function(e){t.contract=e.data.data;var a=t.contract.info.split("-");t.info.year=a[0],t.info.semester=a[1],t.contractRange=[new Date(t.contract.initDate),new Date(t.contract.expireDate)],isNotEmpty(t.contract.contractInfo)?(t.contract.contractInfo=JSON.parse(t.contract.contractInfo),t.showDocument=!0):t.showDocument=!1,isNotEmpty(t.contract.ownerId)?n.a.get("/user/"+t.contract.ownerId).then(function(e){var a=e.data.data.lastName+", "+e.data.data.firstName,s="/static/img/logo.png";if(isNotEmpty(e.data.data.profile)){var i=JSON.parse(e.data.data.profile);s=basePath+"/static"+i.path}t.user={label:a,value:e.data.data.userId,profile:s}}):t.user=""})},passUser:function(t){this.user=t},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},prepare:function(){this.contract.initDate=date2Str(this.contractRange[0],"yyyy-MM-dd"),this.contract.expireDate=date2Str(this.contractRange[1],"yyyy-MM-dd"),this.contract.info=this.info.year+"-"+this.info.semester,this.contract.ownerId=this.user.value},create:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),n.a.post("/contract",t.contract).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.contract=e.data.data,t.documentUpload()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},update:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),t.contract.contractInfo=i()(t.contract.contractInfo),n.a.put("/contract/"+t.id,t.contract).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.headerBgVariant="success",t.showModal=!0):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},documentUpload:function(){var t=this;if(isNotEmpty(document.getElementById("document").files[0])){var e=new FormData;e.append("file",document.getElementById("document").files[0]),n.a.put("/contract/info/"+this.contract.id,e).then(function(e){2001===e.data.code?(t.showDocument=!0,t.showUpload&&(t.contract.contractInfo=e.data.data,t.msg=e.data.msg,t.headerBgVariant="success",t.showModal=!0)):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}}},473:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-user-o"}),t._v(" 导师:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.advisorOptions,placeholder:"输入搜索"},on:{search:t.advisorList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.advisor,callback:function(e){t.advisor=e},expression:"advisor"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},474:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CStudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[1==t.showAdvisor?a("CAdvisorSelect",{on:{pass:t.passAdvisor}}):t._e()],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-1"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"adviseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.adviseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"actions",fn:function(e){return["faculty"===t.mode?a("div",[a("b-btn",{staticClass:"btn btn-info",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          课程和成绩查看\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.downloadTranscript(e.item.studentId)}}},[t._v("\n          成绩单下载\n        ")])],1):a("div",[a("b-btn",{staticClass:"btn btn-danger",staticStyle:{width:"50%"},attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          删除辅导关系\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-info",staticStyle:{width:"45%"},attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          修改辅导关系\n        ")])],1)]}},{key:"row-details",fn:function(e){return["faculty"===t.mode?a("div",[a("CStudentInCourseTable",{attrs:{mode:"faculty",studentId:e.item.studentId}})],1):a("div",[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑用户",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("修改当前辅导关系")]),t._v(" "),a("small",{staticClass:"text-danger"},[t._v("注意：只可以修改导师！")])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"12"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("请分配新导师:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("CNewAdvisorSelect",{on:{pass:t.passNewAdvisor}})],1),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticStyle:{width:"150px"},attrs:{size:"sm",variant:"success"},on:{click:function(a){a.stopPropagation(),t.updateOne(e.item)}}},[t._v("\n                          提交\n                        ")])],1)])])])],1)],1)],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该辅导关系？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},475:function(t,e,a){"use strict";var s=a(468),i=a(514),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},476:function(t,e,a){t.exports={default:a(477),__esModule:!0}},477:function(t,e,a){var s=a(11),i=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},482:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-aside",data:function(){return{items:[],basePath:basePath}},mounted:function(){var t=this;i.a.get("/message/list?start=1&length=5&orderCol=date&box=inbox&order=desc").then(function(e){t.items=e.data.data})},methods:{isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},goTo:function(t){this.$router.push({path:"/message?id="+t})}}}},483:function(t,e,a){"use strict";e.a={props:{list:{type:Array,required:!0,default:function(){return[]}}},methods:{isLast:function(t){return t===this.list.length-1},showName:function(t){return t.meta&&t.meta.label&&(t=t.meta&&t.meta.label),t.name&&(t=t.name),t}}}},484:function(t,e,a){"use strict";var s=a(527),i=a(138),r=a.n(i);e.a={name:"c-header",components:{HeaderDropdown:s.a},data:function(){return{unread:0}},mounted:function(){var t=this;r.a.get("/message/count?status=unread&box=inbox").then(function(e){t.unread=e.data.data})},methods:{sidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-hidden")},sidebarMinimize:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-minimized")},mobileSidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-mobile-show")},asideToggle:function(t){t.preventDefault(),document.body.classList.toggle("aside-menu-hidden")}}}},485:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(139),n=a.n(r);e.a={name:"header-dropdown",data:function(){return{user:"",profile:"",itemsCount:42,profilePath:""}},mounted:function(){var t=this,e=n()(window.localStorage.getItem("access_token"));i.a.get("/user/"+e.sub).then(function(e){t.user=e.data.data,isNotEmpty(t.user.profile)&&(t.profile=JSON.parse(t.user.profile),t.profilePath=basePath+"/static"+t.profile.path)})},methods:{logout:function(){window.localStorage.clear(),this.$router.push({path:"/"})},viewProfile:function(){this.$router.push({path:"/profile"})}}}},486:function(t,e,a){"use strict";var s=a(533),i=a(535),r=a(537),n=a(539),o=a(541),l=a(547),c=a(549),d=a(551),u=a(553);e.a={name:"sidebar",props:{navItems:{type:Array,required:!0,default:function(){return[]}}},components:{SidebarFooter:s.a,SidebarForm:i.a,SidebarHeader:r.a,SidebarMinimizer:n.a,SidebarNavDivider:o.a,SidebarNavDropdown:l.a,SidebarNavLink:c.a,SidebarNavTitle:d.a,SidebarNavItem:u.a},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}}},487:function(t,e,a){"use strict";e.a={name:"sidebar-footer"}},488:function(t,e,a){"use strict";e.a={name:"sidebar-form"}},489:function(t,e,a){"use strict";e.a={name:"sidebar-header"}},490:function(t,e,a){"use strict";e.a={name:"sidebar-minimizer",methods:{sidebarMinimize:function(){document.body.classList.toggle("sidebar-minimized")},brandMinimize:function(){document.body.classList.toggle("brand-minimized")}}}},491:function(t,e,a){"use strict";var s=a(444),i=a.n(s);e.a={name:"sidebar-nav-divider",props:{classes:{type:String,default:""}},computed:{classList:function(){return["divider"].concat(i()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}}},492:function(t,e,a){"use strict";e.a={props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""}},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}}},493:function(t,e,a){"use strict";var s=a(444),i=a.n(s);e.a={name:"sidebar-nav-link",props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""},badge:{type:Object,default:function(){}},variant:{type:String,default:""},classes:{type:String,default:""}},computed:{classList:function(){return["nav-link",this.linkVariant].concat(i()(this.itemClasses))},linkVariant:function(){return this.variant?"nav-link-"+this.variant:""},itemClasses:function(){return this.classes?this.classes.split(" "):[]},isExternalLink:function(){return"http"===this.url.substring(0,4)}}}},494:function(t,e,a){"use strict";var s=a(444),i=a.n(s);e.a={props:{name:{type:String,default:""},classes:{type:String,default:""},wrapper:{type:Object,default:function(){}}},computed:{classList:function(){return["nav-title"].concat(i()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}}},495:function(t,e,a){"use strict";var s=a(444),i=a.n(s);e.a={name:"sidebar-nav-item",props:{classes:{type:String,default:""}},computed:{classList:function(){return["nav-item"].concat(i()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}},methods:{hideMobile:function(){document.body.classList.contains("sidebar-mobile-show")&&document.body.classList.toggle("sidebar-mobile-show")}}}},496:function(t,e,a){"use strict";var s=a(138),i=a.n(s);e.a={name:"c-courseSelect",props:["info"],data:function(){return{course:"",courseOptions:[]}},watch:{course:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;i.a.get("/course/search?info="+this.info.value+"&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s={label:e.data.data[a].name,value:e.data.data[a].crn};t.courseOptions.push(s)}})},methods:{courseList:function(t,e){var a=this;e(!0),this.courseOptions=[],i.a.get("/course/search?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e].name,value:t.data.data[e].crn};a.courseOptions.push(s)}}),e(!1)}}}},497:function(t,e,a){"use strict";var s=a(450),i=a(498),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},498:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"icon-pencil"}),t._v(" 教师:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.facultyOptions},on:{search:t.facultyList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.faculty,callback:function(e){t.faculty=e},expression:"faculty"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},499:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-users"}),t._v(" 用户:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.userOptions},on:{search:t.userList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},500:function(t,e,a){"use strict";var s=a(455),i=a(501),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},501:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"addStudentTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.addStudentTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"actions",fn:function(e){return["credit"===t.mode?a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        修改学分上限\n      ")]):t._e(),t._v(" "),"student"===t.mode?a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        添加该学生\n      ")]):t._e()]}},{key:"row-details",fn:function(e){return["credit"===t.mode?a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑学分",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(e.item.sname))]),t._v(" 的学分完成情况")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("学分上限:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.maxCredits,expression:"row.item.maxCredits"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("maxCredits")},attrs:{id:"maxCredits",name:"maxCredits"},domProps:{value:e.item.maxCredits},on:{input:function(a){a.target.composing||t.$set(e.item,"maxCredits",a.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("maxCredits"),expression:"errors.has('maxCredits')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("maxCredits"))+"\n                  ")])]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("已完成学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.complete))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("进行中学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.progress))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("未完成学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.incomplete))])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.doUpdate(e.item.studentId,e.item.maxCredits)}}},[t._v("\n                    提交\n                  ")])],1)])])])],1)],1):t._e(),t._v(" "),"student"===t.mode?a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"添加该学生",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("添加学生 "),a("strong",[t._v(t._s(e.item.sname))]),t._v(" 进入 "),a("strong",[t._v(t._s(t.cname))]),t._v(" 课程")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("h5",{staticClass:"mb-1"},[t._v("添加选项:")]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，无视任何冲突:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.override,expression:"option.override"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"override",name:"type"},domProps:{checked:Array.isArray(t.option.override)?t._i(t.option.override,"s")>-1:t.option.override},on:{change:function(e){var a=t.option.override,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,"s");s.checked?r<0&&(t.option.override=a.concat(["s"])):r>-1&&(t.option.override=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.option,"override",i)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"override"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使未完成预选课程:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.prereq,expression:"option.prereq"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"prereq",name:"type"},domProps:{checked:Array.isArray(t.option.prereq)?t._i(t.option.prereq,"s")>-1:t.option.prereq},on:{change:function(e){var a=t.option.prereq,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,"s");s.checked?r<0&&(t.option.prereq=a.concat(["s"])):r>-1&&(t.option.prereq=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.option,"prereq",i)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"prereq"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使有时间冲突:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.time,expression:"option.time"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"time",name:"type"},domProps:{checked:Array.isArray(t.option.time)?t._i(t.option.time,"s")>-1:t.option.time},on:{change:function(e){var a=t.option.time,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,"s");s.checked?r<0&&(t.option.time=a.concat(["s"])):r>-1&&(t.option.time=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.option,"time",i)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"time"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使已经达到课程人数上限:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.capacity,expression:"option.capacity"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"capacity",name:"type"},domProps:{checked:Array.isArray(t.option.capacity)?t._i(t.option.capacity,"s")>-1:t.option.capacity},on:{change:function(e){var a=t.option.capacity,s=e.target,i=!!s.checked;if(Array.isArray(a)){var r=t._i(a,"s");s.checked?r<0&&(t.option.capacity=a.concat(["s"])):r>-1&&(t.option.capacity=a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.option,"capacity",i)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"capacity"}},[t._v("是")])])])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.addStudent2Course(e.item.studentId)}}},[t._v("\n                    添加\n                  ")])],1)])])])],1)],1):t._e()]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},502:function(t,e,a){"use strict";var s=a(456),i=a(503),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},503:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"advisorTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.advisorTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"userId",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return["choose"!==t.mode?a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          取消导师资格\n        ")]),t._v(" "),a("b-button",{staticClass:"btn btn-primary",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          查看辅导学生\n        ")])],1):a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.choose(e.item)}}},[t._v("\n          选择该导师\n        ")])],1)]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start"},[a("CAdviseTable",{ref:"CAdviseTable",attrs:{showAdvisor:"0",fromAdvisor:t.item}})],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认取消"+t._s(t.advisor.name)+"的导师资格？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},505:function(t,e,a){"use strict";var s=a(463),i=a(506),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},506:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"app-footer"},[a("span",[t._v("Harambase Copyright © 2018 - Version V1.0.20180812 All Rights Reserved.")]),t._v(" "),a("span",{staticClass:"ml-auto"},[t._v("Powered by "),a("a",{attrs:{href:"https://harambase.github.io/"}},[t._v("Harambase Development Team")])])])}],r={render:s,staticRenderFns:i};e.a=r},507:function(t,e,a){"use strict";var s=a(464),i=a(508),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},508:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-user"}),t._v(" 学生:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索",multiple:""},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},509:function(t,e,a){"use strict";var s=a(465),i=a(510),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},510:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("v-select",{attrs:{filterable:!1,options:t.pinOptions},on:{search:t.pinList},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}})],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},511:function(t,e,a){"use strict";var s=a(466),i=a(512),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},512:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看所有申请",name:"first"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看申请中",name:"second"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看已批准",name:"third"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看已拒绝",name:"fourth"}}),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("辅导关系申请")]),t._v(" "),a("small",[t._v("分类查看")])]),t._v(" "),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CStudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CAdvisorSelect",{on:{pass:t.passAdvisor}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-1"},[t._v("\n                  搜索：\n                ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"tempAdviseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.tempAdviseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n          "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n        ")]}},{key:"stuname",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.stuprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.stuprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n              "+t._s(e.value)+"\n            ")])],1)]}},{key:"fname",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.fprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.fprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n              "+t._s(e.value)+"\n            ")])],1)]}},{key:"sname",fn:function(e){return["9201701000"!==e.item.secondId?a("div",[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n                "+t._s(e.value)+"\n              ")])],1)],1):a("div",[t._v("\n            无\n          ")])]}},{key:"tname",fn:function(e){return["9201701000"!==e.item.thirdId?a("div",[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.tprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.tprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n                "+t._s(e.value)+"\n              ")])],1)],1):a("div",[t._v("\n            无\n          ")])]}},{key:"actions",fn:function(e){return[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n            删除该申请\n          ")]),t._v(" "),a("b-button",{staticClass:"btn btn-primary",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n            查看申请细节\n          ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"选择导师",disabled:"0"!==e.item.status}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(e.item.stuname))]),t._v(" 的导师选择")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"9"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第一选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.fname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"1")}}},[t._v("\n                            选择该导师\n                          ")])],1)]),t._v(" "),"9201701000"!==e.item.secondId?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第二选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.sname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"2")}}},[t._v("\n                            选择该导师\n                          ")])],1)]):t._e(),t._v(" "),"9201701000"!==e.item.thirdId?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第三选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.tname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"3")}}},[t._v("\n                            选择该导师\n                          ")])],1)]):t._e(),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[t._v(t._s(e.item.comment))])])])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(e.item.stuprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.stuprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:"/static/img/logo.png"}})])],1)],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认取消"+t._s(t.advisor.name)+"的导师资格？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},513:function(t,e,a){"use strict";var s=a(467),i=a(515),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},514:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",staticStyle:{background:"#f4f6f8"},attrs:{title:t.row.item.title,disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticStyle:{color:"darkblue"}},[a("strong",[t._v(t._s(t.row.item.title)+"\n          "),a("small",[t._v(t._s(t.row.item.tag)+"消息")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{attrs:{md:"8"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("发件人:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.sender))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("发件时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.date))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("收件人:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.receiver))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("主题:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.subject))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("正文:")]),t._v(" "),a("dd",{staticClass:"col-sm-8",staticStyle:{color:"orangered"}},[a("strong",[t._v(t._s(t.row.item.body))])])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("b-row",[t.isNotEmpty(t.row.item.pic)?a("img",{staticClass:"img-avatar",attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.pic).path}}):a("img",{staticClass:"img-avatar",attrs:{src:"/static/img/logo.png"}})]),t._v(" "),a("b-row",[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-7"},[t._v("发件人联系电话:")]),t._v(" "),a("dd",{staticClass:"col-sm-7"},[t._v(t._s(t.row.item.tel))]),t._v(" "),a("dt",{staticClass:"col-sm-7"},[t._v("发件人电子邮件:")]),t._v(" "),a("dd",{staticClass:"col-sm-7"},[t._v(t._s(t.row.item.email))])])])],1)],1),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},["read"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.markAsUnread()}}},[t._v("\n                  标记为未读\n                ")]):t._e(),t._v(" "),"unread"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.markAsRead()}}},[t._v("\n                  标记为已读\n                ")]):t._e(),t._v(" "),"trashed"!=t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.moveToTrash()}}},[t._v("\n                  移入垃圾箱\n                ")]):t._e(),t._v(" "),"trashed"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.moveToInbox()}}},[t._v("\n                  移入收件箱\n                ")]):t._e(),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){e.stopPropagation(),t.showDeleteMessage(t.row.item.id)}}},[t._v("\n                  彻底删除\n                ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  关闭信息\n                ")])],1)])])],1)],1)])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteMessage},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该消息？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},515:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{attrs:{md:"9"}},[a("b-table",{ref:"messageTable",staticStyle:{cursor:"pointer"},attrs:{"show-empty":"",stacked:"sm",fixed:!0,hover:!0,items:t.messageTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"row-clicked":t.showDetail,filtered:t.onFiltered},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("div",{staticClass:"ml-4"},[a("b-row",["重要"==e.item.labels?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"blue"}}),t._v(" 重要信息")]):t._e(),t._v(" "),"紧急"==e.item.labels?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red"}}),t._v(" 紧急信息")]):t._e()]),t._v(" "),a("b-row",["unread"==e.item.status?a("span",[a("i",{staticClass:"fa fa-envelope",staticStyle:{color:"orange"}}),t._v(" 未读信息 ")]):t._e(),t._v(" "),"read"==e.item.status?a("span",[a("i",{staticClass:"fa fa-envelope-open"}),t._v(" 已读信息")]):t._e()])],1)]}},{key:"row-details",fn:function(e){return[a("CMessageDetail",{attrs:{row:e,info:t.info}})]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1)],1),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("b-row",{staticClass:"mt-4"},[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("h5",{staticClass:"col-form-legend"},[t._v("消息显示控制")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("legend",{staticClass:"col-form-legend"},[t._v("按时间排序：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-select",{class:{"form-control":!0},attrs:{id:"info",name:"info",plain:!0,options:[{text:"时间由远到近",value:!1},{text:"时间由近到远",value:!0}]},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"12"}},[a("legend",{staticClass:"col-form-legend"},[t._v("模糊搜索：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-group",[a("b-input-group",[a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},516:function(t,e,a){"use strict";var s=a(469),i=a(518),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},517:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("学期信息")])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*年份-学期(YYYY-XX):")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%",float:"left"},attrs:{id:"year",name:"info",plain:!0,options:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},model:{value:t.info.year,callback:function(e){t.$set(t.info,"year",e)},expression:"info.year"}}),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%"},attrs:{id:"info",name:"info",plain:!0,options:[{text:"春季",value:"01"},{text:"秋季",value:"02"},{text:"夏季",value:"03"}]},model:{value:t.info.semester,callback:function(e){t.$set(t.info,"semester",e)},expression:"info.semester"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("info"),expression:"errors.has('info')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("合同基本信息")])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*合同所有人名:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1|max:20",expression:"'required|min:1|max:20'"},{name:"model",rawName:"v-model",value:t.contract.oname,expression:"contract.oname"}],class:{"form-control":!0,"is-invalid":t.errors.has("name")},attrs:{name:"name"},domProps:{value:t.contract.oname},on:{input:function(e){e.target.composing||t.$set(t.contract,"oname",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("name")))])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*类型:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"劳动合同",id:"intro",name:"type"},domProps:{checked:t._q(t.contract.type,"劳动合同")},on:{change:function(e){t.$set(t.contract,"type","劳动合同")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"intro"}},[t._v("劳动合同")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"入学协议",id:"median",name:"type"},domProps:{checked:t._q(t.contract.type,"入学协议")},on:{change:function(e){t.$set(t.contract,"type","入学协议")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"median"}},[t._v("入学协议")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"志愿者服务协议",id:"advance",name:"type"},domProps:{checked:t._q(t.contract.type,"志愿者服务协议")},on:{change:function(e){t.$set(t.contract,"type","志愿者服务协议")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"advance"}},[t._v("志愿者服务协议")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("type"),expression:"errors.has('type')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("type")))])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*周期:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("el-date-picker",{staticClass:"form-control",staticStyle:{height:"34px",width:"100%",padding:"5px 12px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.contractRange,callback:function(e){t.contractRange=e},expression:"contractRange"}})],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("合同所有人")])]),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"control-label"},[t._v("*所有人:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("CUserSelect",{attrs:{passUser:t.user},on:{pass:t.passUser}})],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("更多信息")])]),t._v(" "),t.showDocument?t._e():a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("上传合同电子版:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("input",{attrs:{type:"file",id:"document"}})]),t._v(" "),t.isNotEmpty(t.id)||t.showUpload?a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("b-button",{staticClass:"btn btn-info my-1",staticStyle:{width:"100%"},on:{click:t.documentUpload}},[t._v("\n          上传\n        ")])],1):t._e(),t._v(" "),!t.showDocument&&t.isNotEmpty(t.contract.contractInfo)?a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("b-button",{staticClass:"btn btn-success",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!0}}},[t._v("\n          取消替换\n        ")])],1):t._e()],1),t._v(" "),t.showDocument?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("合同电子版:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-row",[a("b-col",{attrs:{md:"6"}},[t._v("\n            点击下载-> "),a("a",{staticStyle:{cursor:"pointer"},attrs:{href:"#"},on:{click:t.documentDownload}},[t._v(t._s(t.contract.contractInfo.name))])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!1}}},[t._v("\n              替换\n            ")])],1)],1)],1)],1):t._e(),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("备注信息:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"10"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contract.comment,expression:"contract.comment"}],class:{"form-control":!0},staticStyle:{resize:"none"},attrs:{rows:"3"},domProps:{value:t.contract.comment},on:{input:function(e){e.target.composing||t.$set(t.contract,"comment",e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*请确认上述信息正确无误:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("confirm")},attrs:{type:"radio",id:"yes",name:"confirm"},domProps:{checked:t._q(t.confirm,null)},on:{change:function(e){t.confirm=null}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"yes"}},[t._v("确认")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("confirm"),expression:"errors.has('confirm')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("confirm")))])])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("操作:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.id)?a("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:t.update}},[t._v("修改合同\n        ")]):a("b-button",{staticClass:"btn btn-success",staticStyle:{width:"200px"},on:{click:t.create}},[t._v(" 创建合同（同时上传文件）\n        ")])],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:function(e){t.$router.go({path:"/logistic/contract"})}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},518:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("合同类型：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.typeOptions},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"contractTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.contractTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"status",fn:function(e){return[1===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("未开始")]):t._e(),t._v(" "),0===e.value?a("p",{staticStyle:{color:"green"}},[t._v("正常")]):t._e(),t._v(" "),-1===e.value?a("p",{staticStyle:{color:"red"}},[t._v("已结束")]):t._e()]}},{key:"actions",fn:function(e){return[a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        "+t._s(e.detailsShowing?"隐藏":"展示")+"详情\n      ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start"},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[a("strong",[t._v(t._s(e.item.oname)+"的"+t._s(e.item.type))]),t._v(" 信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("合同编号："+t._s(e.item.contractId))])]),t._v(" "),a("hr"),t._v(" "),t.showDetail?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"12"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("所属人:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.oname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("合同期限:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.initDate)+" 至 "+t._s(e.item.expireDate))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("录入人:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.opname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("录入时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.createTime))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("合同电子档案:")]),t._v(" "),t.isNotEmpty(e.item.contractInfo)?a("dd",{staticClass:"col-sm-5"},[a("a",{attrs:{href:"#"},on:{click:function(a){t.documentDownload(e.item.id)}}},[t._v(t._s(JSON.parse(e.item.contractInfo).name))])]):t._e()]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[t._v(t._s(e.item.comment))])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.showDeleteContract(e.item.id)}}},[t._v("\n                        删除该合同\n                      ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(a){t.contractDetail(e.item.id)}}},[t._v("\n                        修改该合同\n                      ")])],1)])])])],1):a("CContractForm",{attrs:{id:e.item.id}}),t._v(" "),t.showDetail?t._e():a("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:function(e){t.showDetail=!0}}},[t._v("\n              取消修改\n            ")])],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至\n        "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteContract},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该合同？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.initTable},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},521:function(t,e,a){"use strict";var s=a(522),i=a(524),r=a(505),n=a(526),o=a(530),l=a(436),c=a(438),d=(a(507),a(556)),u=a(497);a(457),a(509),a(435),a(500),a(447),a(448),a(502),a(511),a(513),a(516),a(475),a(470);a.d(e,"a",function(){return s.a}),a.d(e,"b",function(){return i.a}),a.d(e,"e",function(){return r.a}),a.d(e,"f",function(){return n.a}),a.d(e,"h",function(){return o.a}),a.d(e,"g",function(){return l.a}),a.d(e,"i",function(){return c.a}),a.d(e,"d",function(){return u.a}),a.d(e,"c",function(){return d.a})},522:function(t,e,a){"use strict";var s=a(482),i=a(523),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},523:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"aside-menu"},[a("b-tabs",[a("b-tab",{attrs:{title:"<i class='icon-speech'></i>"}},[a("div",{staticClass:"p-3"},t._l(t.items,function(e){return a("div",{key:e.id},[a("div",{staticClass:"message",staticStyle:{cursor:"pointer"},on:{click:function(a){t.goTo(e.id)}}},[a("div",{staticClass:"py-3 mr-3 float-left"},[a("div",{staticClass:"avatar"},[t.isNotEmpty(e.pic)?a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.pic).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:"/static/img/logo.png"}}),t._v(" "),"重要"===e.labels?a("b-badge",{staticClass:"avatar-status",attrs:{variant:"danger"}}):a("b-badge",{staticClass:"avatar-status",attrs:{variant:"success"}})],1)]),t._v(" "),a("div",[a("small",{staticClass:"text-muted"},[t._v(t._s(e.sender))]),t._v(" "),a("small",{staticClass:"text-muted float-right mt-1"},[t._v(t._s(e.date))])]),t._v(" "),a("div",{staticClass:"text-truncate font-weight-bold"},[t._v(t._s(e.title))]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v(t._s(e.body.substring(0,10))+"...\n            ")])]),t._v(" "),a("hr")])}))])],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},524:function(t,e,a){"use strict";var s=a(483),i=a(525),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},525:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ol",{staticClass:"breadcrumb"},t._l(t.list,function(e,s){return a("li",{staticClass:"breadcrumb-item"},[t.isLast(s)?a("span",{staticClass:"active"},[t._v(t._s(t.showName(e)))]):a("router-link",{attrs:{to:e}},[t._v(t._s(t.showName(e)))])],1)}))},i=[],r={render:s,staticRenderFns:i};e.a=r},526:function(t,e,a){"use strict";var s=a(484),i=a(529),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},527:function(t,e,a){"use strict";var s=a(485),i=a(528),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},528:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav-item-dropdown",{attrs:{right:"","no-caret":""}},[a("template",{slot:"button-content"},[a("small",{staticClass:"d-md-down-none"},[t._v(" 欢迎回来 "+t._s(t.user.lastName)+", "+t._s(t.user.firstName))]),t._v(" "),a("img",{staticClass:"img-avatar",attrs:{src:t.profilePath}})]),t._v(" "),a("b-dropdown-header",{staticClass:"text-center",attrs:{tag:"div"}},[a("strong",[t._v("用户 "+t._s(t.user.userId))])]),t._v(" "),a("b-dropdown-item",{on:{click:t.viewProfile}},[a("i",{staticClass:"fa fa-user"}),t._v(" 个人资料")]),t._v(" "),a("b-dropdown-item",{on:{click:t.logout}},[a("i",{staticClass:"fa fa-power-off"}),t._v(" 登出")])],2)},i=[],r={render:s,staticRenderFns:i};e.a=r},529:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"app-header navbar"},[a("button",{staticClass:"navbar-toggler mobile-sidebar-toggler d-lg-none",attrs:{type:"button"},on:{click:t.mobileSidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),a("b-link",{staticClass:"navbar-brand",attrs:{to:"#"}}),t._v(" "),a("button",{staticClass:"navbar-toggler sidebar-toggler d-md-down-none",attrs:{type:"button"},on:{click:t.sidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),a("b-navbar-nav",{staticClass:"d-md-down-none"},[a("strong",[t._v("教育管理系统 EAS")]),t._v(" "),a("small",{staticClass:"mt-1"},[t._v("  Educational Administration System")])]),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{staticClass:"d-md-down-none"}),t._v(" "),a("b-nav-item",{staticClass:"d-md-down-none"}),t._v(" "),a("b-nav-item",{staticClass:"d-md-down-none",on:{click:t.asideToggle}},[a("i",{staticClass:"icon-envelope"}),t._v(" "),a("b-badge",{attrs:{pill:"",variant:"danger"}},[t._v("*")])],1),t._v(" "),a("HeaderDropdown")],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},530:function(t,e,a){"use strict";function s(t){a(531)}var i=a(486),r=a(555),n=a(21),o=s,l=n(i.a,r.a,!1,o,null,null);e.a=l.exports},531:function(t,e,a){var s=a(532);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(400)("1100bd4e",s,!0)},532:function(t,e,a){e=t.exports=a(399)(!0),e.push([t.i,".nav-link{cursor:pointer}","",{version:3,sources:["C:/Users/linsh/IdeaProjects/pionner_web/src/components/Sidebar.vue"],names:[],mappings:"AACA,UACE,cAAgB,CACjB",file:"Sidebar.vue",sourcesContent:["\n.nav-link {\n  cursor: pointer;\n}\n"],sourceRoot:""}])},533:function(t,e,a){"use strict";var s=a(487),i=a(534),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},534:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},i=[],r={render:s,staticRenderFns:i};e.a=r},535:function(t,e,a){"use strict";var s=a(488),i=a(536),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},536:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},i=[],r={render:s,staticRenderFns:i};e.a=r},537:function(t,e,a){"use strict";var s=a(489),i=a(538),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},538:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},i=[],r={render:s,staticRenderFns:i};e.a=r},539:function(t,e,a){"use strict";var s=a(490),i=a(540),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},540:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"sidebar-minimizer",attrs:{type:"button"},on:{click:function(e){t.sidebarMinimize(),t.brandMinimize()}}})},i=[],r={render:s,staticRenderFns:i};e.a=r},541:function(t,e,a){"use strict";var s=a(491),i=a(546),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},542:function(t,e,a){t.exports={default:a(543),__esModule:!0}},543:function(t,e,a){a(69),a(544),t.exports=a(11).Array.from},544:function(t,e,a){"use strict";var s=a(30),i=a(22),r=a(71),n=a(140),o=a(141),l=a(70),c=a(545),d=a(142);i(i.S+i.F*!a(143)(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,u,m=r(t),v="function"==typeof this?this:Array,p=arguments.length,f=p>1?arguments[1]:void 0,h=void 0!==f,b=0,g=d(m);if(h&&(f=s(f,p>2?arguments[2]:void 0,2)),void 0==g||v==Array&&o(g))for(e=l(m.length),a=new v(e);e>b;b++)c(a,b,h?f(m[b],b):m[b]);else for(u=g.call(m),a=new v;!(i=u.next()).done;b++)c(a,b,h?n(u,f,[i.value,b],!0):i.value);return a.length=b,a}})},545:function(t,e,a){"use strict";var s=a(15),i=a(31);t.exports=function(t,e,a){e in t?s.f(t,e,i(0,a)):t[e]=a}},546:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{class:t.classList})},i=[],r={render:s,staticRenderFns:i};e.a=r},547:function(t,e,a){"use strict";var s=a(492),i=a(548),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},548:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"nav-item nav-dropdown",attrs:{tag:"li",to:t.url,disabled:""}},[a("div",{staticClass:"nav-link nav-dropdown-toggle",on:{click:t.handleClick}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name))]),t._v(" "),a("ul",{staticClass:"nav-dropdown-items"},[t._t("default")],2)])},i=[],r={render:s,staticRenderFns:i};e.a=r},549:function(t,e,a){"use strict";var s=a(493),i=a(550),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},550:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isExternalLink?a("div",[a("a",{class:t.classList,attrs:{href:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)]):a("div",[a("router-link",{class:t.classList,attrs:{to:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},551:function(t,e,a){"use strict";var s=a(494),i=a(552),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},552:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.classList},[t.wrapper&&t.wrapper.element?[a(t.wrapper.element,t._b({tag:"component"},"component",t.wrapper.attributes,!1),[t._v("\n      "+t._s(t.name)+"\n    ")])]:[t._v("\n    "+t._s(t.name)+"\n  ")]],2)},i=[],r={render:s,staticRenderFns:i};e.a=r},553:function(t,e,a){"use strict";var s=a(495),i=a(554),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},554:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{class:t.classList,on:{click:t.hideMobile}},[t._t("default")],2)},i=[],r={render:s,staticRenderFns:i};e.a=r},555:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("SidebarHeader"),t._v(" "),a("SidebarForm"),t._v(" "),a("nav",{staticClass:"sidebar-nav"},[a("div",{attrs:{slot:"header"},slot:"header"}),t._v(" "),a("ul",{staticClass:"nav"},[t._l(t.navItems,function(e,s){return[e.title?[a("SidebarNavTitle",{attrs:{name:e.name,classes:e.class,wrapper:e.wrapper}})]:e.divider?[a("SidebarNavDivider",{attrs:{classes:e.class}})]:[e.children?[a("SidebarNavDropdown",{attrs:{name:e.name,url:e.url,icon:e.icon}},[t._l(e.children,function(s,i){return[s.children?[a("SidebarNavDropdown",{attrs:{name:s.name,url:s.url,icon:s.icon}},t._l(s.children,function(t,s){return a("li",{staticClass:"nav-item"},[a("SidebarNavLink",{attrs:{name:t.name,url:t.url,icon:t.icon,badge:t.badge,variant:e.variant}})],1)}))]:[a("SidebarNavItem",{attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:s.name,url:s.url,icon:s.icon,badge:s.badge,variant:e.variant}})],1)]]})],2)]:[a("SidebarNavItem",{attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:e.name,url:e.url,icon:e.icon,badge:e.badge,variant:e.variant}})],1)]]]})],2),t._v(" "),t._t("default")],2),t._v(" "),a("SidebarFooter"),t._v(" "),a("SidebarMinimizer")],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},556:function(t,e,a){"use strict";var s=a(496),i=a(557),r=a(21),n=r(s.a,i.a,!1,null,null,null);e.a=n.exports},557:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-book"}),t._v(" 课程:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.courseOptions,placeholder:"输入搜索"},on:{search:t.courseList},model:{value:t.course,callback:function(e){t.course=e},expression:"course"}})],1)],1)},i=[],r={render:s,staticRenderFns:i};e.a=r},651:function(t,e,a){"use strict";var s=a(138),i=a.n(s),r=a(521),n=[],o=[{key:"index",label:"序号",class:"text-center"},{key:"operations",label:"操作"},{key:"crn",label:"编号",sortable:!0},{key:"name",label:"课程名",sortable:!0,class:"text-center"},{key:"capacity",label:"容量",sortable:!0},{key:"remain",label:"剩余",sortable:!0},{key:"status",label:"状态",sortable:!0},{key:"date",label:"起止时间",sortable:!0},{key:"time",label:"上课时间",sortable:!0},{key:"day",label:"星期",sortable:!0},{key:"faculty",label:"授课老师",sortable:!0},{key:"actions",label:"查看详情"}];e.a={name:"Choose",components:{FacultySelect:r.d},data:function(){return{pinObject:"",pin:"",pinValidate:!1,showValidate:!0,tol_credits:0,use_credits:0,ava_credits:0,counter:0,crnList:[],failList:[],msg:"",field:o,currentPage:1,perPage:5,totalRows:0,pageOptions:[5,10,15],sortBy:"crn",sortDesc:!1,filter:null,items:n,isBusy:!1,showModal:!1,headerBgVariant:"",faculty:""}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},watch:{faculty:function(){this.initTable()}},mounted:function(){null!==this.pinObject&&""!==this.pinObject&&(this.showValidate=!1,this.pinValidate=!0,this.initStudentInfo())},methods:{passFaculty:function(t){this.faculty=t},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},courseTable:function(t){var e=this;this.isBusy=!0;var a="/course?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.faculty)&&(a+="&facultyId="+this.faculty.value),this.isNotEmpty(this.pinObject)&&(a+="&info="+this.pinObject.info),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",i.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},initTable:function(){this.$refs.courseTable.refresh()},validate:function(){var t=this;this.$validator.validateAll().then(function(e){e&&i.a.get("/pin/"+t.pin).then(function(e){2001===e.data.code&&1==e.data.data.role?(t.pinObject=e.data.data,t.initStudentInfo(),t.pinValidate=!0,t.showValidate=!1):(t.msg="识别码验证失败！  ",t.headerBgVariant="danger",t.showModal=!0)})})},initStudentInfo:function(){var t=this;i.a.get("/student/"+this.pinObject.ownerId+"/available/credit?info="+this.pinObject.info).then(function(e){2001===e.data.code?(t.tol_credits=e.data.data.tol_credits,t.use_credits=e.data.data.use_credits,t.ava_credits=e.data.data.ava_credits,t.initTable(),t.initWorkSheet()):(t.msg=e.data.msg,t.headerBgVariant="danger",t.showModal=!0)})},initWorkSheet:function(){var t=this;i.a.get("/transcript/list?start=0&length=100&studentId="+this.pinObject.studentId+"&info="+this.pinObject.info).then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a];t.addToWorkSheet(s.crn,s.credits,s.cname,s.fname)}})},isAvaCreditsEnough:function(t){return this.tol_credits-this.use_credits-t>=0},isSelectAgain:function(t){for(var e=0;e<this.crnList.length;e++)if(t===this.crnList[e].crn)return!0;return!1},addToWorkSheet:function(t,e,a,s){return this.isAvaCreditsEnough(e)?this.isSelectAgain(t)?(this.msg="不可重复选!",this.headerBgVariant="danger",void(this.showModal=!0)):(this.counter++,this.crnList.push({crn:t,credits:e,name:a,faculty:s}),this.use_credits+=parseInt(e),void(this.ava_credits=this.tol_credits-this.use_credits)):(this.msg="学分不足!",this.headerBgVariant="danger",void(this.showModal=!0))},removeFromWorkSheet:function(t){var e=this.crnList[t].credits;this.use_credits-=parseInt(e),this.ava_credits=this.tol_credits-this.use_credits,this.$delete(this.crnList,t)},reset:function(){this.crnList=[],this.initStudentInfo()},turnIn:function(){var t=this;if(0===this.crnList.length)return this.msg="没有选择任何课程!",this.showModal=!0,void(this.headerBgVariant="danger");i.a.post("/course/choose",this.crnList).then(function(e){t.failList=e.data.data.failList,t.crnList=[],t.initStudentInfo(),0===t.failList.length?(t.msg="全部注册成功！",t.headerBgVariant="success"):(t.msg="课程注册失败！",t.headerBgVariant="danger"),t.showModal=!0})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},760:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{directives:[{name:"show",rawName:"v-show",value:!t.showValidate&&!t.pinValidate,expression:"!showValidate && !pinValidate"}],attrs:{cols:"12"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("选课工作区")])]),t._v(" "),a("h2",{staticClass:"mt-3"},[a("a",{staticStyle:{color:"blue"},attrs:{href:"#"},on:{click:function(e){t.showValidate=!0}}},[t._v("点击这里")]),t._v("输入识别码。\n        ")])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.pinValidate,expression:"pinValidate"}]},[a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("选课工作区")]),t._v(" "),a("small",[t._v("详情")])]),t._v(" "),a("h3",[t._v("你的选课学分信息：")]),t._v(" "),a("div",{staticClass:"bd-example ml-2"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-3"},[t._v("学分上限:")]),t._v(" "),a("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.tol_credits))]),t._v(" "),a("dt",{staticClass:"col-sm-3"},[t._v("已用学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.use_credits))]),t._v(" "),a("dt",{staticClass:"col-sm-3"},[t._v("可用学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.ava_credits))])])]),t._v(" "),a("hr"),t._v(" "),a("h3",[t._v("你的已选课程：")]),t._v(" "),a("b-list-group",t._l(t.crnList,function(e,s){return a("b-list-group-item",{key:e.crn,staticClass:"flex-column align-items-start",staticStyle:{cursor:"default"},attrs:{href:"#"}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v(t._s(e.name))]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("授课老师："+t._s(e.faculty))])]),t._v(" "),a("p",{staticClass:"mb-1"},[t._v("\n                  课程CRN:"+t._s(e.crn)+" "),a("br"),t._v("\n                  课程学分："+t._s(e.credits)+"\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-danger",staticStyle:{width:"150px"},on:{click:function(e){t.removeFromWorkSheet(s)}}},[t._v("删除")])])})),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{attrs:{cols:"6",md:"6"}},[a("b-button",{staticClass:"btn btn-success",staticStyle:{width:"150px"},on:{click:t.turnIn}},[t._v("\n                  提交\n                ")])],1),t._v(" "),a("b-col",{attrs:{cols:"6",md:"6"}},[a("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"150px"},attrs:{id:"reset"},on:{click:t.reset}},[t._v("\n                  重置当前\n                ")])],1)],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"9"}},[a("b-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("新学期课程列表")])]),t._v(" "),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"5"}},[a("FacultySelect",{on:{pass:t.passFaculty}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[a("i",{staticClass:"fa fa-search"})])],1),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"courseTable",attrs:{"show-empty":"",hover:!0,items:t.courseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1,fixed:!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n                  "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n                ")]}},{key:"status",fn:function(e){return[1===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("未开始")]):t._e(),t._v(" "),0===e.value?a("p",{staticStyle:{color:"green"}},[t._v("进行中")]):t._e(),t._v(" "),-1===e.value?a("p",{staticStyle:{color:"red"}},[t._v("已结课")]):t._e()]}},{key:"operations",fn:function(e){return[a("i",{staticClass:"fa fa-plus",staticStyle:{cursor:"pointer","margin-top":"5px",color:"green"},attrs:{title:"添入工作表"},on:{click:function(a){a.stopPropagation(),t.addToWorkSheet(e.item.crn,e.item.credits,e.item.name,e.item.faculty)}}})]}},{key:"actions",fn:function(e){return[a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n                    "+t._s(e.detailsShowing?"隐藏":"展示")+"详情\n                  ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{href:"#",title:"查看课程",disabled:"0"!==e.item.status},on:{click:function(a){t.detail(e.item.id)}}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("课程 "),a("strong",[t._v(t._s(e.item.name))]),t._v(" 的信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("授课老师ID："+t._s(e.item.facultyId))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("课程CRN:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[t._v(t._s(e.item.crn))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程学期:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[t._v(t._s(e.item.info))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[t._v(t._s(e.item.credits))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程等级:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[t._v(t._s(e.item.level))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程班级:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[t._v(t._s(e.item.section))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("上课时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-3"},[t._v(t._s(e.item.startTime)+" to "+t._s(e.item.endTime)+"， 每周 "+t._s(e.item.day)+"\n                            ")]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("上课周期:")]),t._v(" "),a("dd",{staticClass:"col-sm-3"},[t._v(t._s(e.item.startDate)+" to "+t._s(e.item.endDate))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("预选课程:")]),t._v(" "),a("dd",{staticClass:"col-sm-3"},[t._v(t._s(e.item.precrn))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("课程大纲下载:")]),t._v(" "),""!==e.item.courseInfo&&void 0!==e.item.courseInfo&&null!==e.item.courseInfo?a("dd",{staticClass:"col-sm-5"},[a("a",{attrs:{href:"#"},on:{click:function(a){t.download(e.item.crn)}}},[t._v(t._s(JSON.parse(e.item.courseInfo).name))])]):t._e()]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("p",{staticStyle:{color:"red"}},[t._v(t._s(e.item.comment))])])])])])],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至\n                    "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{title:"识别码验证","header-bg-variant":"info",centered:"","hide-footer":"","no-close-on-backdrop":!0,"no-close-on-esc":!0},model:{value:t.showValidate,callback:function(e){t.showValidate=e},expression:"showValidate"}},[a("b-input-group",{staticClass:"mb-6"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],attrs:{href:"#",title:"填写6位数字识别码，识别码请在导师处获取。"}},[t._v("*请输入6位识别码:")])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pin,expression:"pin"},{name:"validate",rawName:"v-validate",value:"required|numeric|min:6|max:6",expression:"'required|numeric|min:6|max:6'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("pin")},attrs:{name:"pin"},domProps:{value:t.pin},on:{input:function(e){e.target.composing||(t.pin=e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("pin"),expression:"errors.has('pin')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("pin")))])]),t._v(" "),a("b-btn",{staticClass:"mt-3",attrs:{variant:"outline-success",block:""},on:{click:t.validate}},[t._v("验证识别码")])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))]),t._v(" "),a("b-list-group",t._l(t.failList,function(e,s){return a("b-list-group-item",{key:e.crn,staticClass:"flex-column align-items-start",staticStyle:{cursor:"default"},attrs:{href:"#"}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("课程注册失败详情")]),t._v(" "),a("small",[t._v(t._s(s+1))])]),t._v(" "),a("p",{staticClass:"mb-1"},[t._v("\n            "+t._s(e)+"\n          ")])])}))],1)])],1)},i=[],r={render:s,staticRenderFns:i};e.a=r}});
//# sourceMappingURL=6.5bfa70f9ef7f5722e691.js.map