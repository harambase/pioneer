webpackJsonp([12],{413:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(660),o=s(772),r=s(21),i=r(a.a,o.a,!1,null,null,null);e.default=i.exports},443:function(t,e,s){"use strict";var a=s(138),o=s.n(a),r=s(448),i=[],c=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名",sortable:!0},{key:"studentId",label:"学生ID",sortable:!0},{key:"sname",label:"学生名",sortable:!0},{key:"grade",label:"学生成绩",sortable:!0},{key:"complete",label:"完成情况",sortable:!0},{key:"credit",label:"获得学分",sortable:!0},{key:"actions",label:"操作"}],l=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名"},{key:"sname",label:"学生名",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-studentInCourseTable",components:{CTranscriptEdit:r.a},props:["mode","crn","cname","credit","studentId"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:"viewStudent"==this.mode?l:c,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:i,showDeleteModal:!1,deleteStudentId:"",deleteCRN:"",basePath:basePath}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.studentInCourseTable.refresh()},studentInCourseTable:function(t){var e=this;this.isBusy=!0;var s="/transcript/course/student?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.crn)&&(s+="&crn="+this.crn),this.isNotEmpty(this.studentId)&&(s+="&studentId="+this.studentId),this.isNotEmpty(t.filter)&&(s+="&search="+t.filter),t.sortDesc?s+="&order=desc":s+="&order=asc",o.a.get(s).then(function(t){var s=t.data.data;return e.totalRows=t.data.recordsTotal,s||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteStudent:function(t,e){this.deleteStudentId=t,this.deleteCRN=e,this.showDeleteModal=!0},removeStuFromCourse:function(){var t=this;o.a.delete("/course/"+this.deleteCRN+"/student/"+this.deleteStudentId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},444:function(t,e,s){"use strict";var a=s(138),o=s.n(a);e.a={name:"c-transcriptEdit",props:["row","mode"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",basePath:basePath}},methods:{updateTranscript:function(t){var e=this;this.$validator.validateAll().then(function(s){s&&o.a.put("/transcript/"+t.id,t).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},447:function(t,e,s){"use strict";var a=s(443),o=s(462),r=s(21),i=r(a.a,o.a,!1,null,null,null);e.a=i.exports},448:function(t,e,s){"use strict";var a=s(444),o=s(461),r=s(21),i=r(a.a,o.a,!1,null,null,null);e.a=i.exports},450:function(t,e,s){"use strict";var a=s(138),o=s.n(a);e.a={name:"c-facultySelect",props:["parentFaculty"],data:function(){return{faculty:"",facultyOptions:[]}},watch:{faculty:function(t){this.$emit("pass",t)},parentFaculty:function(t){this.faculty=this.parentFaculty}},mounted:function(){var t=this;o.a.get("/user/search?status=1&type=f&search=").then(function(e){for(var s=0;s<e.data.data.length;s++){var a=e.data.data[s].lastName+", "+e.data.data[s].firstName,o=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[s].profile)){var r=JSON.parse(e.data.data[s].profile);o=basePath+"/static"+r.path}var i={label:a,value:e.data.data[s].userId,profile:o};t.facultyOptions.push(i)}})},methods:{facultyList:function(t,e){var s=this;e(!0),this.facultyOptions=[],o.a.get("/user/search?type=f&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var a=t.data.data[e].lastName+", "+t.data.data[e].firstName,o="";if(isNotEmpty(t.data.data[e].profile)){var r=JSON.parse(t.data.data[e].profile);o=basePath+"/static"+r.path}var i={label:a,value:t.data.data[e].userId,profile:o};s.facultyOptions.push(i)}}),e(!1)}}}},454:function(t,e,s){"use strict";var a=s(138),o=s.n(a),r=[],i=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID"},{key:"sname",label:"姓名"},{key:"maxCredits",label:"学分上限"},{key:"complete",label:"已完成学分"},{key:"progress",label:"进行中学分"},{key:"incomplete",label:"未完成学分"},{key:"actions",label:"操作"}],c=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID"},{key:"sname",label:"姓名"},{key:"trialPeriod",label:"试读时间"},{key:"tel",label:"电话"},{key:"qq",label:"QQ"},{key:"gender",label:"性别"},{key:"dorm",label:"宿舍"},{key:"actions",label:"操作"}];e.a={name:"c-addStudentTable",props:["mode","crn","cname","credit"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:"info"==this.mode?c:i,currentPage:1,perPage:15,totalRows:0,pageOptions:[15,25,35],sortBy:"student_id",sortDesc:!1,filter:null,items:r,option:{prereq:!1,time:!1,capacity:!1,override:!1},basePath:basePath,showChangeTime:!1,trialPeriod:[]}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{displayDate:function(t){return isNotEmpty(t)?(t=JSON.parse(t),console.log(t[0]),date2Str(new Date(t[0]),"yyyy-MM-dd")+"至"+date2Str(new Date(t[1]),"yyyy-MM-dd")):""},handleOk:function(t){t.preventDefault(),this.$router.go(0)},updateTrailPeriod:function(t,e){var s=this;o.a.post("/student/"+t+"/trial",e).then(function(t){2001===t.data.code?(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="success",s.initTable(),s.showChangeTime=!1):(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="danger")})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.addStudentTable.refresh()},addStudentTable:function(t){var e=this;this.isBusy=!0;var s="/student?start="+t.currentPage+"&status=1&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"studentId":s+="student_id";break;case"maxCredits":s+="max_credits";break;default:s+=t.sortBy}return this.isNotEmpty(t.filter)&&(s+="&search="+t.filter),t.sortDesc?s+="&order=desc":s+="&order=asc",o.a.get(s).then(function(t){var s=t.data.data;return e.totalRows=t.data.recordsTotal,s||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},addStudent2Course:function(t){var e=this;o.a.put("/course/"+this.crn+"/student/"+t,this.option).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},doUpdate:function(t,e){var s=this;this.$validator.validateAll().then(function(a){var r={studentId:t,maxCredits:e};console.log(r),o.a.put("/student/"+t,r).then(function(t){2001===t.data.code?(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="success"):(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="danger")})})}}}},461:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-card",[s("b-list-group",[s("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改成绩",disabled:""}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-1"},[t._v("学生 "),s("strong",[t._v(t._s(t.row.item.sname))]),t._v(" 在 "),s("strong",[t._v(t._s(t.row.item.cname))]),t._v("\n          课程的成绩信息")]),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("课程CRN："+t._s(t.row.item.crn))])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"mr-1"},[s("b-row",[s("b-col",{attrs:{md:"9"}},[s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("学生名:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.sname))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("课程学分:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.credits))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("成绩:")]),t._v(" "),s("dd",{staticClass:"col-sm-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.grade,expression:"row.item.grade"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("grade")},attrs:{placeholder:"可使用Letter Grade或百分制",name:"grade",disabled:"faculty"===t.mode},domProps:{value:t.row.item.grade},on:{input:function(e){e.target.composing||t.$set(t.row.item,"grade",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("grade"),expression:"errors.has('grade')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("grade")))])])]),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("完成情况:")]),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-row",[s("b-col",{attrs:{md:"4"}},[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"complete",name:"complete",value:"1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"1")},on:{change:function(e){t.$set(t.row.item,"complete","1")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"complete"}},[t._v("完成")])])]),t._v(" "),s("b-col",{attrs:{md:"4"}},[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"process",name:"complete",value:"0",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"0")},on:{change:function(e){t.$set(t.row.item,"complete","0")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"process"}},[t._v("正在进行")])])]),t._v(" "),s("b-col",{attrs:{md:"4"}},[s("div",{staticClass:"custom-control custom-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"nComplete",name:"nComplete",value:"-1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"-1")},on:{change:function(e){t.$set(t.row.item,"complete","-1")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"nComplete"}},[t._v("未完成")])])])],1)],1),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("获得学分:")]),t._v(" "),s("dd",{staticClass:"col-sm-4"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|verify_credit:"+t.row.item.credits,expression:"'required|verify_credit:' + row.item.credits + ''"},{name:"model",rawName:"v-model",value:t.row.item.credit,expression:"row.item.credit"}],class:{"form-control":!0,"is-invalid":t.errors.has("credit")},attrs:{type:"text",name:"credit",disabled:"faculty"===t.mode},domProps:{value:t.row.item.credit},on:{input:function(e){e.target.composing||t.$set(t.row.item,"credit",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("credit"),expression:"errors.has('credit')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("credit"))+"\n                ")])])]),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("评语:")]),t._v(" "),s("dd",{staticClass:"col-sm-10"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.item.remark,expression:"row.item.remark"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"7"},domProps:{value:t.row.item.remark},on:{input:function(e){e.target.composing||t.$set(t.row.item,"remark",e.target.value)}}})])]),t._v(" "),"faculty"!==t.mode?s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.updateTranscript(t.row.item,t.row)}}},[t._v("\n                  修改成绩\n                ")]),t._v(" "),s("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  取消修改\n                ")])],1)]):t._e()]),t._v(" "),s("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.row.item.sprofile)?s("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.sprofile).path}}):s("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:"/static/eas/img/logo.png"}})])],1)],1)])],1),t._v(" "),s("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"d-block text-center"},[s("h3",[t._v(t._s(t.msg))])])])],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},462:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},["teach"!=t.mode?s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"1"}},[s("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("b-form-group",[s("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4"}},[s("b-form-group",[s("b-input-group",[s("b-input-group-button",[s("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),s("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),s("b-input-group-button",[s("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1):t._e(),t._v(" "),s("b-table",{ref:"studentInCourseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.studentInCourseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1,small:!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"complete",fn:function(e){return["1"===e.value?s("p",{staticStyle:{color:"green"}},[t._v("完成")]):t._e(),t._v(" "),"0"===e.value?s("p",{staticStyle:{color:"blue"}},[t._v("进行中")]):t._e(),t._v(" "),"-1"===e.value?s("p",{staticStyle:{color:"red"}},[t._v("挂科")]):t._e()]}},{key:"sname",fn:function(e){return[s("b-row",[s("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.sprofile)?s("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.sprofile).path}}):s("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),s("b-col",{staticClass:"mt-1",staticStyle:{"font-size":"11px"},attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return["student"==t.mode?s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(s){s.stopPropagation(),t.showDeleteStudent(e.item.studentId,e.item.crn)}}},[t._v("\n        移除该学生\n      ")]):t._e(),t._v(" "),"transcript"==t.mode?s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        修改成绩\n      ")]):t._e(),t._v(" "),"faculty"==t.mode?s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        学生学分和成绩查看\n      ")]):t._e(),t._v(" "),"teach"==t.mode||"viewStudent"==t.mode?s("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"}},[t._v("\n        发送信息\n      ")]):t._e()]}},{key:"row-details",fn:function(e){return[s("CTranscriptEdit",{attrs:{row:e,mode:t.mode}})]}}])}),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),s("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"d-block text-center"},[s("h4",[t._v(t._s(t.msg))])])]),t._v(" "),s("b-modal",{attrs:{size:"sm","header-bg-variant":"danger","ok-title":"确认",centered:"",title:"不可逆操作警告！"},on:{ok:t.removeStuFromCourse},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[s("div",{staticClass:"d-block text-center"},[s("h4",[t._v("确认删除该学生？")])])])],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},476:function(t,e,s){"use strict";var a=s(450),o=s(477),r=s(21),i=r(a.a,o.a,!1,null,null,null);e.a=i.exports},477:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-form-group",[s("b-input-group",[s("b-input-group-button",[s("b-button",{attrs:{disabled:""}},[t._v("教师")])],1),t._v(" "),s("v-select",{attrs:{filterable:!1,options:t.facultyOptions,placeholder:"输入搜索"},on:{search:t.facultyList},scopedSlots:t._u([{key:"option",fn:function(e){return[s("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.faculty,callback:function(e){t.faculty=e},expression:"faculty"}})],1)],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},481:function(t,e,s){t.exports={default:s(482),__esModule:!0}},482:function(t,e,s){var a=s(11),o=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},502:function(t,e,s){"use strict";var a=s(454),o=s(503),r=s(21),i=r(a.a,o.a,!1,null,null,null);e.a=i.exports},503:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"1"}},[s("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("b-form-group",[s("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"4"}},[s("b-form-group",[s("b-input-group",[s("b-input-group-button",[s("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),s("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),s("b-input-group-button",[s("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),s("b-table",{ref:"addStudentTable",attrs:{"show-empty":"",stacked:"sm",small:!0,striped:!0,fixed:!0,hover:!0,items:t.addStudentTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"studentId",fn:function(e){return[s("b-row",[s("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?s("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):s("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),s("b-col",{staticClass:"mt-1",staticStyle:{"font-size":"11px"},attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"trialPeriod",fn:function(e){return[s("p",[t._v(t._s(t.displayDate(e.item.trialPeriod)))])]}},{key:"actions",fn:function(e){return[s("b-nav",{attrs:{pills:""}},[s("b-nav-item-dropdown",{attrs:{text:"操作"}},["credit"===t.mode?s("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[s("i",{staticClass:"fa fa-pen",staticStyle:{color:"red"},attrs:{title:"修改学分上限"}}),t._v("修改学分上限\n          ")]):t._e(),t._v(" "),"student"===t.mode?s("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[s("i",{staticClass:"fa fa-envelope",staticStyle:{color:"red"},attrs:{title:"添加该学生"}}),t._v("添加该学生\n          ")]):t._e(),t._v(" "),s("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[s("i",{staticClass:"fa fa-pencil",staticStyle:{color:"red"},attrs:{title:"修改学生信息"}}),t._v("修改学生信息\n          ")])],1)],1)]}},{key:"row-details",fn:function(e){return["credit"===t.mode?s("b-card",[s("b-list-group",[s("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑学分",disabled:""}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-1"},[t._v("学生 "),s("strong",[t._v(t._s(e.item.sname))]),t._v(" 的学分完成情况")]),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"mr-1"},[s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("学分上限:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.item.maxCredits,expression:"row.item.maxCredits"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("maxCredits")},attrs:{id:"maxCredits",name:"maxCredits"},domProps:{value:e.item.maxCredits},on:{input:function(s){s.target.composing||t.$set(e.item,"maxCredits",s.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("maxCredits"),expression:"errors.has('maxCredits')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("maxCredits"))+"\n                  ")])]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("已完成学分:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.complete))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("进行中学分:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.progress))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("未完成学分:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.incomplete))])]),t._v(" "),s("hr"),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(s){s.stopPropagation(),t.doUpdate(e.item.studentId,e.item.maxCredits)}}},[t._v("\n                    提交\n                  ")])],1)])])])],1)],1):t._e(),t._v(" "),"student"===t.mode?s("b-card",[s("b-list-group",[s("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"添加该学生",disabled:""}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-1"},[t._v("添加学生 "),s("strong",[t._v(t._s(e.item.sname))]),t._v(" 进入 "),s("strong",[t._v(t._s(t.cname))]),t._v(" 课程")]),t._v(" "),s("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"mr-1"},[s("h5",{staticClass:"mb-1"},[t._v("添加选项:")]),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，无视任何冲突:")]),t._v(" "),s("dd",{staticClass:"col-sm-1"},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.option.override,expression:"option.override"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"override",name:"type"},domProps:{checked:Array.isArray(t.option.override)?t._i(t.option.override,"s")>-1:t.option.override},on:{change:function(e){var s=t.option.override,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"s");a.checked?r<0&&t.$set(t.option,"override",s.concat(["s"])):r>-1&&t.$set(t.option,"override",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.option,"override",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"override"}},[t._v("是")])])]),t._v(" "),s("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使未完成预选课程:")]),t._v(" "),s("dd",{staticClass:"col-sm-1"},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.option.prereq,expression:"option.prereq"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"prereq",name:"type"},domProps:{checked:Array.isArray(t.option.prereq)?t._i(t.option.prereq,"s")>-1:t.option.prereq},on:{change:function(e){var s=t.option.prereq,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"s");a.checked?r<0&&t.$set(t.option,"prereq",s.concat(["s"])):r>-1&&t.$set(t.option,"prereq",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.option,"prereq",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"prereq"}},[t._v("是")])])]),t._v(" "),s("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使有时间冲突:")]),t._v(" "),s("dd",{staticClass:"col-sm-1"},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.option.time,expression:"option.time"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"time",name:"type"},domProps:{checked:Array.isArray(t.option.time)?t._i(t.option.time,"s")>-1:t.option.time},on:{change:function(e){var s=t.option.time,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"s");a.checked?r<0&&t.$set(t.option,"time",s.concat(["s"])):r>-1&&t.$set(t.option,"time",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.option,"time",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"time"}},[t._v("是")])])]),t._v(" "),s("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使已经达到课程人数上限:")]),t._v(" "),s("dd",{staticClass:"col-sm-1"},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.option.capacity,expression:"option.capacity"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"capacity",name:"type"},domProps:{checked:Array.isArray(t.option.capacity)?t._i(t.option.capacity,"s")>-1:t.option.capacity},on:{change:function(e){var s=t.option.capacity,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"s");a.checked?r<0&&t.$set(t.option,"capacity",s.concat(["s"])):r>-1&&t.$set(t.option,"capacity",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.option,"capacity",o)}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"capacity"}},[t._v("是")])])])]),t._v(" "),s("hr"),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(s){s.stopPropagation(),t.addStudent2Course(e.item.studentId)}}},[t._v("\n                    添加\n                  ")])],1)])])])],1)],1):t._e(),t._v(" "),"info"===t.mode?s("b-card",[s("b-list-group",[s("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改学生信息",disabled:""}},[s("div",{staticClass:"d-flex w-100 justify-content-between"},[s("h5",{staticClass:"mb-1"},[t._v("学生 "),s("strong",[t._v(t._s(e.item.sname))]),t._v(" 的基本信息\n                "),s("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])])]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"mr-1"},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"9"}},[s("div",{staticClass:"mr-1"},[s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("QQ:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.qq))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("电话:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.tel))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("微信:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.weChat))])]),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("性别:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.gender))]),t._v(" "),s("dt",{staticClass:"col-sm-1"},[t._v("宿舍:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.dorm))])]),t._v(" "),s("p",[t._v("暂不支持修改以上信息")]),t._v(" "),s("hr"),t._v(" "),s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("试读时间:")]),t._v(" "),s("dd",{staticClass:"col-sm-2"},[t._v("\n                        "+t._s(t.displayDate(e.item.trialPeriod))+"\n                      ")])]),t._v(" "),t.showChangeTime?t._e():s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(e){e.stopPropagation(),t.showChangeTime=!0}}},[t._v("\n                          修改试读时间\n                        ")])],1)]),t._v(" "),t.showChangeTime?s("dl",{staticClass:"row"},[s("dt",{staticClass:"col-sm-3"},[s("el-date-picker",{staticClass:"form-control",attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.trialPeriod,callback:function(e){t.trialPeriod=e},expression:"trialPeriod"}})],1),t._v(" "),s("dd",{staticClass:"col-sm-5"},[s("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(s){s.stopPropagation(),t.updateTrailPeriod(e.item.studentId,t.trialPeriod)}}},[t._v("\n                          修改试读时间\n                        ")])],1)]):t._e()])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?s("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):s("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static/img/logo.png"}})])],1)],1)])],1)],1):t._e()]}}])}),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),s("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"d-block text-center"},[s("h4",[t._v(t._s(t.msg))])])])],1)},o=[],r={render:a,staticRenderFns:o};e.a=r},660:function(t,e,s){"use strict";var a=s(481),o=s.n(a),r=s(138),i=s.n(r),c=s(502),l=s(447),n=s(476);e.a={name:"ViewCourse",components:{CFacultySelect:n.a,CStudentInCourseTable:l.a,CAddStudentTable:c.a},data:function(){return{pageMode:this.$route.fullPath.split("&")[0].split("=")[1],id:this.$route.fullPath.split("&")[1].split("=")[1],url:this.$route.fullPath,info:{year:"2018",semester:"01"},course:{crn:"",info:"",name:"",credits:"",level:"",section:"",startDate:"",endDate:"",startTime:"",endTime:"",capacity:"",classroom:"",comment:"",day:"",precrn:"",facultyId:"",courseInfo:""},tempCourse:{id:"",crn:"",status:"0",createTime:"",updateTime:"",operatorId:"",facultyId:"",courseJson:""},courseTime:[],courseDate:[],courseDay:[],showDocument:!1,confirm:!1,courseOptions:[],msg:"",showModal:!1,headerBgVariant:"",faculty:"",preList:"",goToUrl:"",showUpload:!1}},mounted:function(){var t=this;if(i.a.get("/course/search").then(function(e){for(var s=0;s<e.data.data.length;s++){var a={label:e.data.data[s].name,value:e.data.data[s].crn};t.courseOptions.push(a)}}),isNotEmpty(this.id))switch(this.pageMode){case"manage":this.showCourseDetail(this.id);break;case"transcript":this.showStudentDetail(this.id);break;case"student":break;default:this.initRequest(this.id)}},methods:{goTo:function(){isNotEmpty(this.goToUrl)&&this.$router.push({path:this.goToUrl})},backToTempCourseTable:function(){"create"===this.pageMode?this.$router.push({path:"/teach/request?mode=manage"}):this.$router.push({path:"/course/new/request?mode=faculty"})},initRequest:function(t){var e=this;isNotEmpty(t)&&i.a.get("/request/course/"+t).then(function(t){e.tempCourse=t.data.data,e.course=JSON.parse(t.data.data.courseJson),e.showUpload=!0,e.initCourseExtend()})},initCourseExtend:function(){var t=this,e=this.course.info.split("-");this.info.year=e[0],this.info.semester=e[1],this.courseDay=this.course.day.split("/"),this.courseDate=[new Date(this.course.startDate),new Date(this.course.endDate)],this.courseTime=[new Date(2018,8,3,parseInt(this.course.startTime.split(":")[0]),parseInt(this.course.startTime.split(":")[1])),new Date(2018,8,3,parseInt(this.course.endTime.split(":")[0]),parseInt(this.course.endTime.split(":")[1]))],isNotEmpty(this.course.courseInfo)&&(this.course.courseInfo=JSON.parse(this.course.courseInfo),this.showDocument=!0);for(var s=this.course.precrn.split("/"),a=0;a<s.length;a++)isNotEmpty(s[a])&&i.a.get("/course/"+s[a]).then(function(e){t.preList=[],t.preList.push({label:e.data.data.name,value:e.data.data.crn})});i.a.get("/user/"+this.course.facultyId).then(function(e){var s=e.data.data.lastName+", "+e.data.data.firstName,a="/static/img/logo.png";if(isNotEmpty(e.data.data.profile)){var o=JSON.parse(e.data.data.profile);a=basePath+"/static"+o.path}t.faculty={label:s,value:e.data.data.userId,profile:a}}),this.facultyId=this.course.facultyId},showCourseDetail:function(t){var e=this;isNotEmpty(t)&&i.a.get("/course/"+t).then(function(t){e.course=t.data.data,e.initCourseExtend()})},showStudentDetail:function(t,e){this.transcript.crn=t,this.transcript.credits=e},preCourseList:function(t,e){var s=this;e(!0),this.courseOptions=[],i.a.get("/course/search?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var a={label:t.data.data[e].name,value:t.data.data[e].crn};s.courseOptions.push(a)}}),e(!1)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},prepare:function(){var t="",e="";if(isNotEmpty(this.courseDay))for(var s=0;s<this.courseDay.length;s++)isNotEmpty(this.courseDay[s])&&(t+=this.courseDay[s]+"/");if(isNotEmpty(this.preList))for(var a=0;a<this.preList.length;a++)isNotEmpty(this.preList[a])&&(e+=this.preList[a].value+"/");this.course.day=t,this.course.precrn=e,this.course.info=this.info.year+"-"+this.info.semester,this.course.startDate=date2Str(this.courseDate[0],"yyyy-MM-dd"),this.course.endDate=date2Str(this.courseDate[1],"yyyy-MM-dd"),isNotEmpty(this.courseTime)?(this.course.startTime=date2Str(this.courseTime[0],"hh:mm:ss"),this.course.endTime=date2Str(this.courseTime[1],"hh:mm:ss")):(this.course.startTime="",this.course.endTime=""),this.course.facultyId=this.faculty.value,isNotEmpty(this.course.courseInfo)&&(this.course.courseInfo=o()(this.course.courseInfo))},showTable:function(){this.$router.push({path:"/teach/curriculum?mode=manage"})},tempCourseCreate:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),i.a.post("/request/course/register",t.course).then(function(e){if(2001===e.data.code){t.msg="申请成功，等待教务答复!",t.showModal=!0,t.headerBgVariant="success";var s=e.data.data.id;t.documentUpload(s),t.goToUrl="/course/new/request?mode=faculty"}else t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger"}))})},tempCourseUpdate:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),t.tempCourse.courseJson=o()(t.course),i.a.put("/request/course/"+t.id,t.tempCourse).then(function(e){2001===e.data.code?(t.msg="修改成功，请等待答复!",t.showModal=!0,t.headerBgVariant="success",t.goToUrl="/course/new/request?mode=faculty"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},tempCourseApprove:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),t.tempCourse.status="1",t.tempCourse.courseJson=o()(t.course),t.update(t.id,t.tempCourse))})},tempCourseDecline:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(isNotEmpty(t.course.comment)?(t.tempCourse.status="-1",t.tempCourse.courseJson=o()(t.course),t.update(t.id,t.tempCourse)):(t.msg="必须填写备注！",t.showModal=!0,t.headerBgVariant="danger"))})},courseUpdate:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),i.a.put("/course/"+t.course.crn,t.course).then(function(e){2001===e.data.code?(t.msg="更新成功！",t.showModal=!0,t.headerBgVariant="success",t.goToUrl="/teach/curriculum?mode=manage"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},update:function(t,e){var s=this;i.a.put("/request/course/"+t,e).then(function(t){2001===t.data.code?(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="success",s.goToUrl="/teach/request?mode=manage"):(s.msg=t.data.msg,s.showModal=!0,s.headerBgVariant="danger")})},documentUpload:function(t){var e=this;if(isNotEmpty(document.getElementById("document").files[0])){var s=new FormData;s.append("file",document.getElementById("document").files[0]);var a=void 0;"manage"===this.pageMode?a="/course/info/"+this.course.crn:"create"!==this.pageMode&&"request"!==this.pageMode||(a=this.showUpload?"/request/course/info/"+this.id:"/request/course/info/"+t),i.a.put(a,s).then(function(t){2001===t.data.code?(e.showDocument=!0,e.showUpload&&(e.course.courseInfo=t.data.data,e.msg=t.data.msg,e.headerBgVariant="success",e.showModal=!0)):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})}},documentDownload:function(){"create"==this.pageMode||"request"==this.pageMode?window.open(basePath+"/request/course/info/"+this.id+"?token="+window.localStorage.getItem("access_token")):window.open(basePath+"/course/info/"+this.course.crn+"?token="+window.localStorage.getItem("access_token"))},passFaculty:function(t){this.faculty=t}}}},772:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animated fadeIn"},["student"===t.pageMode?s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("b-button",{staticClass:"btn btn-primary btn-info",on:{click:t.showTable}},[s("i",{staticClass:"fa fa-arrow-left"}),t._v(" 返回列表\n          ")]),t._v(" "),s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("课程中学生详情")])],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("学生列表")])]),t._v(" "),s("CStudentInCourseTable",{attrs:{crn:t.id,mode:t.pageMode}})],1)],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("添加学生")])]),t._v(" "),s("CAddStudentTable",{attrs:{mode:"addStudent",crn:t.id,mode:t.pageMode}})],1)],1)],1):t._e(),t._v(" "),"request"===t.pageMode||"create"===t.pageMode||"manage"===t.pageMode?s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},["create"===t.pageMode&&""!==t.id?s("b-button",{staticClass:"btn btn-primary btn-info",on:{click:t.backToTempCourseTable}},[s("i",{staticClass:"fa fa-arrow-left"}),t._v(" 返回列表\n          ")]):t._e(),t._v(" "),"request"===t.pageMode&&""!==t.id?s("b-button",{staticClass:"btn btn-primary btn-info",on:{click:t.backToTempCourseTable}},[s("i",{staticClass:"fa fa-arrow-left"}),t._v(" 返回列表\n          ")]):t._e(),t._v(" "),"manage"===t.pageMode?s("b-button",{staticClass:"btn btn-primary btn-info",on:{click:t.showTable}},[s("i",{staticClass:"fa fa-arrow-left"}),t._v(" 返回列表\n          ")]):t._e(),t._v(" "),s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("课程基本信息表")])],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("学期信息")])]),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*年份-学期(YYYY-XX):")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%",float:"left"},attrs:{id:"year",name:"info",disabled:"0"!==t.tempCourse.status,plain:!0,options:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},model:{value:t.info.year,callback:function(e){t.$set(t.info,"year",e)},expression:"info.year"}}),t._v(" "),s("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%"},attrs:{id:"info",name:"info",disabled:"0"!==t.tempCourse.status,plain:!0,options:[{text:"春季课程",value:"01"},{text:"秋季课程",value:"02"},{text:"夏季课程",value:"03"}]},model:{value:t.info.semester,callback:function(e){t.$set(t.info,"semester",e)},expression:"info.semester"}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("info"),expression:"errors.has('info')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])],1)],1)],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("课程基本信息")])]),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*课程名:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1|max:20",expression:"'required|min:1|max:20'"},{name:"model",rawName:"v-model",value:t.course.name,expression:"course.name"}],class:{"form-control":!0,"is-invalid":t.errors.has("name")},attrs:{name:"name",disabled:"0"!==t.tempCourse.status},domProps:{value:t.course.name},on:{input:function(e){e.target.composing||t.$set(t.course,"name",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("name")))])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*等级:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.level,expression:"course.level"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("level")},attrs:{type:"radio",value:"100",id:"intro",disabled:"0"!==t.tempCourse.status,name:"level"},domProps:{checked:t._q(t.course.level,"100")},on:{change:function(e){t.$set(t.course,"level","100")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"intro"}},[t._v("普及级")])]),t._v(" "),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.level,expression:"course.level"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("level")},attrs:{type:"radio",value:"200",id:"median",disabled:"0"!==t.tempCourse.status,name:"level"},domProps:{checked:t._q(t.course.level,"200")},on:{change:function(e){t.$set(t.course,"level","200")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"median"}},[t._v("进阶级")])]),t._v(" "),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.level,expression:"course.level"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("level")},attrs:{type:"radio",value:"300",id:"advance",disabled:"0"!==t.tempCourse.status,name:"level"},domProps:{checked:t._q(t.course.level,"300")},on:{change:function(e){t.$set(t.course,"level","300")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"advance"}},[t._v("高级")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("level"),expression:"errors.has('level')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("level")))])])],1),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*类型:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.section,expression:"course.section"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("section")},attrs:{type:"radio",value:"课程",id:"course",disabled:"0"!==t.tempCourse.status,name:"section"},domProps:{checked:t._q(t.course.section,"课程")},on:{change:function(e){t.$set(t.course,"section","课程")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"course"}},[t._v("课程")])]),t._v(" "),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.section,expression:"course.section"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("section")},attrs:{type:"radio",value:"预约课程",id:"app",disabled:"0"!==t.tempCourse.status,name:"section"},domProps:{checked:t._q(t.course.section,"预约课程")},on:{change:function(e){t.$set(t.course,"section","预约课程")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"app"}},[t._v("预约课程")])]),t._v(" "),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.section,expression:"course.section"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("section")},attrs:{type:"radio",value:"项目",id:"project",disabled:"0"!==t.tempCourse.status,name:"section"},domProps:{checked:t._q(t.course.section,"项目")},on:{change:function(e){t.$set(t.course,"section","项目")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"project"}},[t._v("项目")])]),t._v(" "),s("div",{staticClass:"custom-control custom-radio custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.section,expression:"course.section"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("section")},attrs:{type:"radio",value:"兴趣小组",id:"curious",disabled:"0"!==t.tempCourse.status,name:"section"},domProps:{checked:t._q(t.course.section,"兴趣小组")},on:{change:function(e){t.$set(t.course,"section","兴趣小组")}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"curious"}},[t._v("兴趣小组")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("section"),expression:"errors.has('section')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("section")))])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*学分:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|numeric|min:1|max:1",expression:"'required|numeric|min:1|max:1'"},{name:"model",rawName:"v-model",value:t.course.credits,expression:"course.credits"}],class:{"form-control":!0,"is-invalid":t.errors.has("credits")},attrs:{placeholder:"请输入0到4之间的整数数字",name:"credits",disabled:"0"!==t.tempCourse.status},domProps:{value:t.course.credits},on:{input:function(e){e.target.composing||t.$set(t.course,"credits",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("credits"),expression:"errors.has('credits')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("credits")))])])],1),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*容量:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.course.capacity,expression:"course.capacity"},{name:"validate",rawName:"v-validate",value:"required|numeric|min:1|max:2",expression:"'required|numeric|min:1|max:2'"}],class:{"form-control":!0,"is-invalid":t.errors.has("capacity")},attrs:{isDigits:"true",required:"",name:"capacity",disabled:"0"!==t.tempCourse.status},domProps:{value:t.course.capacity},on:{input:function(e){e.target.composing||t.$set(t.course,"capacity",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("capacity"),expression:"errors.has('capacity')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("capacity")))])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("教室:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"max:20",expression:"'max:20'"},{name:"model",rawName:"v-model",value:t.course.classroom,expression:"course.classroom"}],class:{"form-control":!0,"is-invalid":t.errors.has("classroom")},attrs:{name:"classroom",disabled:"0"!==t.tempCourse.status},domProps:{value:t.course.classroom},on:{input:function(e){e.target.composing||t.$set(t.course,"classroom",e.target.value)}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("classroom"),expression:"errors.has('classroom')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("classroom")))])])],1),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*周期:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("el-date-picker",{staticClass:"form-control",staticStyle:{height:"34px",width:"100%",padding:"5px 12px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini",disabled:"0"!==t.tempCourse.status},model:{value:t.courseDate,callback:function(e){t.courseDate=e},expression:"courseDate"}})],1),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("时间:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("el-time-picker",{staticClass:"form-control",staticStyle:{height:"34px",width:"100%",padding:"5px 12px"},attrs:{"is-range":"","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围",size:"mini",disabled:"0"!==t.tempCourse.status,"picker-options":{start:"08:30",step:"00:15",end:"18:30"}},model:{value:t.courseTime,callback:function(e){t.courseTime=e},expression:"courseTime"}})],1)],1),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("选择上课日:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"8"}},[s("b-form-checkbox-group",{attrs:{id:"basicInlineCustomCheckboxes"}},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"m",id:"m",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"m")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"m");a.checked?r<0&&(t.courseDay=s.concat(["m"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"m"}},[t._v("星期一")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"t",id:"t",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"t")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"t");a.checked?r<0&&(t.courseDay=s.concat(["t"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"t"}},[t._v("星期二")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"w",id:"w",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"w")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"w");a.checked?r<0&&(t.courseDay=s.concat(["w"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"w"}},[t._v("星期三")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"tr",id:"tr",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"tr")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"tr");a.checked?r<0&&(t.courseDay=s.concat(["tr"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"tr"}},[t._v("星期四")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"f",id:"f",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"f")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"f");a.checked?r<0&&(t.courseDay=s.concat(["f"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"f"}},[t._v("星期五")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"sa",id:"sa",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"sa")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"sa");a.checked?r<0&&(t.courseDay=s.concat(["sa"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"sa"}},[t._v("星期六")])]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.courseDay,expression:"courseDay"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"s",name:"day",disabled:"0"!==t.tempCourse.status},domProps:{checked:Array.isArray(t.courseDay)?t._i(t.courseDay,"s")>-1:t.courseDay},on:{change:function(e){var s=t.courseDay,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,"s");a.checked?r<0&&(t.courseDay=s.concat(["s"])):r>-1&&(t.courseDay=s.slice(0,r).concat(s.slice(r+1)))}else t.courseDay=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"s"}},[t._v("星期日")])])])],1)],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("*为必填！ 注意，如果上课时间不是重复时间段，请再创建一个新课程，命名为 XX课程\n            第二时段，并且学分填写为0学分。")])])],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},["create"===t.pageMode||"manage"===t.pageMode?s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("教师与预修课分配")])]):t._e(),t._v(" "),"request"===t.pageMode?s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("预修课分配")])]):t._e(),t._v(" "),s("b-row",[s("b-col",{attrs:{md:"2"}},[s("label",{staticClass:"control-label"},[t._v("*分配教师:")])]),t._v(" "),s("b-col",{attrs:{md:"3"}},[s("CFacultySelect",{attrs:{parentFaculty:t.faculty},on:{pass:t.passFaculty}})],1),t._v(" "),s("b-col",{attrs:{md:"2"}},[s("label",{staticClass:"control-label"},[t._v("预修课程（可多选，可不选）:")])]),t._v(" "),s("b-col",{attrs:{md:"3"}},[s("v-select",{attrs:{filterable:!1,options:t.courseOptions,multiple:"",disabled:"0"!==t.tempCourse.status},on:{search:t.preCourseList},model:{value:t.preList,callback:function(e){t.preList=e},expression:"preList"}})],1)],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("对于一节课有多个老师的话，请在此处仅填写主要的负责老师，并在备注中写出参与课程的老师名字。")])])],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("更多信息")])]),t._v(" "),t.showDocument?t._e():s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("上传课程大纲:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("input",{attrs:{type:"file",id:"document",disabled:"0"!==t.tempCourse.status}})]),t._v(" "),"manage"==t.pageMode||t.showUpload?s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("b-button",{staticClass:"btn btn-info my-1",staticStyle:{width:"100%"},on:{click:t.documentUpload}},[t._v("\n                上传\n              ")])],1):t._e(),t._v(" "),!t.showDocument&&t.isNotEmpty(t.course.courseInfo)?s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("b-button",{staticClass:"btn btn-success",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!0}}},[t._v("\n                取消替换\n              ")])],1):t._e()],1),t._v(" "),t.showDocument?s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("课程大纲:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"6"}},[s("b-row",[s("b-col",{attrs:{md:"6"}},[t._v("\n                  点击下载-> "),s("a",{staticStyle:{cursor:"pointer"},attrs:{href:"#"},on:{click:t.documentDownload}},[t._v(t._s(t.course.courseInfo.name))])]),t._v(" "),s("b-col",{attrs:{md:"3"}},[s("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!1}}},[t._v("\n                    替换\n                  ")])],1)],1)],1)],1):t._e(),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"2"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("备注信息:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"10"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.course.comment,expression:"course.comment"}],class:{"form-control":!0},staticStyle:{resize:"none"},attrs:{rows:"3",disabled:"0"!==t.tempCourse.status},domProps:{value:t.course.comment},on:{input:function(e){e.target.composing||t.$set(t.course,"comment",e.target.value)}}})])],1)],1),t._v(" "),s("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("i",{attrs:{className:"fa fa-align-justify"}}),s("strong",[t._v("确认上述信息")])]),t._v(" "),s("b-row",[s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("*上述信息正确无误:")])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"3"}},[s("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[s("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("confirm")},attrs:{type:"checkbox",id:"confirm",name:"confirm"},domProps:{checked:Array.isArray(t.confirm)?t._i(t.confirm,null)>-1:t.confirm},on:{change:function(e){var s=t.confirm,a=e.target,o=!!a.checked;if(Array.isArray(s)){var r=t._i(s,null);a.checked?r<0&&(t.confirm=s.concat([null])):r>-1&&(t.confirm=s.slice(0,r).concat(s.slice(r+1)))}else t.confirm=o}}}),t._v(" "),s("label",{staticClass:"custom-control-label",attrs:{for:"confirm"}},[t._v("确认")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("confirm"),expression:"errors.has('confirm')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("confirm")))])])]),t._v(" "),s("b-col",{staticClass:"my-1",attrs:{md:"1"}},[s("label",{staticClass:"col-sm-12 control-label"},[t._v("操作:")])]),t._v(" "),s("b-col",{attrs:{md:"3"}},["manage"===t.pageMode?s("b-button",{staticClass:"btn btn-success",staticStyle:{width:"150px"},on:{click:t.courseUpdate}},[t._v("修改课程\n              ")]):t._e(),t._v(" "),"create"===t.pageMode&&""!==t.id?s("b-button",{staticClass:"btn btn-success",staticStyle:{width:"150px"},attrs:{disabled:"0"!==t.tempCourse.status},on:{click:t.tempCourseApprove}},[t._v("批准申请\n              ")]):t._e(),t._v(" "),"create"===t.pageMode&&""!==t.id?s("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"150px"},attrs:{disabled:"0"!==t.tempCourse.status},on:{click:t.tempCourseDecline}},[t._v("拒绝申请\n              ")]):t._e(),t._v(" "),"request"===t.pageMode&&""===t.id?s("b-button",{staticClass:"btn btn-success",staticStyle:{"margin-left":"32%",width:"150px"},on:{click:t.tempCourseCreate}},[t._v(" 提交申请\n              ")]):t._e(),t._v(" "),"request"===t.pageMode&&""!==t.id&&"0"===t.tempCourse.status?s("b-button",{staticClass:"btn btn-success",staticStyle:{"margin-left":"32%",width:"150px"},on:{click:t.tempCourseUpdate}},[t._v("修改申请\n              ")]):t._e()],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),s("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.goTo},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[s("div",{staticClass:"d-block text-center"},[s("h4",[t._v(t._s(t.msg))])])])],1)},o=[],r={render:a,staticRenderFns:o};e.a=r}});
//# sourceMappingURL=12.8d987ca67a3908c53ba0.js.map