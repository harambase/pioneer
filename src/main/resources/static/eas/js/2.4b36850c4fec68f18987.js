webpackJsonp([2],{416:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(664),r=a(777),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.default=o.exports},438:function(t,e,a){"use strict";var s=a(451),r=a(478),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},439:function(t,e,a){"use strict";var s=a(441),r=a(458),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},440:function(t,e,a){"use strict";var s=a(442),r=a(459),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},441:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-infoSelect",data:function(){return{info:"",infoOptions:[]}},mounted:function(){var t=this;r.a.get("/course/info?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].split("-"),r="";switch(s[1]){case"01":r="-春季";break;case"02":case"03":r="-秋季"}var i={label:s[0]+r,value:e.data.data[a]};t.infoOptions.push(i)}})},watch:{info:function(t){this.$emit("pass",t)}},methods:{infoList:function(t,e){var a=this;e(!0),this.infoOptions=[],r.a.get("/course/info?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.infoOptions.push(s)}}),e(!1)}}}},442:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:"",studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var i=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:e.data.data[a].userId};t.studentOptions.push(o)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],r.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var i=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:t.data.data[e].userId};a.studentOptions.push(o)}}),e(!1)}}}},443:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(448),o=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名",sortable:!0},{key:"studentId",label:"学生ID",sortable:!0},{key:"sname",label:"学生名",sortable:!0},{key:"grade",label:"学生成绩",sortable:!0},{key:"complete",label:"完成情况",sortable:!0},{key:"credit",label:"获得学分",sortable:!0},{key:"actions",label:"操作"}],l=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名"},{key:"sname",label:"学生名",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-studentInCourseTable",components:{CTranscriptEdit:i.a},props:["mode","crn","cname","credit","studentId"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:"viewStudent"==this.mode?l:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:o,showDeleteModal:!1,deleteStudentId:"",deleteCRN:"",basePath:basePath}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.studentInCourseTable.refresh()},studentInCourseTable:function(t){var e=this;this.isBusy=!0;var a="/transcript/course/student?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.crn)&&(a+="&crn="+this.crn),this.isNotEmpty(this.studentId)&&(a+="&studentId="+this.studentId),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteStudent:function(t,e){this.deleteStudentId=t,this.deleteCRN=e,this.showDeleteModal=!0},removeStuFromCourse:function(){var t=this;r.a.delete("/course/"+this.deleteCRN+"/student/"+this.deleteStudentId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},444:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-transcriptEdit",props:["row","mode"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",basePath:basePath}},methods:{updateTranscript:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&r.a.put("/transcript/"+t.id,t).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},447:function(t,e,a){"use strict";var s=a(443),r=a(462),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},448:function(t,e,a){"use strict";var s=a(444),r=a(461),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},449:function(t,e,a){"use strict";e.__esModule=!0;var s=a(545),r=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},450:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-facultySelect",props:["parentFaculty"],data:function(){return{faculty:"",facultyOptions:[]}},watch:{faculty:function(t){this.$emit("pass",t)},parentFaculty:function(t){this.faculty=this.parentFaculty}},mounted:function(){var t=this;r.a.get("/user/search?status=1&type=f&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var i=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+i.path}var o={label:s,value:e.data.data[a].userId,profile:r};t.facultyOptions.push(o)}})},methods:{facultyList:function(t,e){var a=this;e(!0),this.facultyOptions=[],r.a.get("/user/search?type=f&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r="";if(isNotEmpty(t.data.data[e].profile)){var i=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+i.path}var o={label:s,value:t.data.data[e].userId,profile:r};a.facultyOptions.push(o)}}),e(!1)}}}},451:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-advisorSelect",data:function(){return{advisor:"",advisorOptions:[]}},watch:{advisor:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?status=1&type=f&role=7&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var i=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+i.path}var o={label:s,value:e.data.data[a].userId,profile:r};t.advisorOptions.push(o)}})},methods:{advisorList:function(t,e){var a=this;e(!0),this.advisorOptions=[],r.a.get("/user/search?type=f&role=7&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r="";if(isNotEmpty(t.data.data[e].profile)){var i=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+i.path}var o={label:s,value:t.data.data[e].userId,profile:r};a.advisorOptions.push(o)}}),e(!1)}}}},452:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(440),o=a(438),n=a(439),l=a(447),c=[],d=[{key:"index",label:"序号",class:"text-center"},{key:"sname",label:"学生姓名"},{key:"fname",label:"教师姓名"},{key:"status",label:"状态"},{key:"updateTime",label:"更新时间"},{key:"oname",label:"操作人"},{key:"actions",label:"操作"}];e.a={name:"c-adviseTable",components:{CStudentInCourseTable:l.a,CInfoSelect:n.a,CNewAdvisorSelect:o.a,CAdvisorSelect:o.a,CStudentSelect:i.a},props:["showAdvisor","fromAdvisor","mode"],data:function(){return{field:d,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"id",sortDesc:!1,filter:null,items:c,info:"",showDeleteModal:!1,showModal:!1,advise:"",advisor:"",msg:"",headerBgVariant:"",student:"",newAdvisor:""}},mounted:function(){isNotEmpty(this.fromAdvisor)&&(this.advisor={value:this.fromAdvisor.userId,label:this.fromAdvisor.name})},watch:{info:function(){this.initTable()},student:function(){this.initTable()},advisor:function(){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passAdvisor:function(t){this.advisor=t},passNewAdvisor:function(t){this.newAdvisor=t},passStudent:function(t){this.student=t},passInfo:function(t){this.info=t},initTable:function(){this.$refs.adviseTable.refresh()},adviseTable:function(t){var e=this;this.isBusy=!0;var a="/advise?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.advisor)&&(a+="&facultyId="+this.advisor.value),this.isNotEmpty(this.mode)&&(a+="&mode="+this.mode),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advise=t,this.showDeleteModal=!0},updateOne:function(t){var e=this;t.facultyId=this.newAdvisor.value,r.a.put("/advise/"+t.id,t).then(function(t){2001===t.data.code?(e.msg="更新成功！",e.showModal=!0,e.headerBgVariant="success",e.initTable()):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},deleteOne:function(){var t=this;r.a.delete("/advise/"+this.advise.id).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},downloadTranscript:function(t){window.open(basePath+"/transcript/report/"+t+"?token="+window.localStorage.getItem("access_token"))}}}},454:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=[],o=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID"},{key:"sname",label:"姓名"},{key:"maxCredits",label:"学分上限"},{key:"complete",label:"已完成学分"},{key:"progress",label:"进行中学分"},{key:"incomplete",label:"未完成学分"},{key:"actions",label:"操作"}],n=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID"},{key:"sname",label:"姓名"},{key:"trialPeriod",label:"试读时间"},{key:"tel",label:"电话"},{key:"qq",label:"QQ"},{key:"gender",label:"性别"},{key:"dorm",label:"宿舍"},{key:"actions",label:"操作"}];e.a={name:"c-addStudentTable",props:["mode","crn","cname","credit"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:"info"==this.mode?n:o,currentPage:1,perPage:15,totalRows:0,pageOptions:[15,25,35],sortBy:"student_id",sortDesc:!1,filter:null,items:i,option:{prereq:!1,time:!1,capacity:!1,override:!1},basePath:basePath,showChangeTime:!1,trialPeriod:[]}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{displayDate:function(t){return isNotEmpty(t)?(t=JSON.parse(t),console.log(t[0]),date2Str(new Date(t[0]),"yyyy-MM-dd")+"至"+date2Str(new Date(t[1]),"yyyy-MM-dd")):""},handleOk:function(t){t.preventDefault(),this.$router.go(0)},updateTrailPeriod:function(t,e){var a=this;r.a.post("/student/"+t+"/trial",e).then(function(t){2001===t.data.code?(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="success",a.initTable(),a.showChangeTime=!1):(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="danger")})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.addStudentTable.refresh()},addStudentTable:function(t){var e=this;this.isBusy=!0;var a="/student?start="+t.currentPage+"&status=1&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"studentId":a+="student_id";break;case"maxCredits":a+="max_credits";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},addStudent2Course:function(t){var e=this;r.a.put("/course/"+this.crn+"/student/"+t,this.option).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},doUpdate:function(t,e){var a=this;this.$validator.validateAll().then(function(s){var i={studentId:t,maxCredits:e};console.log(i),r.a.put("/student/"+t,i).then(function(t){2001===t.data.code?(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="success"):(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="danger")})})}}}},455:function(t,e,a){"use strict";var s=a(452),r=a(479),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},458:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("学期")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,placeholder:"输入搜索",options:t.infoOptions},on:{search:t.infoList},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},459:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("学生")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索"},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},460:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-userSelect",props:["mode","passUser"],data:function(){return{user:"",userOptions:[]}},watch:{user:function(t){this.$emit("pass",t)},passUser:function(t){this.user=t}},mounted:function(){var t=this;r.a.get("/user/search?status=1&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var i=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:e.data.data[a].userId};t.userOptions.push(o)}})},methods:{userList:function(t,e){var a=this;e(!0),this.userOptions=[],r.a.get("/user/search?status=1&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var i=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:t.data.data[e].userId};a.userOptions.push(o)}}),e(!1)}}}},461:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改成绩",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(t.row.item.sname))]),t._v(" 在 "),a("strong",[t._v(t._s(t.row.item.cname))]),t._v("\n          课程的成绩信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("课程CRN："+t._s(t.row.item.crn))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{attrs:{md:"9"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("学生名:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.sname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.credits))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("成绩:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.grade,expression:"row.item.grade"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("grade")},attrs:{placeholder:"可使用Letter Grade或百分制",name:"grade",disabled:"faculty"===t.mode},domProps:{value:t.row.item.grade},on:{input:function(e){e.target.composing||t.$set(t.row.item,"grade",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("grade"),expression:"errors.has('grade')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("grade")))])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("完成情况:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-row",[a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"complete",name:"complete",value:"1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"1")},on:{change:function(e){t.$set(t.row.item,"complete","1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"complete"}},[t._v("完成")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"process",name:"complete",value:"0",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"0")},on:{change:function(e){t.$set(t.row.item,"complete","0")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"process"}},[t._v("正在进行")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"nComplete",name:"nComplete",value:"-1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"-1")},on:{change:function(e){t.$set(t.row.item,"complete","-1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"nComplete"}},[t._v("未完成")])])])],1)],1),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("获得学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|verify_credit:"+t.row.item.credits,expression:"'required|verify_credit:' + row.item.credits + ''"},{name:"model",rawName:"v-model",value:t.row.item.credit,expression:"row.item.credit"}],class:{"form-control":!0,"is-invalid":t.errors.has("credit")},attrs:{type:"text",name:"credit",disabled:"faculty"===t.mode},domProps:{value:t.row.item.credit},on:{input:function(e){e.target.composing||t.$set(t.row.item,"credit",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("credit"),expression:"errors.has('credit')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("credit"))+"\n                ")])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("评语:")]),t._v(" "),a("dd",{staticClass:"col-sm-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.item.remark,expression:"row.item.remark"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"7"},domProps:{value:t.row.item.remark},on:{input:function(e){e.target.composing||t.$set(t.row.item,"remark",e.target.value)}}})])]),t._v(" "),"faculty"!==t.mode?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.updateTranscript(t.row.item,t.row)}}},[t._v("\n                  修改成绩\n                ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  取消修改\n                ")])],1)]):t._e()]),t._v(" "),a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.row.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:"/static/eas/img/logo.png"}})])],1)],1)])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},462:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},["teach"!=t.mode?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1):t._e(),t._v(" "),a("b-table",{ref:"studentInCourseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.studentInCourseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1,small:!0},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"complete",fn:function(e){return["1"===e.value?a("p",{staticStyle:{color:"green"}},[t._v("完成")]):t._e(),t._v(" "),"0"===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("进行中")]):t._e(),t._v(" "),"-1"===e.value?a("p",{staticStyle:{color:"red"}},[t._v("挂科")]):t._e()]}},{key:"sname",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{staticClass:"mt-1",staticStyle:{"font-size":"11px"},attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return["student"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteStudent(e.item.studentId,e.item.crn)}}},[t._v("\n        移除该学生\n      ")]):t._e(),t._v(" "),"transcript"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        修改成绩\n      ")]):t._e(),t._v(" "),"faculty"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        学生学分和成绩查看\n      ")]):t._e(),t._v(" "),"teach"==t.mode||"viewStudent"==t.mode?a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"}},[t._v("\n        发送信息\n      ")]):t._e()]}},{key:"row-details",fn:function(e){return[a("CTranscriptEdit",{attrs:{row:e,mode:t.mode}})]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger","ok-title":"确认",centered:"",title:"不可逆操作警告！"},on:{ok:t.removeStuFromCourse},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v("确认删除该学生？")])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},463:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(455),o=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"userId",label:"导师信息",sortable:!0},{key:"name",label:"姓名",sortable:!0},{key:"numStudent",label:"当前辅导学生数",sortable:!0,class:"text-center"},{key:"actions",label:"操作"}];e.a={name:"c-advisorTable",components:{CAdviseTable:i.a},props:["mode"],data:function(){return{field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"userId",sortDesc:!1,filter:null,items:o,info:"",showDeleteModal:!1,showModal:!1,advisor:"",msg:"",headerBgVariant:"",basePath:basePath}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{choose:function(t){this.$emit("pass",t)},initTable:function(){this.$refs.advisorTable.refresh()},advisorTable:function(t){var e=this;this.isBusy=!0;var a="/advise/advisor?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"userId":a+="user_id";break;case"name":a+="last_name";break;case"numStudent":a+="num_Student";break;case"updateTime":a+="update_time";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advisor=t,this.showDeleteModal=!0},deleteOne:function(){var t=this;r.a.delete("/advise/advisor/"+this.advisor.userId).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},464:function(t,e,a){"use strict";var s=a(460),r=a(504),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},466:function(t,e,a){"use strict";e.a={name:"c-footer"}},467:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:[],studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var i=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:e.data.data[a].userId};t.studentOptions.push(o)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],r.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var i=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+i.path}var o={label:s,profile:r,value:t.data.data[e].userId};a.studentOptions.push(o)}}),e(!1)}}}},468:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-pinSelect",data:function(){return{pin:{label:"---选择识别码---",value:""},pinOptions:[{label:"---选择识别码---",value:""}]}},mounted:function(){var t=this;r.a.get("/pin?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s={label:e.data.data[a],value:e.data.data[a]};t.pinOptions.push(s)}})},watch:{pin:function(t){this.$emit("pass",t)}},methods:{pinList:function(t,e){var a=this;e(!0),this.pinOptions=[],r.a.get("/pin?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.pinOptions.push(s)}}),e(!1)}}}},469:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(455),o=a(440),n=a(438),l=a(439),c=[],d=[{key:"index",label:"序号",class:"text-center"},{key:"stuName",label:"学生名",sortable:!0},{key:"fname",label:"第一选择",sortable:!0},{key:"sname",label:"第二选择",sortable:!0},{key:"tname",label:"第三选择",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-requestAdviseTable",components:{CAdviseTable:i.a,CInfoSelect:l.a,CAdvisorSelect:n.a,CStudentSelect:o.a},props:["mode"],watch:{activeName:function(t){switch(t){case"first":this.status="";break;case"second":this.status="0";break;case"third":this.status="1";break;case"fourth":this.status="-1"}this.initTable()},info:function(){this.initTable()},student:function(){this.initTable()},advisor:function(){this.initTable()}},data:function(){return{activeName:"second",field:d,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:c,info:"",showDeleteModal:!1,showModal:!1,delAdvisor:"",msg:"",headerBgVariant:"",basePath:basePath,student:"",advisor:"",status:"0"}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passAdvisor:function(t){this.advisor=t},passStudent:function(t){this.student=t},passInfo:function(t){this.info=t},choose:function(t,e){var a=this;t.status="1",r.a.put("/request/advise/"+t.id+"/"+e,t).then(function(t){2001===t.data.code?(a.msg="选择成功！",a.showModal=!0,a.headerBgVariant="success",a.initTable()):(a.msg=t.data.msg,a.showModal=!0,a.headerBgVariant="danger")})},initTable:function(){this.$refs.tempAdviseTable.refresh()},tempAdviseTable:function(t){var e=this;this.isBusy=!0;var a="/request/advise?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"stuName":a+="stu_name";break;case"fname":a+="f_name";break;case"sname":a+="s_name";break;case"oname":a+="o_name";break;default:a+=t.sortBy}return this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.advisor)&&(a+="&facultyId="+this.advisor.value),this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.status)&&(a+="&viewStatus="+this.status),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.delAdvisor=t,this.showDeleteModal=!0},deleteOne:function(){var t=this;r.a.delete("/request/advise/"+this.delAdvisor.id).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},470:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(480),o=[],n=[{key:"actions",label:""},{key:"sender",label:"发件人"},{key:"subject",label:"主题"},{key:"date",label:"发件时间"}];e.a={name:"c-messageTable",props:["mode","info","id"],components:{CMessageDetail:i.a},data:function(){return{field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"date",sortDesc:!0,filter:null,items:o,info:"",showDeleteModal:!1,showModal:!1,advisor:"",msg:"",headerBgVariant:"",basePath:basePath,box:"inbox"}},watch:{mode:function(t){switch(t){case"first":this.box="inbox";break;case"second":this.box="important";break;case"third":this.box="urgent";break;case"fourth":this.box="trash";break;case"fifth":this.box="sent"}this.initTable()},id:function(t){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{showDetail:function(t){this.$router.push({path:"/message?id="+t.id})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.messageTable.refresh()},messageTable:function(t){var e=this;this.isBusy=!0;var a="/message/list?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),this.isNotEmpty(this.box)&&(a+="&box="+this.box),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;if(e.totalRows=t.data.recordsTotal,isNotEmpty(e.id))for(var s=0;s<a.length;s++)if(e.id==a[s].id){a[s]._showDetails=!0,a[s]._rowVariant="danger";var r=a[0];a[0]=a[s],a[s]=r;break}return a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},471:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-messageDetail",props:["row","info"],data:function(){return{msg:"",showModal:!1,showDeleteModal:!1,headerBgVariant:"",basePath:basePath,deleteId:""}},mounted:function(){var t=this;this.info.unread--,"重要"==this.row.item.labels&&this.info.important--,"紧急"==this.row.item.labels&&this.info.urgent--,this.row.item.status="read",r.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},methods:{showDeleteMessage:function(t){this.deleteId=t,this.showDeleteModal=!0},deleteMessage:function(){var t=this;r.a.delete("/message/"+this.deleteId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.$router.go(0)):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},markAsRead:function(){var t=this;this.info.unread--,"重要"==this.row.item.labels&&this.info.important--,"紧急"==this.row.item.labels&&this.info.urgent--,this.row.item.status="read",r.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},markAsUnread:function(){var t=this;this.info.unread++,"重要"==this.row.item.labels&&this.info.important++,"紧急"==this.row.item.labels&&this.info.urgent++,this.row.item.status="unread",r.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},moveToInbox:function(){var t=this;this.row.item.status="read",r.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){t.$router.go(0),2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},moveToTrash:function(){var t=this;this.row.item.status="trashed",r.a.put("/message/"+this.row.item.id,this.row.item).then(function(e){t.$router.go(0),2001!==e.data.code&&(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},472:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(473),o=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"contractId",label:"合同编号",sortable:!0},{key:"oname",label:"所属人名",sortable:!0},{key:"ownerId",label:"所属人ID",sortable:!0},{key:"type",label:"合同类型",sortable:!0},{key:"status",label:"合同状态",sortable:!0},{key:"opname",label:"录入人",sortable:!0},{key:"createTime",label:"录入时间",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-contractTable",components:{CContractForm:i.a},data:function(){return{msg:"",showModal:!1,showDeleteModal:!1,headerBgVariant:"",field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],typeOptions:["劳动合同","入学协议","志愿者服务协议"],sortBy:"owner_id",sortDesc:!1,filter:null,items:o,status:"",basePath:basePath,deleteContractId:"",showDetail:!0,type:"劳动合同"}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},watch:{type:function(){this.initTable()}},methods:{documentDownload:function(t){window.open(basePath+"/contract/info/"+t+"?token="+window.localStorage.getItem("access_token"))},showDeleteContract:function(t){this.showDeleteModal=!0,this.deleteContractId=t},deleteContract:function(){var t=this;r.a.delete("/contract/"+this.deleteContractId).then(function(e){2001===e.data.code?(t.msg="删除成功!",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},contractDetail:function(){this.showDetail=!1},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.contractTable.refresh()},contractTable:function(t){var e=this;this.isBusy=!0;var a="/contract?start="+t.currentPage+"&length="+t.perPage+"&type="+this.type+"&orderCol=";switch(t.sortBy){case"contractId":a+="contract_id";break;case"ownerId":a+="owner_id";break;case"firstName":a+="first_name";break;case"createTime":a+="create_time";break;case"initDate":a+="init_date";break;case"expireDate":a+="expire_date";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},473:function(t,e,a){"use strict";var s=a(474),r=a(520),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},474:function(t,e,a){"use strict";var s=a(481),r=a.n(s),i=a(138),o=a.n(i),n=a(464);e.a={name:"c-contractForm",components:{CUserSelect:n.a},props:["id"],data:function(){return{url:this.$route.fullPath,info:{year:"2018",semester:"01"},contract:{id:"",contractId:"",ownerId:"",oname:"",info:"",type:"",expireDate:"",initDate:"",operatorId:"",contractInfo:"",comment:""},contractRange:[],showDocument:!1,msg:"",showModal:!1,headerBgVariant:"",goToUrl:"",user:"",confirm:!1,showUpload:!1}},watch:{id:function(t){isNotEmpty(t)&&this.init()}},mounted:function(){isNotEmpty(this.id)&&this.init()},methods:{documentDownload:function(){window.open(basePath+"/contract/info/"+this.contract.id+"?token="+window.localStorage.getItem("access_token"))},init:function(){var t=this;this.showUpload=!0,o.a.get("/contract/"+this.id).then(function(e){t.contract=e.data.data;var a=t.contract.info.split("-");t.info.year=a[0],t.info.semester=a[1],t.contractRange=[new Date(t.contract.initDate),new Date(t.contract.expireDate)],isNotEmpty(t.contract.contractInfo)?(t.contract.contractInfo=JSON.parse(t.contract.contractInfo),t.showDocument=!0):t.showDocument=!1,isNotEmpty(t.contract.ownerId)?o.a.get("/user/"+t.contract.ownerId).then(function(e){var a=e.data.data.lastName+", "+e.data.data.firstName,s="/static/img/logo.png";if(isNotEmpty(e.data.data.profile)){var r=JSON.parse(e.data.data.profile);s=basePath+"/static"+r.path}t.user={label:a,value:e.data.data.userId,profile:s}}):t.user=""})},passUser:function(t){this.user=t},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},prepare:function(){this.contract.initDate=date2Str(this.contractRange[0],"yyyy-MM-dd"),this.contract.expireDate=date2Str(this.contractRange[1],"yyyy-MM-dd"),this.contract.info=this.info.year+"-"+this.info.semester,this.contract.ownerId=this.user.value},create:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),o.a.post("/contract",t.contract).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.contract=e.data.data,t.documentUpload()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},update:function(){var t=this;this.$validator.validateAll().then(function(e){e&&(t.prepare(),t.contract.contractInfo=r()(t.contract.contractInfo),o.a.put("/contract/"+t.id,t.contract).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.headerBgVariant="success",t.showModal=!0):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")}))})},documentUpload:function(){var t=this;if(isNotEmpty(document.getElementById("document").files[0])){var e=new FormData;e.append("file",document.getElementById("document").files[0]),o.a.put("/contract/info/"+this.contract.id,e).then(function(e){2001===e.data.code?(t.showDocument=!0,t.showUpload&&(t.contract.contractInfo=e.data.data,t.msg=e.data.msg,t.headerBgVariant="success",t.showModal=!0)):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}}},476:function(t,e,a){"use strict";var s=a(450),r=a(477),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},477:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("教师")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.facultyOptions,placeholder:"输入搜索"},on:{search:t.facultyList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.faculty,callback:function(e){t.faculty=e},expression:"faculty"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},478:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("导师")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.advisorOptions,placeholder:"输入搜索"},on:{search:t.advisorList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.advisor,callback:function(e){t.advisor=e},expression:"advisor"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},479:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CStudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[1==t.showAdvisor?a("CAdvisorSelect",{on:{pass:t.passAdvisor}}):t._e()],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-1"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"adviseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.adviseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"actions",fn:function(e){return["faculty"===t.mode?a("div",[a("b-btn",{staticClass:"btn btn-info",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          课程和成绩查看\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.downloadTranscript(e.item.studentId)}}},[t._v("\n          成绩单下载\n        ")])],1):a("div",[a("b-btn",{staticClass:"btn btn-danger",staticStyle:{width:"50%"},attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          删除辅导关系\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-info",staticStyle:{width:"45%"},attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          修改辅导关系\n        ")])],1)]}},{key:"row-details",fn:function(e){return["faculty"===t.mode?a("div",[a("CStudentInCourseTable",{attrs:{mode:"faculty",studentId:e.item.studentId}})],1):a("div",[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑用户",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("修改当前辅导关系")]),t._v(" "),a("small",{staticClass:"text-danger"},[t._v("注意：只可以修改导师！")])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"12"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("请分配新导师:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("CNewAdvisorSelect",{on:{pass:t.passNewAdvisor}})],1),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticStyle:{width:"150px"},attrs:{size:"sm",variant:"success"},on:{click:function(a){a.stopPropagation(),t.updateOne(e.item)}}},[t._v("\n                          提交\n                        ")])],1)])])])],1)],1)],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该辅导关系？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},480:function(t,e,a){"use strict";var s=a(471),r=a(517),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},481:function(t,e,a){t.exports={default:a(482),__esModule:!0}},482:function(t,e,a){var s=a(11),r=s.JSON||(s.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},487:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-aside",data:function(){return{items:[],basePath:basePath}},mounted:function(){var t=this;r.a.get("/message/list?start=1&length=9&orderCol=date&box=inbox&order=desc").then(function(e){t.items=e.data.data})},methods:{isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},goTo:function(t,e){this.$delete(this.items,e),this.$router.push({path:"/message?id="+t})}}}},488:function(t,e,a){"use strict";e.a={props:{list:{type:Array,required:!0,default:function(){return[]}}},methods:{isLast:function(t){return t===this.list.length-1},showName:function(t){return t.meta&&t.meta.label&&(t=t.meta&&t.meta.label),t.name&&(t=t.name),t}}}},489:function(t,e,a){"use strict";var s=a(530),r=a(138),i=a.n(r);e.a={name:"c-header",components:{HeaderDropdown:s.a},data:function(){return{unread:0}},mounted:function(){var t=this;i.a.get("/message/count?status=unread&box=inbox").then(function(e){t.unread=e.data.data})},methods:{sidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-hidden")},sidebarMinimize:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-minimized")},mobileSidebarToggle:function(t){t.preventDefault(),document.body.classList.toggle("sidebar-mobile-show")},asideToggle:function(t){t.preventDefault(),document.body.classList.toggle("aside-menu-hidden")}}}},490:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(139),o=a.n(i);e.a={name:"header-dropdown",data:function(){return{user:"",profile:"",itemsCount:42,profilePath:""}},mounted:function(){var t=this,e=o()(window.localStorage.getItem("access_token"));r.a.get("/user/"+e.sub).then(function(e){t.user=e.data.data,isNotEmpty(t.user.profile)&&(t.profile=JSON.parse(t.user.profile),t.profilePath=basePath+"/static"+t.profile.path)})},methods:{logout:function(){window.localStorage.clear(),this.$router.push({path:"/"})},viewProfile:function(){this.$router.push({path:"/profile"})}}}},491:function(t,e,a){"use strict";var s=a(536),r=a(538),i=a(540),o=a(542),n=a(544),l=a(550),c=a(552),d=a(554),u=a(556);e.a={name:"sidebar",props:{navItems:{type:Array,required:!0,default:function(){return[]}}},components:{SidebarFooter:s.a,SidebarForm:r.a,SidebarHeader:i.a,SidebarMinimizer:o.a,SidebarNavDivider:n.a,SidebarNavDropdown:l.a,SidebarNavLink:c.a,SidebarNavTitle:d.a,SidebarNavItem:u.a},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}}},492:function(t,e,a){"use strict";e.a={name:"sidebar-footer"}},493:function(t,e,a){"use strict";e.a={name:"sidebar-form"}},494:function(t,e,a){"use strict";e.a={name:"sidebar-header"}},495:function(t,e,a){"use strict";e.a={name:"sidebar-minimizer",methods:{sidebarMinimize:function(){document.body.classList.toggle("sidebar-minimized")},brandMinimize:function(){document.body.classList.toggle("brand-minimized")}}}},496:function(t,e,a){"use strict";var s=a(449),r=a.n(s);e.a={name:"sidebar-nav-divider",props:{classes:{type:String,default:""}},computed:{classList:function(){return["divider"].concat(r()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}}},497:function(t,e,a){"use strict";e.a={props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""}},methods:{handleClick:function(t){t.preventDefault(),t.target.parentElement.classList.toggle("open")}}}},498:function(t,e,a){"use strict";var s=a(449),r=a.n(s);e.a={name:"sidebar-nav-link",props:{name:{type:String,default:""},url:{type:String,default:""},icon:{type:String,default:""},badge:{type:Object,default:function(){}},variant:{type:String,default:""},classes:{type:String,default:""}},computed:{classList:function(){return["nav-link",this.linkVariant].concat(r()(this.itemClasses))},linkVariant:function(){return this.variant?"nav-link-"+this.variant:""},itemClasses:function(){return this.classes?this.classes.split(" "):[]},isExternalLink:function(){return"http"===this.url.substring(0,4)}}}},499:function(t,e,a){"use strict";var s=a(449),r=a.n(s);e.a={props:{name:{type:String,default:""},classes:{type:String,default:""},wrapper:{type:Object,default:function(){}}},computed:{classList:function(){return["nav-title"].concat(r()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}}}},500:function(t,e,a){"use strict";var s=a(449),r=a.n(s);e.a={name:"sidebar-nav-item",props:{classes:{type:String,default:""}},computed:{classList:function(){return["nav-item"].concat(r()(this.itemClasses))},itemClasses:function(){return this.classes?this.classes.split(" "):""}},methods:{hideMobile:function(){document.body.classList.contains("sidebar-mobile-show")&&document.body.classList.toggle("sidebar-mobile-show")}}}},501:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-courseSelect",props:["info"],data:function(){return{course:"",courseOptions:[]}},watch:{course:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/course/search?info="+this.info.value+"&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s={label:e.data.data[a].name,value:e.data.data[a].crn};t.courseOptions.push(s)}})},methods:{courseList:function(t,e){var a=this;e(!0),this.courseOptions=[],r.a.get("/course/search?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e].name,value:t.data.data[e].crn};a.courseOptions.push(s)}}),e(!1)}}}},502:function(t,e,a){"use strict";var s=a(454),r=a(503),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},503:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"addStudentTable",attrs:{"show-empty":"",stacked:"sm",small:!0,striped:!0,fixed:!0,hover:!0,items:t.addStudentTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"studentId",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{staticClass:"mt-1",staticStyle:{"font-size":"11px"},attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"trialPeriod",fn:function(e){return[a("p",[t._v(t._s(t.displayDate(e.item.trialPeriod)))])]}},{key:"actions",fn:function(e){return[a("b-nav",{attrs:{pills:""}},[a("b-nav-item-dropdown",{attrs:{text:"操作"}},["credit"===t.mode?a("b-dropdown-item",{on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[a("i",{staticClass:"fa fa-pen",staticStyle:{color:"red"},attrs:{title:"修改学分上限"}}),t._v("修改学分上限\n          ")]):t._e(),t._v(" "),"student"===t.mode?a("b-dropdown-item",{on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[a("i",{staticClass:"fa fa-envelope",staticStyle:{color:"red"},attrs:{title:"添加该学生"}}),t._v("添加该学生\n          ")]):t._e(),t._v(" "),a("b-dropdown-item",{on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[a("i",{staticClass:"fa fa-pencil",staticStyle:{color:"red"},attrs:{title:"修改学生信息"}}),t._v("修改学生信息\n          ")])],1)],1)]}},{key:"row-details",fn:function(e){return["credit"===t.mode?a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑学分",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(e.item.sname))]),t._v(" 的学分完成情况")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("学分上限:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.maxCredits,expression:"row.item.maxCredits"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("maxCredits")},attrs:{id:"maxCredits",name:"maxCredits"},domProps:{value:e.item.maxCredits},on:{input:function(a){a.target.composing||t.$set(e.item,"maxCredits",a.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("maxCredits"),expression:"errors.has('maxCredits')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("maxCredits"))+"\n                  ")])]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("已完成学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.complete))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("进行中学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.progress))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("未完成学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.incomplete))])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.doUpdate(e.item.studentId,e.item.maxCredits)}}},[t._v("\n                    提交\n                  ")])],1)])])])],1)],1):t._e(),t._v(" "),"student"===t.mode?a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"添加该学生",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("添加学生 "),a("strong",[t._v(t._s(e.item.sname))]),t._v(" 进入 "),a("strong",[t._v(t._s(t.cname))]),t._v(" 课程")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("h5",{staticClass:"mb-1"},[t._v("添加选项:")]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，无视任何冲突:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.override,expression:"option.override"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"override",name:"type"},domProps:{checked:Array.isArray(t.option.override)?t._i(t.option.override,"s")>-1:t.option.override},on:{change:function(e){var a=t.option.override,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,"s");s.checked?i<0&&(t.option.override=a.concat(["s"])):i>-1&&(t.option.override=a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.option,"override",r)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"override"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使未完成预选课程:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.prereq,expression:"option.prereq"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"prereq",name:"type"},domProps:{checked:Array.isArray(t.option.prereq)?t._i(t.option.prereq,"s")>-1:t.option.prereq},on:{change:function(e){var a=t.option.prereq,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,"s");s.checked?i<0&&(t.option.prereq=a.concat(["s"])):i>-1&&(t.option.prereq=a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.option,"prereq",r)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"prereq"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使有时间冲突:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.time,expression:"option.time"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"time",name:"type"},domProps:{checked:Array.isArray(t.option.time)?t._i(t.option.time,"s")>-1:t.option.time},on:{change:function(e){var a=t.option.time,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,"s");s.checked?i<0&&(t.option.time=a.concat(["s"])):i>-1&&(t.option.time=a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.option,"time",r)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"time"}},[t._v("是")])])]),t._v(" "),a("dt",{staticClass:"col-sm-2"},[t._v("添加此学生，即使已经达到课程人数上限:")]),t._v(" "),a("dd",{staticClass:"col-sm-1"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.option.capacity,expression:"option.capacity"}],staticClass:"custom-control-input",attrs:{type:"checkbox",value:"s",id:"capacity",name:"type"},domProps:{checked:Array.isArray(t.option.capacity)?t._i(t.option.capacity,"s")>-1:t.option.capacity},on:{change:function(e){var a=t.option.capacity,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,"s");s.checked?i<0&&(t.option.capacity=a.concat(["s"])):i>-1&&(t.option.capacity=a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.option,"capacity",r)}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"capacity"}},[t._v("是")])])])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.addStudent2Course(e.item.studentId)}}},[t._v("\n                    添加\n                  ")])],1)])])])],1)],1):t._e(),t._v(" "),"info"===t.mode?a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改学生信息",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(e.item.sname))]),t._v(" 的基本信息\n                "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"9"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("QQ:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.qq))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("电话:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.tel))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("微信:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.weChat))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("性别:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.gender))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("宿舍:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.dorm))])]),t._v(" "),a("p",[t._v("暂不支持修改以上信息")]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("试读时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v("\n                        "+t._s(t.displayDate(e.item.trialPeriod))+"\n                      ")])]),t._v(" "),t.showChangeTime?t._e():a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(e){e.stopPropagation(),t.showChangeTime=!0}}},[t._v("\n                          修改试读时间\n                        ")])],1)]),t._v(" "),t.showChangeTime?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-3"},[a("el-date-picker",{staticClass:"form-control",attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.trialPeriod,callback:function(e){t.trialPeriod=e},expression:"trialPeriod"}})],1),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.updateTrailPeriod(e.item.studentId,t.trialPeriod)}}},[t._v("\n                          修改试读时间\n                        ")])],1)]):t._e()])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static/img/logo.png"}})])],1)],1)])],1)],1):t._e()]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},504:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("用户")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.userOptions},on:{search:t.userList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},505:function(t,e,a){"use strict";var s=a(463),r=a(506),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},506:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"advisorTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.advisorTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"userId",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return["choose"!==t.mode?a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          取消导师资格\n        ")]),t._v(" "),a("b-button",{staticClass:"btn btn-primary",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          查看辅导学生\n        ")])],1):a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.choose(e.item)}}},[t._v("\n          选择该导师\n        ")])],1)]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start"},[a("CAdviseTable",{ref:"CAdviseTable",attrs:{showAdvisor:"0",fromAdvisor:t.item}})],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认取消"+t._s(t.advisor.name)+"的导师资格？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},508:function(t,e,a){"use strict";var s=a(466),r=a(509),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},509:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"app-footer"},[a("span",[t._v("Harambase Copyright © 2018 - Version V1.0.20180918 All Rights Reserved.")]),t._v(" "),a("span",{staticClass:"ml-auto"},[t._v("Powered by "),a("a",{attrs:{href:"https://harambase.github.io/"}},[t._v("Harambase Development Team")])])])}],i={render:s,staticRenderFns:r};e.a=i},510:function(t,e,a){"use strict";var s=a(467),r=a(511),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},511:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("学生")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索",multiple:""},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},512:function(t,e,a){"use strict";var s=a(468),r=a(513),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},513:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("识别码")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.pinOptions},on:{search:t.pinList},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},514:function(t,e,a){"use strict";var s=a(469),r=a(515),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},515:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"查看所有申请",name:"first"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看申请中",name:"second"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看已批准",name:"third"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"只查看已拒绝",name:"fourth"}}),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("辅导关系申请")]),t._v(" "),a("small",[t._v("分类查看")])]),t._v(" "),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CStudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CAdvisorSelect",{on:{pass:t.passAdvisor}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-1"},[t._v("\n                  搜索：\n                ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"tempAdviseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.tempAdviseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n          "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n        ")]}},{key:"stuName",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.stuprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.stuprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n              "+t._s(e.value)+"\n            ")])],1)]}},{key:"fname",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.fprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.fprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n              "+t._s(e.value)+"\n            ")])],1)]}},{key:"sname",fn:function(e){return["9201701000"!==e.item.secondId?a("div",[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n                "+t._s(e.value)+"\n              ")])],1)],1):a("div",[t._v("\n            无\n          ")])]}},{key:"tname",fn:function(e){return["9201701000"!==e.item.thirdId?a("div",[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.tprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.tprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n                "+t._s(e.value)+"\n              ")])],1)],1):a("div",[t._v("\n            无\n          ")])]}},{key:"actions",fn:function(e){return[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n            删除该申请\n          ")]),t._v(" "),a("b-button",{staticClass:"btn btn-primary",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n            查看申请细节\n          ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"选择导师",disabled:"0"!==e.item.status}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(e.item.stuname))]),t._v(" 的导师选择")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("学生ID："+t._s(e.item.studentId))])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"9"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第一选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.fname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"1")}}},[t._v("\n                            选择该导师\n                          ")])],1)]),t._v(" "),"9201701000"!==e.item.secondId?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第二选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.sname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"2")}}},[t._v("\n                            选择该导师\n                          ")])],1)]):t._e(),t._v(" "),"9201701000"!==e.item.thirdId?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("第三选择 First Choice:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.tname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("操作")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.choose(e.item,"3")}}},[t._v("\n                            选择该导师\n                          ")])],1)]):t._e(),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[t._v(t._s(e.item.comment))])])])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(e.item.stuprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.stuprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static/img/logo.png"}})])],1)],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("删除"+t._s(t.delAdvisor.stuName)+"申请？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},516:function(t,e,a){"use strict";var s=a(470),r=a(518),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},517:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",staticStyle:{background:"#f4f6f8"},attrs:{title:t.row.item.title,disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticStyle:{color:"darkblue"}},[a("strong",[t._v(t._s(t.row.item.title)+"\n          "),a("small",[t._v(t._s(t.row.item.tag)+"消息")])])])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{attrs:{md:"8"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("发件人:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.sender))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("发件时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.date))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("收件人:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.receiver))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("主题:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[t._v(t._s(t.row.item.subject))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-4"},[t._v("正文:")]),t._v(" "),a("dd",{staticClass:"col-sm-8",staticStyle:{color:"orangered"}},[a("p",{domProps:{innerHTML:t._s(t.row.item.body)}})])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("b-row",[t.isNotEmpty(t.row.item.pic)?a("img",{staticClass:"img-avatar",attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.pic).path}}):a("img",{staticClass:"img-avatar",attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-row",[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-7"},[t._v("发件人联系电话:")]),t._v(" "),a("dd",{staticClass:"col-sm-7"},[t._v(t._s(t.row.item.tel))]),t._v(" "),a("dt",{staticClass:"col-sm-7"},[t._v("发件人电子邮件:")]),t._v(" "),a("dd",{staticClass:"col-sm-7"},[t._v(t._s(t.row.item.email))])])])],1)],1),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},["read"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.markAsUnread()}}},[t._v("\n                  标记为未读\n                ")]):t._e(),t._v(" "),"unread"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.markAsRead()}}},[t._v("\n                  标记为已读\n                ")]):t._e(),t._v(" "),"trashed"!=t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.moveToTrash()}}},[t._v("\n                  移入垃圾箱\n                ")]):t._e(),t._v(" "),"trashed"==t.row.item.status?a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.moveToInbox()}}},[t._v("\n                  移入收件箱\n                ")]):t._e(),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(e){e.stopPropagation(),t.showDeleteMessage(t.row.item.id)}}},[t._v("\n                  彻底删除\n                ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  关闭信息\n                ")])],1)])])],1)],1)])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteMessage},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该消息？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},518:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{attrs:{md:"9"}},[a("b-table",{ref:"messageTable",staticStyle:{cursor:"pointer"},attrs:{"show-empty":"",stacked:"sm",fixed:!0,hover:!0,items:t.messageTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"row-clicked":t.showDetail,filtered:t.onFiltered},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("div",{staticClass:"ml-4"},[a("b-row",["重要"==e.item.labels?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"blue"}}),t._v(" 重要信息")]):t._e(),t._v(" "),"紧急"==e.item.labels?a("span",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"red"}}),t._v(" 紧急信息")]):t._e()]),t._v(" "),a("b-row",["unread"==e.item.status?a("span",[a("i",{staticClass:"fa fa-envelope",staticStyle:{color:"orange"}}),t._v(" 未读信息 ")]):t._e(),t._v(" "),"read"==e.item.status?a("span",[a("i",{staticClass:"fa fa-envelope-open"}),t._v(" 已读信息")]):t._e()])],1)]}},{key:"row-details",fn:function(e){return[a("CMessageDetail",{attrs:{row:e,info:t.info}})]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1)],1),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("b-row",{staticClass:"mt-4"},[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("h5",{staticClass:"col-form-legend"},[t._v("消息显示控制")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"11"}},[a("legend",{staticClass:"col-form-legend"},[t._v("按时间排序：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-select",{class:{"form-control":!0},attrs:{id:"info",name:"info",plain:!0,options:[{text:"时间由远到近",value:!1},{text:"时间由近到远",value:!0}]},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}})],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"12"}},[a("legend",{staticClass:"col-form-legend"},[t._v("模糊搜索：")])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1 ml-1",attrs:{md:"9"}},[a("b-form-group",[a("b-input-group",[a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},519:function(t,e,a){"use strict";var s=a(472),r=a(521),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},520:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("学期信息")])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*年份-学期(YYYY-XX):")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%",float:"left"},attrs:{id:"year",name:"info",plain:!0,options:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},model:{value:t.info.year,callback:function(e){t.$set(t.info,"year",e)},expression:"info.year"}}),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%"},attrs:{id:"info",name:"info",plain:!0,options:[{text:"春季",value:"01"},{text:"秋季",value:"02"},{text:"夏季",value:"03"}]},model:{value:t.info.semester,callback:function(e){t.$set(t.info,"semester",e)},expression:"info.semester"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("info"),expression:"errors.has('info')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("合同基本信息")])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*合同所有人名:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:1|max:20",expression:"'required|min:1|max:20'"},{name:"model",rawName:"v-model",value:t.contract.oname,expression:"contract.oname"}],class:{"form-control":!0,"is-invalid":t.errors.has("name")},attrs:{name:"name"},domProps:{value:t.contract.oname},on:{input:function(e){e.target.composing||t.$set(t.contract,"oname",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("name")))])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*类型:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"劳动合同",id:"intro",name:"type"},domProps:{checked:t._q(t.contract.type,"劳动合同")},on:{change:function(e){t.$set(t.contract,"type","劳动合同")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"intro"}},[t._v("劳动合同")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"入学协议",id:"median",name:"type"},domProps:{checked:t._q(t.contract.type,"入学协议")},on:{change:function(e){t.$set(t.contract,"type","入学协议")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"median"}},[t._v("入学协议")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contract.type,expression:"contract.type"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("type")},attrs:{type:"radio",value:"志愿者服务协议",id:"advance",name:"type"},domProps:{checked:t._q(t.contract.type,"志愿者服务协议")},on:{change:function(e){t.$set(t.contract,"type","志愿者服务协议")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"advance"}},[t._v("志愿者服务协议")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("type"),expression:"errors.has('type')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("type")))])])],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*周期:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("el-date-picker",{staticClass:"form-control",staticStyle:{height:"34px",width:"100%",padding:"5px 12px"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:t.contractRange,callback:function(e){t.contractRange=e},expression:"contractRange"}})],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("合同所有人")])]),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"control-label"},[t._v("*所有人:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("CUserSelect",{attrs:{passUser:t.user},on:{pass:t.passUser}})],1)],1)],1),t._v(" "),a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("更多信息")])]),t._v(" "),t.showDocument?t._e():a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("上传合同电子版:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("input",{attrs:{type:"file",id:"document"}})]),t._v(" "),t.isNotEmpty(t.id)||t.showUpload?a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("b-button",{staticClass:"btn btn-info my-1",staticStyle:{width:"100%"},on:{click:t.documentUpload}},[t._v("\n          上传\n        ")])],1):t._e(),t._v(" "),!t.showDocument&&t.isNotEmpty(t.contract.contractInfo)?a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("b-button",{staticClass:"btn btn-success",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!0}}},[t._v("\n          取消替换\n        ")])],1):t._e()],1),t._v(" "),t.showDocument?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("合同电子版:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-row",[a("b-col",{attrs:{md:"6"}},[t._v("\n            点击下载-> "),a("a",{staticStyle:{cursor:"pointer"},attrs:{href:"#"},on:{click:t.documentDownload}},[t._v(t._s(t.contract.contractInfo.name))])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("b-button",{staticClass:"btn btn-danger",staticStyle:{width:"100%"},on:{click:function(e){t.showDocument=!1}}},[t._v("\n              替换\n            ")])],1)],1)],1)],1):t._e(),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("备注信息:")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"10"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contract.comment,expression:"contract.comment"}],class:{"form-control":!0},staticStyle:{resize:"none"},attrs:{rows:"3"},domProps:{value:t.contract.comment},on:{input:function(e){e.target.composing||t.$set(t.contract,"comment",e.target.value)}}})]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*请确认上述信息正确无误:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("confirm")},attrs:{type:"radio",id:"yes",name:"confirm"},domProps:{checked:t._q(t.confirm,null)},on:{change:function(e){t.confirm=null}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"yes"}},[t._v("确认")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("confirm"),expression:"errors.has('confirm')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("confirm")))])])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("操作:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.id)?a("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:t.update}},[t._v("修改合同\n        ")]):a("b-button",{staticClass:"btn btn-success",staticStyle:{width:"200px"},on:{click:t.create}},[t._v(" 创建合同（同时上传文件）\n        ")])],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:function(e){t.$router.go({path:"/logistic/contract"})}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},521:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("合同类型：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.typeOptions},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"contractTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.contractTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"status",fn:function(e){return[1===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("未开始")]):t._e(),t._v(" "),0===e.value?a("p",{staticStyle:{color:"green"}},[t._v("正常")]):t._e(),t._v(" "),-1===e.value?a("p",{staticStyle:{color:"red"}},[t._v("已结束")]):t._e()]}},{key:"actions",fn:function(e){return[a("b-button",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        "+t._s(e.detailsShowing?"隐藏":"展示")+"详情\n      ")])]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start"},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[a("strong",[t._v(t._s(e.item.oname)+"的"+t._s(e.item.type))]),t._v(" 信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("合同编号："+t._s(e.item.contractId))])]),t._v(" "),a("hr"),t._v(" "),t.showDetail?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"12"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("所属人:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.oname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("合同期限:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.initDate)+" 至 "+t._s(e.item.expireDate))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("录入人:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.opname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("录入时间:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(e.item.createTime))])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-2"},[t._v("合同电子档案:")]),t._v(" "),t.isNotEmpty(e.item.contractInfo)?a("dd",{staticClass:"col-sm-5"},[a("a",{attrs:{href:"#"},on:{click:function(a){t.documentDownload(e.item.id)}}},[t._v(t._s(JSON.parse(e.item.contractInfo).name))])]):t._e()]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("备注:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[t._v(t._s(e.item.comment))])]),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.showDeleteContract(e.item.id)}}},[t._v("\n                        删除该合同\n                      ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(a){t.contractDetail(e.item.id)}}},[t._v("\n                        修改该合同\n                      ")])],1)])])])],1):a("CContractForm",{attrs:{id:e.item.id}}),t._v(" "),t.showDetail?t._e():a("b-button",{staticClass:"btn btn-info",staticStyle:{width:"200px"},on:{click:function(e){t.showDetail=!0}}},[t._v("\n              取消修改\n            ")])],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至\n        "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteContract},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该合同？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.initTable},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},524:function(t,e,a){"use strict";var s=a(525),r=a(527),i=a(508),o=a(529),n=a(533),l=a(439),c=a(440),d=(a(510),a(559)),u=a(476);a(464),a(512),a(438),a(502),a(447),a(448),a(505),a(514),a(516),a(519),a(480),a(473);a.d(e,"a",function(){return s.a}),a.d(e,"b",function(){return r.a}),a.d(e,"e",function(){return i.a}),a.d(e,"f",function(){return o.a}),a.d(e,"h",function(){return n.a}),a.d(e,"g",function(){return l.a}),a.d(e,"i",function(){return c.a}),a.d(e,"d",function(){return u.a}),a.d(e,"c",function(){return d.a})},525:function(t,e,a){"use strict";var s=a(487),r=a(526),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},526:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticClass:"aside-menu"},[a("b-tabs",[a("b-tab",{attrs:{title:"<i class='icon-speech'></i>"}},[a("div",{staticClass:"p-3"},t._l(t.items,function(e,s){return a("div",{key:e.id},[a("div",{staticClass:"message",staticStyle:{cursor:"pointer"},on:{click:function(a){t.goTo(e.id,s)}}},[a("div",{staticClass:"py-3 mr-3 float-left"},[a("div",{staticClass:"avatar"},[t.isNotEmpty(e.pic)?a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.pic).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:t.basePath+"/static/img/logo.png"}}),t._v(" "),"重要"===e.labels?a("b-badge",{staticClass:"avatar-status",attrs:{variant:"danger"}}):a("b-badge",{staticClass:"avatar-status",attrs:{variant:"success"}})],1)]),t._v(" "),a("div",[a("small",{staticClass:"text-muted"},[t._v(t._s(e.sender))]),t._v(" "),a("small",{staticClass:"text-muted float-right mt-1"},[t._v(t._s(e.date))])]),t._v(" "),a("div",{staticClass:"text-truncate font-weight-bold"},[t._v(t._s(e.title))]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v(t._s(e.body.substring(0,10))+"...\n            ")])]),t._v(" "),a("hr")])}))])],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},527:function(t,e,a){"use strict";var s=a(488),r=a(528),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},528:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ol",{staticClass:"breadcrumb"},t._l(t.list,function(e,s){return a("li",{staticClass:"breadcrumb-item"},[t.isLast(s)?a("span",{staticClass:"active"},[t._v(t._s(t.showName(e)))]):a("router-link",{attrs:{to:e}},[t._v(t._s(t.showName(e)))])],1)}))},r=[],i={render:s,staticRenderFns:r};e.a=i},529:function(t,e,a){"use strict";var s=a(489),r=a(532),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},530:function(t,e,a){"use strict";var s=a(490),r=a(531),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},531:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav-item-dropdown",{attrs:{right:"","no-caret":""}},[a("template",{slot:"button-content"},[a("small",{staticClass:"d-md-down-none"},[t._v(" 欢迎回来 "+t._s(t.user.lastName)+", "+t._s(t.user.firstName))]),t._v(" "),a("img",{staticClass:"img-avatar",attrs:{src:t.profilePath}})]),t._v(" "),a("b-dropdown-header",{staticClass:"text-center",attrs:{tag:"div"}},[a("strong",[t._v("用户 "+t._s(t.user.userId))])]),t._v(" "),a("b-dropdown-item",{on:{click:t.viewProfile}},[a("i",{staticClass:"fa fa-user"}),t._v(" 个人资料")]),t._v(" "),a("b-dropdown-item",{on:{click:t.logout}},[a("i",{staticClass:"fa fa-power-off"}),t._v(" 登出")])],2)},r=[],i={render:s,staticRenderFns:r};e.a=i},532:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"app-header navbar"},[a("button",{staticClass:"navbar-toggler mobile-sidebar-toggler d-lg-none",attrs:{type:"button"},on:{click:t.mobileSidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),a("b-link",{staticClass:"navbar-brand",attrs:{to:"#"}}),t._v(" "),a("button",{staticClass:"navbar-toggler sidebar-toggler d-md-down-none",attrs:{type:"button"},on:{click:t.sidebarToggle}},[a("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),a("b-navbar-nav",{staticClass:"d-md-down-none"},[a("strong",[t._v("教育管理系统 EAS")]),t._v(" "),a("small",{staticClass:"mt-1"},[t._v("  Educational Administration System")])]),t._v(" "),a("b-navbar-nav",{staticClass:"ml-auto"},[a("b-nav-item",{staticClass:"d-md-down-none"}),t._v(" "),a("b-nav-item",{staticClass:"d-md-down-none"}),t._v(" "),a("b-nav-item",{staticClass:"d-md-down-none",on:{click:t.asideToggle}},[a("i",{staticClass:"icon-envelope"}),t._v(" "),a("b-badge",{attrs:{pill:"",variant:"danger"}},[t._v("*")])],1),t._v(" "),a("HeaderDropdown")],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},533:function(t,e,a){"use strict";function s(t){a(534)}var r=a(491),i=a(558),o=a(21),n=s,l=o(r.a,i.a,!1,n,null,null);e.a=l.exports},534:function(t,e,a){var s=a(535);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(400)("1100bd4e",s,!0)},535:function(t,e,a){e=t.exports=a(399)(!0),e.push([t.i,".nav-link{cursor:pointer}","",{version:3,sources:["C:/Users/linsh/IdeaProjects/pionner_web/src/components/Sidebar.vue"],names:[],mappings:"AACA,UACE,cAAgB,CACjB",file:"Sidebar.vue",sourcesContent:["\n.nav-link {\n  cursor: pointer;\n}\n"],sourceRoot:""}])},536:function(t,e,a){"use strict";var s=a(492),r=a(537),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},537:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},r=[],i={render:s,staticRenderFns:r};e.a=i},538:function(t,e,a){"use strict";var s=a(493),r=a(539),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},539:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},r=[],i={render:s,staticRenderFns:r};e.a=i},540:function(t,e,a){"use strict";var s=a(494),r=a(541),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},541:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},r=[],i={render:s,staticRenderFns:r};e.a=i},542:function(t,e,a){"use strict";var s=a(495),r=a(543),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},543:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"sidebar-minimizer",attrs:{type:"button"},on:{click:function(e){t.sidebarMinimize(),t.brandMinimize()}}})},r=[],i={render:s,staticRenderFns:r};e.a=i},544:function(t,e,a){"use strict";var s=a(496),r=a(549),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},545:function(t,e,a){t.exports={default:a(546),__esModule:!0}},546:function(t,e,a){a(69),a(547),t.exports=a(11).Array.from},547:function(t,e,a){"use strict";var s=a(30),r=a(22),i=a(71),o=a(140),n=a(141),l=a(70),c=a(548),d=a(142);r(r.S+r.F*!a(143)(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,r,u,m=i(t),v="function"==typeof this?this:Array,p=arguments.length,f=p>1?arguments[1]:void 0,b=void 0!==f,h=0,g=d(m);if(b&&(f=s(f,p>2?arguments[2]:void 0,2)),void 0==g||v==Array&&n(g))for(e=l(m.length),a=new v(e);e>h;h++)c(a,h,b?f(m[h],h):m[h]);else for(u=g.call(m),a=new v;!(r=u.next()).done;h++)c(a,h,b?o(u,f,[r.value,h],!0):r.value);return a.length=h,a}})},548:function(t,e,a){"use strict";var s=a(15),r=a(31);t.exports=function(t,e,a){e in t?s.f(t,e,r(0,a)):t[e]=a}},549:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{class:t.classList})},r=[],i={render:s,staticRenderFns:r};e.a=i},550:function(t,e,a){"use strict";var s=a(497),r=a(551),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},551:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"nav-item nav-dropdown",attrs:{tag:"li",to:t.url,disabled:""}},[a("div",{staticClass:"nav-link nav-dropdown-toggle",on:{click:t.handleClick}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name))]),t._v(" "),a("ul",{staticClass:"nav-dropdown-items"},[t._t("default")],2)])},r=[],i={render:s,staticRenderFns:r};e.a=i},552:function(t,e,a){"use strict";var s=a(498),r=a(553),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},553:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isExternalLink?a("div",[a("a",{class:t.classList,attrs:{href:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)]):a("div",[a("router-link",{class:t.classList,attrs:{to:t.url}},[a("i",{class:t.icon}),t._v(" "+t._s(t.name)+"\n    "),t.badge&&t.badge.text?a("b-badge",{attrs:{variant:t.badge.variant}},[t._v(t._s(t.badge.text))]):t._e()],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},554:function(t,e,a){"use strict";var s=a(499),r=a(555),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},555:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{class:t.classList},[t.wrapper&&t.wrapper.element?[a(t.wrapper.element,t._b({tag:"component"},"component",t.wrapper.attributes,!1),[t._v("\n      "+t._s(t.name)+"\n    ")])]:[t._v("\n    "+t._s(t.name)+"\n  ")]],2)},r=[],i={render:s,staticRenderFns:r};e.a=i},556:function(t,e,a){"use strict";var s=a(500),r=a(557),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},557:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("li",{class:t.classList,on:{click:t.hideMobile}},[t._t("default")],2)},r=[],i={render:s,staticRenderFns:r};e.a=i},558:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar"},[a("SidebarHeader"),t._v(" "),a("SidebarForm"),t._v(" "),a("nav",{staticClass:"sidebar-nav"},[a("div",{attrs:{slot:"header"},slot:"header"}),t._v(" "),a("ul",{staticClass:"nav"},[t._l(t.navItems,function(e,s){return[e.title?[a("SidebarNavTitle",{attrs:{name:e.name,classes:e.class,wrapper:e.wrapper}})]:e.divider?[a("SidebarNavDivider",{attrs:{classes:e.class}})]:[e.children?[a("SidebarNavDropdown",{attrs:{name:e.name,url:e.url,icon:e.icon}},[t._l(e.children,function(s,r){return[s.children?[a("SidebarNavDropdown",{attrs:{name:s.name,url:s.url,icon:s.icon}},t._l(s.children,function(t,s){return a("li",{staticClass:"nav-item"},[a("SidebarNavLink",{attrs:{name:t.name,url:t.url,icon:t.icon,badge:t.badge,variant:e.variant}})],1)}))]:[a("SidebarNavItem",{attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:s.name,url:s.url,icon:s.icon,badge:s.badge,variant:e.variant}})],1)]]})],2)]:[a("SidebarNavItem",{attrs:{classes:e.class}},[a("SidebarNavLink",{attrs:{name:e.name,url:e.url,icon:e.icon,badge:e.badge,variant:e.variant}})],1)]]]})],2),t._v(" "),t._t("default")],2),t._v(" "),a("SidebarFooter"),t._v(" "),a("SidebarMinimizer")],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},559:function(t,e,a){"use strict";var s=a(501),r=a(560),i=a(21),o=i(s.a,r.a,!1,null,null,null);e.a=o.exports},560:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("课程")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.courseOptions,placeholder:"输入搜索"},on:{search:t.courseList},model:{value:t.course,callback:function(e){t.course=e},expression:"course"}})],1)],1)},r=[],i={render:s,staticRenderFns:r};e.a=i},664:function(t,e,a){"use strict";var s=a(138),r=a.n(s),i=a(524),o=a(448),n=[],l=[{key:"index",label:"序号",class:"text-center"},{key:"studentId",label:"学生ID",sortable:!0},{key:"sname",label:"姓名",sortable:!0},{key:"grade",label:"学生成绩",sortable:!0},{key:"complete",label:"完成情况",sortable:!0},{key:"credit",label:"获得学分",sortable:!0},{key:"crn",label:"课码",sortable:!0},{key:"cname",label:"课名",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"TranscriptManage",components:{CTranscriptEdit:o.a,InfoSelect:i.g,StudentSelect:i.i,CourseSelect:i.c},data:function(){return{msg:"",showModal:!1,headerBgVariant:"",field:l,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"id",sortDesc:!1,filter:null,items:n,deleteRow:"",info:"",student:"",course:"",reportStudent:"",reportInfo:"",showDeleteModal:!1,basePath:basePath}},watch:{info:function(){this.initTable()},student:function(){this.initTable()},course:function(){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{showDeleteTranscript:function(t){this.deleteRow=t,this.showDeleteModal=!0},deleteTranscript:function(){var t=this;r.a.delete("/course/"+this.deleteRow.crn+"/student/"+this.deleteRow.studentId).then(function(e){2001===e.data.code?(t.msg="删除成功!",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},passInfo:function(t){this.info=t},passStudent:function(t){this.student=t},passCourse:function(t){this.course=t},passReportStudent:function(t){this.reportStudent=t},passReportInfo:function(t){this.reportInfo=t},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.transcriptTable.refresh()},transcriptTable:function(t){var e=this;this.isBusy=!0;var a="/transcript/list?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.course)&&(a+="&crn="+this.course.value),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},downloadReport:function(){window.open(basePath+"/transcript/report/"+this.reportStudent.value+"?token="+window.localStorage.getItem("access_token"))},downloadAllReport:function(t){window.open(basePath+"/transcript/report/all?style="+t+"&info="+this.reportInfo.value+"&token="+window.localStorage.getItem("access_token"))}}}},777:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("成绩单列表")])]),t._v(" "),a("b-container",{attrs:{fluid:""},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n              "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n            ")]}},{key:"complete",fn:function(e){return["1"===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("完成")]):t._e(),t._v(" "),"0"===e.value?a("p",{staticStyle:{color:"green"}},[t._v("进行中")]):t._e(),t._v(" "),"-1"===e.value?a("p",{staticStyle:{color:"red"}},[t._v("挂科")]):t._e()]}},{key:"actions",fn:function(e){return[a("b-nav",{attrs:{pills:""}},[a("b-nav-item-dropdown",{attrs:{text:"操作"}},[a("b-dropdown-item",{on:{click:function(a){a.stopPropagation(),t.showDeleteTranscript(e.item)}}},[a("i",{staticClass:"fa fa-trash",staticStyle:{color:"red"},attrs:{title:"删除成绩"}}),t._v("删除成绩\n                  ")]),t._v(" "),a("b-dropdown-item",{on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[a("i",{staticClass:"fa fa-pencil",staticStyle:{color:"red"},attrs:{title:"修改成绩"}}),t._v("修改成绩\n                  ")])],1)],1)]}},{key:"studentId",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:"/static/eas/img/logo.png"}})]),t._v(" "),a("b-col",{staticClass:"mt-1",staticStyle:{"font-size":"11px"},attrs:{md:"9"}},[t._v("\n                  "+t._s(e.value)+"\n                ")])],1)]}},{key:"row-details",fn:function(t){return[a("CTranscriptEdit",{attrs:{row:t}})]}}])},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("管理学期：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("InfoSelect",{on:{pass:t.passInfo}})],1)],1),t._v(" "),t.isNotEmpty(t.info)&&t.isNotEmpty(t.info.value)?a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("StudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CourseSelect",{attrs:{info:t.info},on:{pass:t.passCourse}})],1)],1):t._e(),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n                      搜索：\n                    ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),t._v('"\n          >\n            '),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至\n                "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1)],1)],1)],1),t._v(" "),a("b-col",{attrs:{cols:"12"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("下载成绩单")])]),t._v(" "),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[t._v("\n              按学生下载：\n            ")]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("StudentSelect",{on:{pass:t.passReportStudent}})],1),t._v(" "),t.isNotEmpty(t.reportStudent)?a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-input-group-button",[a("b-button",{staticClass:"mb-4 btn btn-success",staticStyle:{width:"150px"},on:{click:t.downloadReport}},[t._v("下载")])],1)],1):t._e()],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[t._v("\n              按学期下载：\n            ")]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("InfoSelect",{on:{pass:t.passReportInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(t.reportInfo)?a("b-input-group-button",[a("b-button",{staticClass:"mb-4 btn btn-success",staticStyle:{width:"150px"},on:{click:function(e){t.downloadAllReport(1)}}},[t._v("竖版下载（含评语）\n                ")])],1):t._e()],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[t.isNotEmpty(t.reportInfo)?a("b-input-group-button",[a("b-button",{staticClass:"mb-4 btn btn-success",staticStyle:{width:"150px"},on:{click:function(e){t.downloadAllReport(2)}}},[t._v("横板下载（快速查询）\n                ")])],1):t._e()],1)],1)],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteTranscript},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该成绩单？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],i={render:s,staticRenderFns:r};e.a=i}});
//# sourceMappingURL=2.4b36850c4fec68f18987.js.map