webpackJsonp([8],{418:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(664),r=a(775),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.default=i.exports},436:function(t,e,a){"use strict";var s=a(446),r=a(474),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},437:function(t,e,a){"use strict";var s=a(441),r=a(460),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},439:function(t,e,a){"use strict";var s=a(442),r=a(461),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},441:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-infoSelect",data:function(){return{info:"",infoOptions:[]}},mounted:function(){var t=this;r.a.get("/course/info?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].split("-"),r="";switch(s[1]){case"01":r="-春季";break;case"02":case"03":r="-秋季"}var o={label:s[0]+r,value:e.data.data[a]};t.infoOptions.push(o)}})},watch:{info:function(t){this.$emit("pass",t)}},methods:{infoList:function(t,e){var a=this;e(!0),this.infoOptions=[],r.a.get("/course/info?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.infoOptions.push(s)}}),e(!1)}}}},442:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:"",studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var i={label:s,profile:r,value:e.data.data[a].userId};t.studentOptions.push(i)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],r.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var i={label:s,profile:r,value:t.data.data[e].userId};a.studentOptions.push(i)}}),e(!1)}}}},443:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(449),i=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"cname",label:"课程名",sortable:!0},{key:"studentId",label:"学生ID",sortable:!0},{key:"sname",label:"学生名",sortable:!0},{key:"grade",label:"学生成绩",sortable:!0},{key:"complete",label:"完成情况",sortable:!0},{key:"credit",label:"获得学分",sortable:!0},{key:"actions",label:"操作"}];e.a={name:"c-studentInCourseTable",components:{CTranscriptEdit:o.a},props:["mode","crn","cname","credit","studentId"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",sname:"",field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"student_id",sortDesc:!1,filter:null,items:i,showDeleteModal:!1,deleteStudentId:"",deleteCRN:""}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},initTable:function(){this.$refs.studentInCourseTable.refresh()},studentInCourseTable:function(t){var e=this;this.isBusy=!0;var a="/transcript/course/student?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.crn)&&(a+="&crn="+this.crn),this.isNotEmpty(this.studentId)&&(a+="&studentId="+this.studentId),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteStudent:function(t,e){this.deleteStudentId=t,this.deleteCRN=e,this.showDeleteModal=!0},removeStuFromCourse:function(){var t=this;r.a.delete("/course/"+this.deleteCRN+"/student/"+this.deleteStudentId).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},444:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-transcriptEdit",props:["row","mode"],data:function(){return{msg:"",showModal:!1,headerBgVariant:"",basePath:basePath}},methods:{updateTranscript:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&r.a.put("/transcript/"+t.id,t).then(function(t){2001===t.data.code?(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},446:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-advisorSelect",data:function(){return{advisor:"",advisorOptions:[]}},watch:{advisor:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?status=1&type=f&role=7&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var i={label:s,value:e.data.data[a].userId,profile:r};t.advisorOptions.push(i)}})},methods:{advisorList:function(t,e){var a=this;e(!0),this.advisorOptions=[],r.a.get("/user/search?type=f&role=7&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r="";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var i={label:s,value:t.data.data[e].userId,profile:r};a.advisorOptions.push(i)}}),e(!1)}}}},447:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(439),i=a(436),n=a(437),l=a(448),c=[],d=[{key:"index",label:"序号",class:"text-center"},{key:"sname",label:"学生姓名"},{key:"fname",label:"教师姓名"},{key:"status",label:"状态"},{key:"updateTime",label:"更新时间"},{key:"oname",label:"操作人"},{key:"actions",label:"操作"}];e.a={name:"c-adviseTable",components:{CStudentInCourseTable:l.a,CInfoSelect:n.a,CNewAdvisorSelect:i.a,CAdvisorSelect:i.a,CStudentSelect:o.a},props:["showAdvisor","fromAdvisor","mode"],data:function(){return{field:d,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"id",sortDesc:!1,filter:null,items:c,info:"",showDeleteModal:!1,showModal:!1,advise:"",advisor:"",msg:"",headerBgVariant:"",student:"",newAdvisor:""}},mounted:function(){isNotEmpty(this.fromAdvisor)&&(this.advisor={value:this.fromAdvisor.userId,label:this.fromAdvisor.name})},watch:{info:function(){this.initTable()},student:function(){this.initTable()},advisor:function(){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passAdvisor:function(t){this.advisor=t},passNewAdvisor:function(t){this.newAdvisor=t},passStudent:function(t){this.student=t},passInfo:function(t){this.info=t},initTable:function(){this.$refs.adviseTable.refresh()},adviseTable:function(t){var e=this;this.isBusy=!0;var a="/advise?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.student)&&(a+="&studentId="+this.student.value),this.isNotEmpty(this.advisor)&&(a+="&facultyId="+this.advisor.value),this.isNotEmpty(this.mode)&&(a+="&mode="+this.mode),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advise=t,this.showDeleteModal=!0},updateOne:function(t){var e=this;t.facultyId=this.newAdvisor.value,r.a.put("/advise/"+t.id,t).then(function(t){2001===t.data.code?(e.msg="更新成功！",e.showModal=!0,e.headerBgVariant="success",e.initTable()):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})},deleteOne:function(){var t=this;r.a.delete("/advise/"+this.advise.id).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},downloadTranscript:function(t){window.open(basePath+"/transcript/report/"+t+"?token="+window.localStorage.getItem("access_token"))}}}},448:function(t,e,a){"use strict";var s=a(443),r=a(463),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},449:function(t,e,a){"use strict";var s=a(444),r=a(462),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},451:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-facultySelect",props:["parentFaculty"],data:function(){return{faculty:"",facultyOptions:[]}},watch:{faculty:function(t){this.$emit("pass",t)},parentFaculty:function(t){this.faculty=this.parentFaculty}},mounted:function(){var t=this;r.a.get("/user/search?status=1&type=f&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r="/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var i={label:s,value:e.data.data[a].userId,profile:r};t.facultyOptions.push(i)}})},methods:{facultyList:function(t,e){var a=this;e(!0),this.facultyOptions=[],r.a.get("/user/search?type=f&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r="";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var i={label:s,value:t.data.data[e].userId,profile:r};a.facultyOptions.push(i)}}),e(!1)}}}},452:function(t,e,a){"use strict";var s=a(447),r=a(475),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},457:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(452),i=[],n=[{key:"index",label:"序号",class:"text-center"},{key:"userId",label:"导师信息",sortable:!0},{key:"name",label:"姓名",sortable:!0},{key:"numStudent",label:"当前辅导学生数",sortable:!0,class:"text-center"},{key:"actions",label:"操作"}];e.a={name:"c-advisorTable",components:{CAdviseTable:o.a},props:["mode"],data:function(){return{field:n,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"userId",sortDesc:!1,filter:null,items:i,info:"",showDeleteModal:!1,showModal:!1,advisor:"",msg:"",headerBgVariant:"",basePath:basePath}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{choose:function(t){this.$emit("pass",t)},initTable:function(){this.$refs.advisorTable.refresh()},advisorTable:function(t){var e=this;this.isBusy=!0;var a="/advise/advisor?start="+t.currentPage+"&length="+t.perPage+"&orderCol=";switch(t.sortBy){case"userId":a+="user_id";break;case"name":a+="last_name";break;case"numStudent":a+="num_Student";break;case"updateTime":a+="update_time";break;default:a+=t.sortBy}return this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.advisor=t,this.showDeleteModal=!0},deleteOne:function(){var t=this;r.a.delete("/advise/advisor/"+this.advisor.userId).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},resendPin:function(t){this.advisor=t,console.log(t),this.showSendModal=!0},resendOne:function(){var t=this;r.a.post("/advisor/send",this.advisor).then(function(e){2001===e.data.code?(t.msg="发送成功！",t.showModal=!0,t.headerBgVariant="success"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},updateOne:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&r.a.put("/advisor/"+t.advisor,t).then(function(t){2001===t.data.code?(e.msg="修改成功！",e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})}}}},460:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"icon-info"}),t._v(" 学期:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,placeholder:"输入搜索",options:t.infoOptions},on:{search:t.infoList},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},461:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-user"}),t._v(" 学生:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索"},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},462:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"修改成绩",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("学生 "),a("strong",[t._v(t._s(t.row.item.sname))]),t._v(" 在 "),a("strong",[t._v(t._s(t.row.item.cname))]),t._v("\n          课程的成绩信息")]),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("课程CRN："+t._s(t.row.item.crn))])]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"mr-1"},[a("b-row",[a("b-col",{attrs:{md:"9"}},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("学生名:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.sname))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("课程学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-2"},[t._v(t._s(t.row.item.credits))]),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("成绩:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.grade,expression:"row.item.grade"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("grade")},attrs:{placeholder:"可使用Letter Grade或百分制",name:"grade",disabled:"faculty"===t.mode},domProps:{value:t.row.item.grade},on:{input:function(e){e.target.composing||t.$set(t.row.item,"grade",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("grade"),expression:"errors.has('grade')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("grade")))])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("完成情况:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-row",[a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"complete",name:"complete",value:"1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"1")},on:{change:function(e){t.$set(t.row.item,"complete","1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"complete"}},[t._v("完成")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"process",name:"complete",value:"0",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"0")},on:{change:function(e){t.$set(t.row.item,"complete","0")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"process"}},[t._v("正在进行")])])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("div",{staticClass:"custom-control custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.item.complete,expression:"row.item.complete"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"nComplete",name:"nComplete",value:"-1",disabled:"faculty"===t.mode},domProps:{checked:t._q(t.row.item.complete,"-1")},on:{change:function(e){t.$set(t.row.item,"complete","-1")}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"nComplete"}},[t._v("未完成")])])])],1)],1),t._v(" "),a("dt",{staticClass:"col-sm-1"},[t._v("获得学分:")]),t._v(" "),a("dd",{staticClass:"col-sm-4"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|verify_credit:"+t.row.item.credits,expression:"'required|verify_credit:' + row.item.credits + ''"},{name:"model",rawName:"v-model",value:t.row.item.credit,expression:"row.item.credit"}],class:{"form-control":!0,"is-invalid":t.errors.has("credit")},attrs:{type:"text",name:"credit",disabled:"faculty"===t.mode},domProps:{value:t.row.item.credit},on:{input:function(e){e.target.composing||t.$set(t.row.item,"credit",e.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("credit"),expression:"errors.has('credit')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("credit"))+"\n                ")])])]),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("评语:")]),t._v(" "),a("dd",{staticClass:"col-sm-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.row.item.remark,expression:"row.item.remark"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{rows:"7"},domProps:{value:t.row.item.remark},on:{input:function(e){e.target.composing||t.$set(t.row.item,"remark",e.target.value)}}})])]),t._v(" "),"faculty"!==t.mode?a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(e){e.stopPropagation(),t.updateTranscript(t.row.item,t.row)}}},[t._v("\n                  修改成绩\n                ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){e.stopPropagation(),t.row.toggleDetails(e)}}},[t._v("\n                  取消修改\n                ")])],1)]):t._e()]),t._v(" "),a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(t.row.item.sprofile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:t.basePath+"/static"+JSON.parse(t.row.item.sprofile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"70%"},attrs:{src:"/static/eas/img/logo.png"}})])],1)],1)])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},on:{ok:t.row.toggleDetails},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},463:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"studentInCourseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.studentInCourseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"complete",fn:function(e){return["1"===e.value?a("p",{staticStyle:{color:"green"}},[t._v("完成")]):t._e(),t._v(" "),"0"===e.value?a("p",{staticStyle:{color:"blue"}},[t._v("进行中")]):t._e(),t._v(" "),"-1"===e.value?a("p",{staticStyle:{color:"red"}},[t._v("挂科")]):t._e()]}},{key:"actions",fn:function(e){return["student"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteStudent(e.item.studentId,e.item.crn)}}},[t._v("\n        移除该学生\n      ")]):t._e(),t._v(" "),"transcript"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        修改成绩\n      ")]):t._e(),t._v(" "),"faculty"==t.mode?a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n        学生学分和成绩查看\n      ")]):t._e()]}},{key:"row-details",fn:function(e){return[a("CTranscriptEdit",{attrs:{row:e,mode:t.mode}})]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger","ok-title":"确认",centered:"",title:"不可逆操作警告！"},on:{ok:t.removeStuFromCourse},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v("确认删除该学生？")])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},474:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"fa fa-user-o"}),t._v(" 导师:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.advisorOptions,placeholder:"输入搜索"},on:{search:t.advisorList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.advisor,callback:function(e){t.advisor=e},expression:"advisor"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},475:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CStudentSelect",{on:{pass:t.passStudent}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[1==t.showAdvisor?a("CAdvisorSelect",{on:{pass:t.passAdvisor}}):t._e()],1)],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-1"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"adviseTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.adviseTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"actions",fn:function(e){return["faculty"===t.mode?a("div",[a("b-btn",{staticClass:"btn btn-info",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          课程和成绩查看\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-success",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.downloadTranscript(e.item.studentId)}}},[t._v("\n          成绩单下载\n        ")])],1):a("div",[a("b-btn",{staticClass:"btn btn-danger",staticStyle:{width:"50%"},attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          删除辅导关系\n        ")]),t._v(" "),a("b-btn",{staticClass:"btn btn-info",staticStyle:{width:"45%"},attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          修改辅导关系\n        ")])],1)]}},{key:"row-details",fn:function(e){return["faculty"===t.mode?a("div",[a("CStudentInCourseTable",{attrs:{mode:"faculty",studentId:e.item.studentId}})],1):a("div",[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑用户",disabled:""}},[a("div",{staticClass:"d-flex w-100 justify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v("修改当前辅导关系")]),t._v(" "),a("small",{staticClass:"text-danger"},[t._v("注意：只可以修改导师！")])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"12"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("请分配新导师:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("CNewAdvisorSelect",{on:{pass:t.passNewAdvisor}})],1),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{staticStyle:{width:"150px"},attrs:{size:"sm",variant:"success"},on:{click:function(a){a.stopPropagation(),t.updateOne(e.item)}}},[t._v("\n                          提交\n                        ")])],1)])])])],1)],1)],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该辅导关系？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},498:function(t,e,a){"use strict";var s=a(451),r=a(499),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},499:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",staticStyle:{"margin-left":"-3px"}},[a("i",{staticClass:"icon-pencil"}),t._v(" 教师:")])])]),t._v(" "),a("b-col",{attrs:{md:"10"}},[a("v-select",{attrs:{filterable:!1,options:t.facultyOptions},on:{search:t.facultyList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.faculty,callback:function(e){t.faculty=e},expression:"faculty"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},503:function(t,e,a){"use strict";var s=a(457),r=a(504),o=a(21),i=o(s.a,r.a,!1,null,null,null);e.a=i.exports},504:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}}),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"advisorTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.advisorTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"userId",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"45px",height:"45px"},attrs:{src:t.basePath+"/static/img/logo.png"}})]),t._v(" "),a("b-col",{attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return["choose"!==t.mode?a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item)}}},[t._v("\n          取消导师资格\n        ")]),t._v(" "),a("b-button",{staticClass:"btn btn-primary",attrs:{size:"sm"},on:{click:function(t){t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n          查看辅导学生\n        ")])],1):a("div",[a("b-button",{staticClass:"btn btn-danger",attrs:{size:"sm"},on:{click:function(a){a.stopPropagation(),t.choose(e.item)}}},[t._v("\n          选择该导师\n        ")])],1)]}},{key:"row-details",fn:function(t){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start"},[a("CAdviseTable",{ref:"CAdviseTable",attrs:{showAdvisor:"0",fromAdvisor:t.item}})],1)],1)],1)]}}])}),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认取消"+t._s(t.advisor.name)+"的导师资格？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},664:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(503),i=a(498);e.a={name:"Advisor",components:{CFacultySelect:i.a,CAdvisorTable:o.a},data:function(){return{faculty:"",showModal:!1,msg:"",headerBgVariant:""}},methods:{passFaculty:function(t){this.faculty=t},addAdvisor:function(){var t=this;r.a.put("/advise/advisor/"+this.faculty.value).then(function(e){e.data.code?(t.msg="添加成功！",t.showModal=!0,t.headerBgVariant="success",t.$refs.CAdvisorTable.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t}}}},775:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("新增导师")])]),t._v(" "),a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"mt-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("选择老师：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("CFacultySelect",{on:{pass:t.passFaculty}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-button",{staticStyle:{width:"150px"},attrs:{variant:"success",disabled:!t.isNotEmpty(t.faculty)},on:{click:t.addAdvisor}},[t._v("\n                添加导师\n              ")])],1)],1)],1)],1)],1)],1),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"12"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("导师列表")])]),t._v(" "),a("b-row",[a("CAdvisorTable",{ref:"CAdvisorTable"})],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o}});
//# sourceMappingURL=8.8ce62f82ccf08c7dc5c3.js.map