webpackJsonp([10],{415:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(662),r=a(776),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.default=n.exports},439:function(t,e,a){"use strict";var s=a(441),r=a(458),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},440:function(t,e,a){"use strict";var s=a(442),r=a(459),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},441:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-infoSelect",data:function(){return{info:"",infoOptions:[]}},mounted:function(){var t=this;r.a.get("/course/info?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].split("-"),r="";switch(s[1]){case"01":r="-春季";break;case"02":case"03":r="-秋季"}var o={label:s[0]+r,value:e.data.data[a]};t.infoOptions.push(o)}})},watch:{info:function(t){this.$emit("pass",t)}},methods:{infoList:function(t,e){var a=this;e(!0),this.infoOptions=[],r.a.get("/course/info?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.infoOptions.push(s)}}),e(!1)}}}},442:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-studentSelect",data:function(){return{student:"",studentOptions:[]}},watch:{student:function(t){this.$emit("pass",t)}},mounted:function(){var t=this;r.a.get("/user/search?type=s&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var n={label:s,profile:r,value:e.data.data[a].userId};t.studentOptions.push(n)}})},methods:{studentList:function(t,e){var a=this;e(!0),this.studentOptions=[],r.a.get("/user/search?type=s&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var n={label:s,profile:r,value:t.data.data[e].userId};a.studentOptions.push(n)}}),e(!1)}}}},450:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-facultySelect",props:["parentFaculty"],data:function(){return{faculty:"",facultyOptions:[]}},watch:{faculty:function(t){this.$emit("pass",t)},parentFaculty:function(t){this.faculty=this.parentFaculty}},mounted:function(){var t=this;r.a.get("/user/search?status=1&type=f&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var n={label:s,value:e.data.data[a].userId,profile:r};t.facultyOptions.push(n)}})},methods:{facultyList:function(t,e){var a=this;e(!0),this.facultyOptions=[],r.a.get("/user/search?type=f&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r="";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var n={label:s,value:t.data.data[e].userId,profile:r};a.facultyOptions.push(n)}}),e(!1)}}}},458:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("学期")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,placeholder:"输入搜索",options:t.infoOptions},on:{search:t.infoList},model:{value:t.info,callback:function(e){t.info=e},expression:"info"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},459:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("学生")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.studentOptions,placeholder:"输入搜索"},on:{search:t.studentList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.student,callback:function(e){t.student=e},expression:"student"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},460:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-userSelect",props:["mode","passUser"],data:function(){return{user:"",userOptions:[]}},watch:{user:function(t){this.$emit("pass",t)},passUser:function(t){this.user=t}},mounted:function(){var t=this;r.a.get("/user/search?status=1&search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s=e.data.data[a].lastName+", "+e.data.data[a].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(e.data.data[a].profile)){var o=JSON.parse(e.data.data[a].profile);r=basePath+"/static"+o.path}var n={label:s,profile:r,value:e.data.data[a].userId};t.userOptions.push(n)}})},methods:{userList:function(t,e){var a=this;e(!0),this.userOptions=[],r.a.get("/user/search?status=1&search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s=t.data.data[e].lastName+", "+t.data.data[e].firstName,r=basePath+"/static/img/logo.png";if(isNotEmpty(t.data.data[e].profile)){var o=JSON.parse(t.data.data[e].profile);r=basePath+"/static"+o.path}var n={label:s,profile:r,value:t.data.data[e].userId};a.userOptions.push(n)}}),e(!1)}}}},464:function(t,e,a){"use strict";var s=a(460),r=a(504),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},468:function(t,e,a){"use strict";var s=a(138),r=a.n(s);e.a={name:"c-pinSelect",data:function(){return{pin:{label:"---选择识别码---",value:""},pinOptions:[{label:"---选择识别码---",value:""}]}},mounted:function(){var t=this;r.a.get("/pin?search=").then(function(e){for(var a=0;a<e.data.data.length;a++){var s={label:e.data.data[a],value:e.data.data[a]};t.pinOptions.push(s)}})},watch:{pin:function(t){this.$emit("pass",t)}},methods:{pinList:function(t,e){var a=this;e(!0),this.pinOptions=[],r.a.get("/pin?search="+t).then(function(t){for(var e=0;e<t.data.data.length;e++){var s={label:t.data.data[e],value:t.data.data[e]};a.pinOptions.push(s)}}),e(!1)}}}},476:function(t,e,a){"use strict";var s=a(450),r=a(477),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},477:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("教师")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.facultyOptions,placeholder:"输入搜索"},on:{search:t.facultyList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.faculty,callback:function(e){t.faculty=e},expression:"faculty"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},504:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("用户")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.userOptions},on:{search:t.userList},scopedSlots:t._u([{key:"option",fn:function(e){return[a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:e.profile}}),t._v("\n        "+t._s(e.label)+"\n      ")]}}]),model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},512:function(t,e,a){"use strict";var s=a(468),r=a(513),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},513:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("b-button",{attrs:{disabled:""}},[t._v("识别码")])],1),t._v(" "),a("v-select",{attrs:{filterable:!1,options:t.pinOptions},on:{search:t.pinList},model:{value:t.pin,callback:function(e){t.pin=e},expression:"pin"}})],1)],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},662:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(439),n=a(774),i=a(464),l=a(512),c=a(476),d=a(440);e.a={name:"Pin",components:{CStudentSelect:d.a,CFacultySelect:c.a,CPinSelect:l.a,CUserSelect:i.a,CPinTable:n.a,CInfoSelect:o.a},data:function(){return{startTime:"",endTime:"",range:[],role:"",remark:"",info:"",table:"",mode:"",confirm:"",user:"",deleteInfo:"",showDeleteModal:!1,showModal:!1,msg:"",headerBgVariant:"",pin:"",sendRole:[],sendInfo:"",activeName:"second",pinInfo:{year:"2018",semester:"01"}}},methods:{passUser:function(t){this.user=t},passInfo:function(t){this.deleteInfo=t},passPin:function(t){this.pin=t},passSendInfo:function(t){this.sendInfo=t},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},sendPin:function(){for(var t=this,e=0;e<this.sendRole.length;e++)switch(this.sendRole[e]){case"1":r.a.get("/pin/send/advisor/"+this.sendInfo.value).then(function(e){t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger"});break;case"2":r.a.get("/pin/send/faculty/"+this.sendInfo.value).then(function(e){t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger"})}},generate:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){var a="/pin";t.startTime=date2Str(t.range[0],"yyyy-MM-dd hh:mm:ss"),t.endTime=date2Str(t.range[1],"yyyy-MM-dd hh:mm:ss");var s=t.pinInfo.year+"-"+t.pinInfo.semester;switch(t.mode){case"1":a+="?startTime="+t.startTime+"&endTime="+t.endTime+"&role="+t.role+"&info="+s+"&remark="+t.remark,r.a.post(a).then(function(e){2001===e.data.code?(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="success"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")});break;case"2":a+="/"+t.user.value+"?startTime="+t.startTime+"&endTime="+t.endTime+"&role="+t.role+"&info="+s+"&remark="+t.remark,r.a.post(a).then(function(e){2001===e.data.code?(t.msg="创建并发送成功！",t.showModal=!0,t.headerBgVariant="success"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}})},showDeleteAll:function(){this.showDeleteModal=!0},deleteAll:function(){var t=this;r.a.delete("/pin/"+this.deleteInfo.value+"/all").then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.deleteInfo=""):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})}}}},663:function(t,e,a){"use strict";var s=a(138),r=a.n(s),o=a(439),n=a(464),i=[],l=[{key:"index",label:"序号",class:"text-center"},{key:"pin",label:"识别码",sortable:!0},{key:"oname",label:"所有人",sortable:!0,class:"text-center"},{key:"role",label:"类型",sortable:!0,class:"text-center"},{key:"effective",label:"有效时间"},{key:"remark",label:"备注",sortable:!0},{key:"actions",label:""}];e.a={name:"c-pinTable",components:{CUserSelect:n.a,CInfoSelect:o.a},data:function(){return{field:l,currentPage:1,perPage:10,totalRows:0,pageOptions:[5,10,15],sortBy:"pin",sortDesc:!1,filter:null,items:i,info:"",showDeleteModal:!1,showSendModal:!1,showModal:!1,pin:"",msg:"",headerBgVariant:"",basePath:basePath,user:"",type:""}},watch:{info:function(){this.initTable()},user:function(){this.initTable()},type:function(){this.initTable()}},computed:{sortOptions:function(){return this.field.filter(function(t){return t.sortable}).map(function(t){return{text:t.label,value:t.key}})}},methods:{passInfo:function(t){this.info=t},passUser:function(t){this.user=t},initTable:function(){this.$refs.pinTable.refresh()},pinTable:function(t){var e=this;this.isBusy=!0;var a="/pin?start="+t.currentPage+"&length="+t.perPage+"&orderCol="+t.sortBy;return this.isNotEmpty(this.info)&&(a+="&info="+this.info.value),this.isNotEmpty(this.user)&&(a+="&ownerId="+this.user.value),this.isNotEmpty(this.type)&&(a+="&type="+this.type),this.isNotEmpty(t.filter)&&(a+="&search="+t.filter),t.sortDesc?a+="&order=desc":a+="&order=asc",r.a.get(a).then(function(t){var a=t.data.data;return e.totalRows=t.data.recordsTotal,a||[]})},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},isNotEmpty:function(t){return""!==t&&void 0!==t&&null!==t},showDeleteOne:function(t){this.pin=t,this.showDeleteModal=!0},deleteOne:function(){var t=this;r.a.delete("/pin/"+this.pin).then(function(e){2001===e.data.code?(t.msg="删除成功！",t.showModal=!0,t.headerBgVariant="success",t.initTable()):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},resendPin:function(t){this.pin=t,this.showSendModal=!0},resendOne:function(){var t=this;r.a.post("/pin/send",this.pin).then(function(e){2001===e.data.code?(t.msg="发送成功！",t.showModal=!0,t.headerBgVariant="success"):(t.msg=e.data.msg,t.showModal=!0,t.headerBgVariant="danger")})},updateOne:function(t){var e=this;this.$validator.validateAll().then(function(a){a&&r.a.put("/pin/"+t.pin,t).then(function(t){2001===t.data.code?(e.msg="修改成功！",e.showModal=!0,e.headerBgVariant="success"):(e.msg=t.data.msg,e.showModal=!0,e.headerBgVariant="danger")})})}}}},774:function(t,e,a){"use strict";var s=a(663),r=a(775),o=a(21),n=o(s.a,r.a,!1,null,null,null);e.a=n.exports},775:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("检索条件：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"5"}},[a("CUserSelect",{on:{pass:t.passUser}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}})],1),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("每页显示：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"1"}},[a("legend",{staticClass:"col-form-legend"},[t._v("类型：")])]),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"3"}},[a("b-form-group",[a("b-form-select",{attrs:{options:[{text:"选课",value:"1"},{text:"成绩录入",value:"2"},{text:"选导师",value:"3"},{text:"全部",value:""}]},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1)],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"4"}},[a("b-form-group",[a("b-input-group",[a("b-input-group-button",[a("div",{staticClass:"mt-2"},[t._v("\n              搜索：\n            ")])]),t._v(" "),a("b-form-input",{model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),a("b-input-group-button",[a("b-button",{attrs:{variant:"danger",disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("重置")])],1)],1)],1)],1)],1),t._v(" "),a("b-table",{ref:"pinTable",attrs:{"show-empty":"",stacked:"md",striped:!0,fixed:!0,hover:!0,items:t.pinTable,fields:t.field,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"sort-by":t.sortBy,"sort-desc":t.sortDesc,isBusy:!1},on:{"update:sortBy":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"index",fn:function(e){return[t._v("\n      "+t._s((t.currentPage-1)*t.perPage+1+e.index)+"\n    ")]}},{key:"effective",fn:function(e){return[a("p",{staticClass:"text-muted"},[t._v("从"+t._s(e.item.startTime)+" "),a("br"),t._v(" 至"+t._s(e.item.endTime))])]}},{key:"role",fn:function(e){return[2==e.item.role?a("p",{staticClass:"text-muted"},[t._v("教务")]):t._e(),t._v(" "),3==e.item.role?a("p",{staticClass:"text-muted"},[t._v("选导师")]):t._e(),t._v(" "),1==e.item.role?a("p",{staticClass:"text-muted"},[t._v("选课")]):t._e()]}},{key:"oname",fn:function(e){return[a("b-row",[a("b-col",{attrs:{md:"3"}},[t.isNotEmpty(e.item.profile)?a("img",{staticClass:"img-avatar",staticStyle:{width:"30px",height:"30px"},attrs:{src:t.basePath+"/static"+JSON.parse(e.item.profile).path}}):a("img",{staticClass:"img-avatar",staticStyle:{width:"40px",height:"40px"},attrs:{src:"/static/eas/img/logo.png"}})]),t._v(" "),a("b-col",{staticClass:"mt-1",attrs:{md:"9"}},[t._v("\n          "+t._s(e.value)+"\n        ")])],1)]}},{key:"actions",fn:function(e){return[a("b-nav",{attrs:{pills:""}},[a("b-nav-item-dropdown",{attrs:{text:"操作"}},[a("b-dropdown-item",{on:{click:function(a){a.stopPropagation(),t.showDeleteOne(e.item.pin)}}},[a("i",{staticClass:"fa fa-trash",staticStyle:{color:"red"},attrs:{title:"删除该PIN"}}),t._v("删除该PIN\n          ")]),t._v(" "),a("b-dropdown-item",{on:{click:function(a){a.stopPropagation(),t.resendPin(e.item)}}},[a("i",{staticClass:"fa fa-envelope",staticStyle:{color:"red"},attrs:{title:"删除该PIN"}}),t._v("重新发送PIN\n          ")]),t._v(" "),a("b-dropdown-item",{on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[a("i",{staticClass:"fa fa-pencil",staticStyle:{color:"red"},attrs:{title:"删除该PIN"}}),t._v("修改时效\n          ")])],1)],1)]}},{key:"row-details",fn:function(e){return[a("b-card",[a("b-list-group",[a("b-list-group-item",{staticClass:"flex-column align-items-start",attrs:{title:"编辑识别码"}},[a("div",{staticClass:"d-flex w-100 ustify-content-between"},[a("h5",{staticClass:"mb-1"},[t._v(" PIN "+t._s(e.item.pin)+" ："),a("strong",[t._v(t._s(e.item.oname))]),t._v(" 的"+t._s(1===t.pin.role?"选课":"成绩录入")+"识别码的时效信息")])]),t._v(" "),a("hr"),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"9"}},[a("div",{staticClass:"mr-1"},[a("dl",{staticClass:"row"},[a("b-col",{staticClass:"mt-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label",attrs:{for:"updateStartTime"}},[t._v("*生效时间:")])]),t._v(" "),a("b-col",{staticClass:"mt-1",attrs:{md:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.startTime,expression:"row.item.startTime"},{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY-MM-DD HH:mm:ss",expression:"'required|date_format:YYYY-MM-DD HH:mm:ss'"}],class:{"form-control":!0,"is-invalid":t.errors.has("生效时间")},attrs:{name:"生效时间",id:"updateStartTime"},domProps:{value:e.item.startTime},on:{input:function(a){a.target.composing||t.$set(e.item,"startTime",a.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("生效时间"),expression:"errors.has('生效时间')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("生效时间"))+"\n                      ")])]),t._v(" "),a("b-col",{staticClass:"mt-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label",attrs:{for:"updateEndTime"}},[t._v("*失效时间:")])]),t._v(" "),a("b-col",{staticClass:"mt-1",attrs:{md:"3"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.endTime,expression:"row.item.endTime"},{name:"validate",rawName:"v-validate",value:"required|date_format:YYYY-MM-DD HH:mm:ss",expression:"'required|date_format:YYYY-MM-DD HH:mm:ss'"}],class:{"form-control":!0,"is-invalid":t.errors.has("失效时间")},attrs:{name:"失效时间",id:"updateEndTime"},domProps:{value:e.item.endTime},on:{input:function(a){a.target.composing||t.$set(e.item,"endTime",a.target.value)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("失效时间"),expression:"errors.has('失效时间')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("失效时间"))+"\n                      ")])])],1),t._v(" "),a("hr"),t._v(" "),a("dl",{staticClass:"row"},[a("dt",{staticClass:"col-sm-1"},[t._v("操作:")]),t._v(" "),a("dd",{staticClass:"col-sm-5"},[a("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(a){a.stopPropagation(),t.updateOne(e.item,e)}}},[t._v("\n                        修改时效\n                      ")]),t._v(" "),a("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[t._v("\n                        取消修改\n                      ")])],1)])])])],1)],1)],1)],1)]}}])}),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"","ok-title":"关闭",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v(t._s(t.msg))])])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"6"}},[a("p",{staticClass:"text-muted",staticStyle:{"text-align":"right"}},[t._v(" 显示 "+t._s((t.currentPage-1)*t.perPage+1)+" 至 "+t._s((t.currentPage-1)*t.perPage+t.perPage<=t.totalRows?(t.currentPage-1)*t.perPage+t.perPage:t.totalRows)+" 条 ，总共 "+t._s(t.totalRows)+" 条数据 ")])])],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"",title:"不可逆操作警告！"},on:{ok:t.deleteOne},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认删除该识别码？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"primary","ok-title":"发送","cancel-title":"取消",centered:"",title:"确认信息"},on:{ok:t.resendOne},model:{value:t.showSendModal,callback:function(e){t.showSendModal=e},expression:"showSendModal"}},[a("div",{staticClass:"d-block text-center"},[a("h4",[t._v("请确认识别码信息：")]),t._v(" "),a("p",{staticClass:"text-muted"},[t._v("\n        识别码："+t._s(t.pin.pin)+" "),a("br"),t._v("\n        类型："+t._s(1===t.pin.role?"选课":"成绩录入")+" "),a("br"),t._v("\n        有效期：从"+t._s(t.pin.startTime)+" 至 "+t._s(t.pin.endTime)),a("br"),t._v("\n        所有人："+t._s(t.pin.oname))]),t._v(" "),a("h4",[t._v("确认后请按发送键。")])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o},776:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"识别码列表",name:"first"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("识别码列表")])]),t._v(" "),a("b-card-body",[a("CPinTable")],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"识别码(PIN)生成",name:"second"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("PIN生成")]),t._v(" "),a("small",[t._v("生成规则信息")])]),t._v(" "),a("b-card-body",[a("b-row",[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*年份-学期(YYYY-XX):")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%",float:"left"},attrs:{id:"year",name:"info",plain:!0,options:[2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025]},model:{value:t.pinInfo.year,callback:function(e){t.$set(t.pinInfo,"year",e)},expression:"pinInfo.year"}}),t._v(" "),a("b-form-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"form-control":!0,"is-invalid":t.errors.has("info")},staticStyle:{width:"50%"},attrs:{id:"info",name:"info",plain:!0,options:[{text:"春季课程",value:"01"},{text:"秋季课程",value:"02"},{text:"夏季课程",value:"03"}]},model:{value:t.pinInfo.semester,callback:function(e){t.$set(t.pinInfo,"semester",e)},expression:"pinInfo.semester"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("info"),expression:"errors.has('info')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])],1)],1),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*生成方式:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"single",name:"mode",value:"2"},domProps:{checked:t._q(t.mode,"2")},on:{change:function(e){t.mode="2"}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"single"}},[t._v("单人")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.mode,expression:"mode"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"batch",name:"mode",value:"1"},domProps:{checked:t._q(t.mode,"1")},on:{change:function(e){t.mode="1"}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"batch"}},[t._v("单类型")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("mode"),expression:"errors.has('mode')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("info")))])])],1),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*选择类型:")])]),t._v(" "),a("b-col",{attrs:{md:"5"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"role"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("role")},attrs:{type:"radio",id:"course",value:"1",name:"level"},domProps:{checked:t._q(t.role,"1")},on:{change:function(e){t.role="1"}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"course"}},[t._v("选课")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"role"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("role")},attrs:{type:"radio",id:"advisor",value:"3",name:"level"},domProps:{checked:t._q(t.role,"3")},on:{change:function(e){t.role="3"}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"advisor"}},[t._v("选导师")])]),t._v(" "),a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.role,expression:"role"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("role")},attrs:{type:"radio",id:"transcript",value:"2",name:"level"},domProps:{checked:t._q(t.role,"2")},on:{change:function(e){t.role="2"}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"transcript"}},[t._v("成绩录入")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("role"),expression:"errors.has('role')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("role")))])])],1),t._v(" "),2==t.mode&&""!=t.role?a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*识别码的所有人:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[2==t.role?a("CFacultySelect",{on:{pass:t.passUser}}):t._e(),t._v(" "),1==t.role||3==t.role?a("CStudentSelect",{on:{pass:t.passUser}}):t._e()],1)],1):t._e(),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*有效期:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("el-date-picker",{attrs:{id:"range",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}})],1)],1),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label",attrs:{for:"comments"}},[t._v("备注信息:")])]),t._v(" "),a("b-col",{attrs:{md:"8"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"form-control",staticStyle:{resize:"none"},attrs:{id:"comments",rows:"3"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})])],1),t._v(" "),a("b-row",{staticClass:"mt-2"},[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*请确认上述信息正确无误:")])]),t._v(" "),a("b-col",{attrs:{md:"3"}},[a("div",{staticClass:"custom-control custom-radio custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],class:{"custom-control-input":!0,"is-invalid":t.errors.has("confirm")},attrs:{type:"radio",id:"yes",name:"confirm"},domProps:{checked:t._q(t.confirm,null)},on:{change:function(e){t.confirm=null}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"yes"}},[t._v("确认")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("confirm"),expression:"errors.has('confirm')"}],staticClass:"invalid-tooltip"},[t._v(t._s(t.errors.first("confirm")))])])]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.generate}},[t._v("生成（并自动发送）\n              ")])],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t._v("\n          注意：如果生成失败，可以尝试清空后再生成。\n          注意：如果生成失败，可以尝试清空后再生成。\n        ")])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"识别码(PIN)批量清空",name:"third"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("识别码(PIN)批量清空")])]),t._v(" "),a("b-row",[a("b-col",{staticClass:"mt-1",attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*选择清除的学期:")])]),t._v(" "),a("b-col",{attrs:{md:"5"}},[a("CInfoSelect",{on:{pass:t.passInfo}})],1),t._v(" "),a("b-col",{staticClass:"my-1",attrs:{md:"2"}},[a("b-button",{staticStyle:{width:"150px"},attrs:{variant:"danger"},on:{click:t.showDeleteAll}},[t._v("清除\n            ")])],1)],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"识别码(PIN)批量发送",name:"fourth"}},[a("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("i",{attrs:{className:"fa fa-align-justify"}}),a("strong",[t._v("识别码(PIN)批量发送")])]),t._v(" "),a("b-row",[a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*选择发送学期:")])]),t._v(" "),a("b-col",{attrs:{md:"4"}},[a("CInfoSelect",{on:{pass:t.passSendInfo}})],1),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("label",{staticClass:"col-sm-12 control-label"},[t._v("*选择发送种类（可复选）:")])]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendRole,expression:"sendRole"}],staticClass:"custom-control-input",attrs:{id:"choose",type:"checkbox",name:"role2",value:"1"},domProps:{checked:Array.isArray(t.sendRole)?t._i(t.sendRole,"1")>-1:t.sendRole},on:{change:function(e){var a=t.sendRole,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,"1");s.checked?o<0&&(t.sendRole=a.concat(["1"])):o>-1&&(t.sendRole=a.slice(0,o).concat(a.slice(o+1)))}else t.sendRole=r}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"choose"}},[t._v("选课")])]),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendRole,expression:"sendRole"}],staticClass:"custom-control-input",attrs:{id:"advisor2",type:"checkbox",name:"role2",value:"3"},domProps:{checked:Array.isArray(t.sendRole)?t._i(t.sendRole,"3")>-1:t.sendRole},on:{change:function(e){var a=t.sendRole,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,"3");s.checked?o<0&&(t.sendRole=a.concat(["3"])):o>-1&&(t.sendRole=a.slice(0,o).concat(a.slice(o+1)))}else t.sendRole=r}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"advisor2"}},[t._v("选导师")])]),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendRole,expression:"sendRole"}],staticClass:"custom-control-input",attrs:{id:"grade",type:"checkbox",name:"role2",value:"2"},domProps:{checked:Array.isArray(t.sendRole)?t._i(t.sendRole,"2")>-1:t.sendRole},on:{change:function(e){var a=t.sendRole,s=e.target,r=!!s.checked;if(Array.isArray(a)){var o=t._i(a,"2");s.checked?o<0&&(t.sendRole=a.concat(["2"])):o>-1&&(t.sendRole=a.slice(0,o).concat(a.slice(o+1)))}else t.sendRole=r}}}),t._v(" "),a("label",{staticClass:"custom-control-label",attrs:{for:"grade"}},[t._v("成绩录入")])])]),t._v(" "),a("b-col",{attrs:{md:"2"}},[a("b-button",{staticStyle:{width:"150px"},attrs:{variant:"success"},on:{click:t.sendPin}},[t._v("发送\n            ")])],1)],1)],1)],1)],1),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":"danger",centered:"","ok-title":"清除","cancel-title":"取消","ok-vairant":"danger",title:"不可逆操作警告！"},on:{ok:t.deleteAll},model:{value:t.showDeleteModal,callback:function(e){t.showDeleteModal=e},expression:"showDeleteModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v("确认清除"+t._s(this.deleteInfo)+"该学期的识别码？")])])]),t._v(" "),a("b-modal",{attrs:{size:"sm","header-bg-variant":t.headerBgVariant,"ok-only":"",centered:"",title:"消息"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t.msg))])])])],1)},r=[],o={render:s,staticRenderFns:r};e.a=o}});
//# sourceMappingURL=10.d40ce5d856389ceb14b8.js.map